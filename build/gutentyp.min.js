hilary.register("gutentyp::config",{init:function(){var b={prefixes:{pipeline:{beforeComponent:"gutentyp::before::",afterComponent:"gutentyp::after::"}},attributes:{formBtn:{key:"data-form-btn",value:"true"}},colors:[]};b.colors.push({title:"Black",name:"black",value:"#000000"});b.colors.push({title:"Grey",name:"grey",value:"#62615f"});b.colors.push({title:"Light Grey",name:"lightGrey",value:"#dcddd7"});b.colors.push({title:"Pink",name:"pink",value:"#cd52bd"});b.colors.push({title:"Red",name:"red",
value:"#9a0000"});b.colors.push({title:"Yellow",name:"yellow",value:"#f0ac28"});b.colors.push({title:"Green",name:"green",value:"#6bb343"});b.colors.push({title:"Blue",name:"blue",value:"#3c8bc8"});b.colors.push({title:"Purple",name:"purple",value:"#a952cd"});b.icons={code:"fa fa-code",pre:"fa fa-file-code-o",blockquote:"fa fa-quote-left",bold:"fa fa-bold",italic:"fa fa-italic",underline:"fa fa-underline",strikethrough:"fa fa-strikethrough",header:"fa fa-header",image:"fa fa-image",alignLeft:"fa fa-align-left",
alignCenter:"fa fa-align-center",alignRight:"fa fa-align-right",alignJustify:"fa fa-align-justify",indent:"fa fa-indent",outdent:"fa fa-outdent",link:"fa fa-link",unorderedList:"fa fa-list-ul",orderedList:"fa fa-list-ol",embed:"fa fa-play-circle-o"};b.cssClasses={toGutentypify:"gutentyp-ify",gutentypified:"gutentyp-ified",hasEvents:"has-events",hasToolbar:"has-toolbar",hasComponents:"has-components",editor:"gutentyp-editor",textarea:"gutentyp-textarea",toolbar:"gutentyp-toolbar",toolbarBtn:"gutentyp-toolbar-btn",
toolbarBtnText:"gutentyp-toolbar-btn-text",toolbarBtnIcon:"gutentyp-toolbar-btn-icon",toolbarGroup:"gutentyp-toolbar-group",toolbarArrowOver:"gutentyp-toolbar-arrow-over",hidden:"gutentyp-hidden",form:"gutentyp-form"};b.autoCreateSelectors=function(){var c;b.selectors={};for(c in b.cssClasses)b.cssClasses.hasOwnProperty(c)&&(b.selectors[c]="."+b.cssClasses[c]);b.selectors.newEditors=b.selectors.editor+":not("+b.selectors.hasToolbar+")";b.selectors.eventlessEditors=b.selectors.editor+":not("+b.selectors.hasEvents+
")";b.selectors.newToolbars=b.selectors.toolbar+":not("+b.selectors.hasComponents+")"};b.autoCreateSelectors();return b}});hilary.register("gutentyp::dom",{init:function(b,c){var h,k,e,f,m,l,n,p,s,q,t,u;h=function(a,d,r,g,c){a=b("<"+(a||"div")+" />");d&&null!==d&&""!==d&&a.addClass("."===d[0]?d.substr(1):d);if("undefined"!==typeof r)for(d=0;d<r.length;d++)a.attr(r[d].key,r[d].value);"undefined"!==typeof g&&a.html(g);return c?a.prop("outerHTML"):a};k=function(a,d){return b(a).append(d)};e=function(a,d){return b(a).addClass(d)};f=function(a,d){return b(a).closest(d)};m=function(a,d){return b(a).siblings(d)};l=function(a,
d){var c;a instanceof b&&(a=a[0]);document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(d,!0,!0),c.eventName=d,a.dispatchEvent(c)):(c=document.createEventObject(),c.eventType=d,c.eventName=d,a.fireEvent("on"+c.eventType,c));b(a).trigger(d)};n=function(a,d,b){var g,c,e,f;if(!a)return!1;a.isClone&&window.getSelection&&(p(a),a=window.getSelection());if(window.getSelection){if(a.getRangeAt&&a.rangeCount){g=a.getRangeAt(0);g.deleteContents();c=document.createElement("div");c.innerHTML=
d;for(d=document.createDocumentFragment();e=c.firstChild;)f=d.appendChild(e);c=d.firstChild;g.insertNode(d);f&&(g=g.cloneRange(),g.setStartAfter(f),b?g.setStartBefore(c):g.collapse(!0),a.removeAllRanges(),a.addRange(g))}}else"Control"!==a.type&&(f=a.createRange(),f.collapse(!0),a.createRange().pasteHTML(d),b&&(g=a.createRange(),g.setEndPoint("StartToStart",f),g.select()))};p=function(a){try{var d,b,g,c,f,e,l,k,h,m=document.createRange();b=a.startContainer||a.baseNode||a.anchorNode;g=a.endContainer||
a.extentNode||a.focusNode;e=a.startOffset||a.baseOffset||a.anchorOffset;l=a.endOffset||a.extentOffset||a.focusOffset;l>e?(c=b,k=e,f=g,h=l):(c=g,k=l,f=b,h=e);m.setStart(c,k);m.setEnd(f,h);d=window.getSelection();d.removeAllRanges();d.addRange(m)}catch(n){console.log(n)}};s=function(a){var d;a&&a.anchorNode&&(d=a.anchorNode);!d&&window.getSelection&&(a=window.getSelection(),d=a.anchorNode);!d&&document.selection&&(a=document.selection,a=a.getRangeAt?a.getRangeAt(0):a.createRange(),d=a.commonAncestorContainer?
a.commonAncestorContainer:a.parentElement?a.parentElement():a.item(0));if(d)return"#text"===d.nodeName?d.parentNode:d};q=function(a){var d="",b;for(b=0;b<(a||5);b++)d+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()));return d};t=function(a,d,c){c=b(a);a=c.offset();var g,f=c.outerWidth()/2;g=d?b(d):c;a.width=g.outerWidth();a.height=49<c.outerHeight()?c.outerHeight():50;d&&(a.moveLeft=a.left+(f||25)-a.width/2,a.moveTop=a.top+2*f,a.moveRight=a.right+a.width/2-t(d).width/2,a.moveBottom=
a.bottom+a.height+6);d=b(window).width();c=b(window).height();a.moveLeft+a.width>d&&(a.moveLeft=d-a.width);a.moveTop+a.height>c&&(a.moveTop=c-a.height);return a};u=function(a,d){var r;r=b(a).is("form")?b(a):d&&b(a).hasClass(c.cssClasses.form)?b(a).find(":input"):d?b(a).closest(c.selectors.form).find(":input"):b(a).closest(c.selectors.form);if(!r||1>r.length)r=b(a).find(c.selectors.form);return r};return{makeElement:h,initializeRichTextAreas:function(){var a=[];b(c.selectors.toGutentypify).each(function(d,
r){var g=b(this);g.attr("id")||g.attr("id","gutentyp-"+q());b("<div />").addClass(c.cssClasses.editor).attr("data-for",g.attr("id")).html(g.val()).attr("contenteditable",!0).insertBefore(g);g.removeClass(c.cssClasses.toGutentypify);g.addClass(c.cssClasses.hidden);g.addClass(c.cssClasses.gutentypified);a.push(g.attr("id"))});return a},insertNewElementBefore:function(a,d,c,g){d&&""!==d&&h(a,c,g).insertBefore(b(d))},insertNewElementInto:function(a,d,c,g){d&&""!==d&&("string"!==typeof a&&a.markup?b(a.markup).appendTo(b(d)):
h(a,c,g).appendTo(b(d)))},insertHtmlBefore:function(a,d){return b(a).before(d)},insertHtmlAfter:function(a,d){return b(a).after(d)},setText:function(a,d){return b(a).text(d)},insertHtml:k,addClass:e,removeClass:function(a,d){return b(a).removeClass(d)},toggleClass:function(a,d){return b(a).toggleClass(d)},getAttribute:function(a,d){return b(a).attr(d)},getOrSetValue:function(a,d){return d?(b(a).val(d),d):b(a).val()},clearForm:function(a){a=u(a);a.val("");a.is("textarea")&&a.html("");a.find(":input").val("");
a.find("textarea").html("");return a.find(".alert").addClass(c.cssClasses.hidden)},getClosest:f,getClosestAdjacent:m,getNext:function(a,d){return b(a).next(d)},getPrevious:function(a,d){return b(a).prev(d)},exists:function(a){return 0<b(a).length},attachEvent:function(a){if(!a||!1===b.isFunction(a.eventHandler))return!1;var d=b(a.primarySelector);if(a.secondarySelector)d.on(a.eventType,a.secondarySelector,function(d){a.eventHandler(d.originalEvent)});else d.on(a.eventType,function(d){a.eventHandler(d.originalEvent)});
return e(d,c.cssClasses.hasEvents)},updateTextarea:function(a){var d=b("textarea#"+b(a).attr("data-for"));d.is("textarea")&&d.html(b(a).html());d.val(b(a).html());l(d[0],"change");return a},isFunction:function(a){return b.isFunction(a)},isObject:function(a){return b.isPlainObject(a)},isArray:function(a){return b.isArray(a)},hasAncestor:function(a,d){return 0!==b(a).parents(d).length||"string"===typeof d&&b(a).hasClass(d)||"string"===typeof d&&b(a).hasClass(d.substring(1))?!0:!1},getSelectedText:function(){var a,
d,b,c;if("undefined"!==typeof window.getSelection){if(a=window.getSelection(),a.rangeCount){d=document.createElement("div");b=0;for(c=a.rangeCount;b<c;++b)d.appendChild(a.getRangeAt(b).cloneContents());return d.innerHTML}}else if("undefined"!==typeof document.selection&&"Text"===document.selection.type)return document.selection.createRange().htmlText},getSelectedParentNode:s,replaceSelectedText:function(a){var d,b,c;if(window.getSelection&&window.getSelection().getRangeAt){d=window.getSelection().getRangeAt(0);
d.deleteContents();b=document.createElement("div");b.innerHTML=a;for(a=document.createDocumentFragment();c=b.firstChild;)a.appendChild(c);d.insertNode(a)}else document.selection&&document.selection.createRange&&(d=document.selection.createRange(),d.pasteHTML(a))},pasteHtmlAtCursor:function(a,d,r){var g;window.getSelection?g=window.getSelection():(g=document.selection,"Control"===g.type&&(g=void 0));r&&0===b(s()).closest(c.selectors.editor).length&&(r=m(f(r.target,c.selectors.toolbar),c.selectors.editor).first(),
k(r,a));n(g,a,d)},pasteHtml:n,selectRange:p,selectionIsInEditor:function(a){return 0<b(s(a)).closest(c.selectors.editor).length},getCursorCoordinates:function(){var a=window.getSelection();return a.getRangeAt&&a.rangeCount?b.extend({isClone:!0},a,a.getRangeAt(0)):!1},getRandomString:q,getCoordinates:t,setStyle:function(a,d){return b(a).attr("style",d)},formToJson:function(a){a=u(a,!0);var d={},c;if(0!==a.length)return c=a.serializeArray(),b.each(c,function(){void 0!==d[this.name]?(d[this.name].push||
(d[this.name]=[d[this.name]]),d[this.name].push(this.value||"")):d[this.name]=this.value||""}),a.find(':input[disabled="disabled"]').each(function(a){a=b(this);var c=a.attr("name");c&&(d[c]=a.val())}),d}}}});hilary.register("gutentyp::pipeline",{init:function(b,c){var h=[],k=[],e={},f,m={beforeAny:h,afterAny:k,registerPipelineEvent:e};e.registerBeforeAnyHandler=function(b){if(!c.isFunction(b))throw Error("Only functions can be registered as beforeAny events.");h.push(b)};e.registerAfterAnyHandler=function(b){if(!c.isFunction(b))throw Error("Only functions can be registered as afterAny events.");k.push(b)};e.registerBeforeComponentHandler=function(c,e){f(b.prefixes.pipeline.beforeComponent+c,e)};e.registerAfterComponentHandler=
function(c,e){f(b.prefixes.pipeline.afterComponent+c,e)};f=function(b,f){if(!c.isFunction(f))throw Error("Only functions can be registered as pipeline events.");m[b]=f};return m}});hilary.register("gutentyp::components",{init:function(b,c,h){var k=[],e,f,m,l,n,p,s,q,t,u={},a;t=function(d){if(d instanceof Array)for(var a in d)d.hasOwnProperty(a)&&t(d[a]);else k.push(d)};p=function(d){c.attachEvent({primarySelector:document,secondarySelector:"."+d.cssClass,eventType:"click",eventHandler:function(d){var a=c.getClosest(d.target,"button");d="."+c.getAttribute(a,"data-for");var a=c.getCoordinates(a,d),b;b="left: "+a.moveLeft+"px";b+="; top: "+a.moveTop+"px";c.setStyle(d,b);c.toggleClass(d,
"active")}})};s=function(d,a){c.attachEvent({primarySelector:document,secondarySelector:"."+d.cssClass+"-form .btn-success",eventType:"click",eventHandler:function(g){var f=c.formToJson(g.target),e;if(c.isFunction(a)&&!a(g,f))return!1;e=c.getClosest(g.target,b.selectors.toolbarGroup);c.toggleClass(e,"active");g.fromGutenForm=!0;d.execute(g,f)}})};q=function(d){c.attachEvent({primarySelector:document,secondarySelector:"."+d.cssClass+"-form .btn-cancel",eventType:"click",eventHandler:function(d){var a=
c.getClosest(d.target,b.selectors.toolbarGroup);d=c.getClosestAdjacent(d.target,".alert");c.toggleClass(a,"active");c.clearForm(a);c.addClass(d,b.cssClasses.hidden)}})};e=function(d,a){var b=a.fields,e=0,k="",h={names:[]},p={},q={},s=c.getRandomString();for(e;e<b.length;e++)q["a"+e]=c.getRandomString(),k+=f(b[e],q["a"+e]),m(h,b[e],q["a"+e]);0<h.names.length&&(p.validate=l(h));return n(d,k,p,s)};f=function(d,a){var g="",e;if(!d||!d.elementType||!d.name)return"";d.validation&&d.validation.message&&
(e="alert "+b.cssClasses.hidden+" "+a,d.validation.cssClass&&(e+=" "+d.validation.cssClass),g+=c.makeElement("div",e,void 0,d.validation.message,!0));d.label&&(g+=c.makeElement("label",void 0,void 0,d.label,!0));e=c.isArray(d.attributes)?d.attributes:[];e.push({key:"name",value:d.name});"input"===d.elementType&&e.push({key:"type",value:d.inputType||"text"});g+=c.makeElement(d.elementType,d.cssClass||void 0,e,void 0,!0);return g+"<br />"};m=function(d,a,b){a.name&&a.validation&&c.isFunction(a.validation.validate)&&
(d.names.push(a.name),d[a.name]=a.validation,d[a.name].messageId=b)};l=function(d){return function(a,g){var e,f,k=!0;for(e=0;e<d.names.length;e++)(f=d[d.names[e]])&&c.isFunction(f.validate)&&f.messageId&&!f.validate(a,g)&&(k=!1,f=c.getClosestAdjacent(a.target,"."+f.cssClass),f.removeClass(b.cssClasses.hidden));return k}};n=function(a,e,g,f){a.uniqueId=f||c.getRandomString();u[a.pipelineName]||(p(a),s(a,g&&g.validate),q(a),u[a.pipelineName]=!0);return{button:'<button type="button" class="'+a.cssClass+
'" data-form-btn="true" data-for="'+a.uniqueId+'"><i class="'+b.cssClasses.toolbarBtnIcon+" "+a.icon+'"></i><span class="'+b.cssClasses.toolbarBtnText+' sr-only">'+a.title+"</span></button>",form:'<div class="'+b.cssClasses.toolbarGroup+" "+b.cssClasses.toolbarArrowOver+" "+a.uniqueId+" "+a.cssClass+'-form"><div class="'+b.cssClasses.form+'">'+e+'<button class="btn btn-success btn-sm" type="button">Add</button><button class="btn btn-cancel btn-sm" type="button">Cancel</button></div></div>',uniqueId:a.uniqueId}};
return{getComponents:function(){return k},makeComponent:function(d){var f={};f.title=d.title;f.cssClass=d.cssClass||d.pipelineName;f.pipelineName=d.pipelineName;f.icon=d.icon||void 0;f.textClass=d.textClass+" "+b.cssClasses.toolbarBtnText||b.cssClasses.toolbarBtnText;f.displayHandler=d.displayHandler;f.group=d.group||void 0;f.execute=function(g,f){var e,k=b.prefixes.pipeline.beforeComponent+d.pipelineName,l=b.prefixes.pipeline.afterComponent+d.pipelineName,m=c.getSelectedText();if(c.getAttribute(c.getClosest(g.target,
"button"),b.attributes.formBtn.key))a=c.getCursorCoordinates(),a.text=m,a.isInEditor=c.selectionIsInEditor(a),g.gutenSelection=a;else{for(e=0;e<h.beforeAny.length;e++)if(c.isFunction(h.beforeAny[e]))h.beforeAny[e](g,m,f);if(c.isFunction(h[k]))h[k](g,m,f);c.isFunction(d.func)&&(e=d.func(g,m||a&&a.text,f),m&&0<m.length&&e?c.replaceSelectedText(e):a&&a.isInEditor&&e?c.pasteHtml(a,e):e&&c.pasteHtmlAtCursor(e,!1,g));for(e=0;e<h.afterAny.length;e++)if(c.isFunction(h.afterAny[e]))h.afterAny[e](g,m,f);if(c.isFunction(h[l]))h[l](g,
m,f)}};d.before&&h.registerPipelineEvent.registerBeforeComponentHandler(d.pipelineName,d.before);d.after&&h.registerPipelineEvent.registerAfterComponentHandler(d.pipelineName,d.after);d.form&&!f.displayHandler&&(f.displayHandler=function(){var a=e(f,d.form);c.exists(a.uniqueId)||c.insertNewElementInto({markup:a.form},"body");return a.button});a=void 0;return f},makeComponentForm:n,addComponent:t}}});hilary.register("gutentyp::toolbar",{init:function(b,c,h){var k=h.getComponents(),e,f,m,l={},n,p,s,q,t,u,a;n=function(){c.insertNewElementBefore("div",b.selectors.newEditors,b.selectors.toolbar)};p=function(){for(e=0;e<k.length;e++)void 0!==k[e].group?t(k[e]):c.isFunction(k[e].displayHandler)?q(k[e]):a(k[e])};s=function(){c.addClass(b.selectors.newEditors,b.cssClasses.hasToolbar);c.addClass(b.selectors.newToolbars,b.cssClasses.hasComponents)};f=function(a){return b.selectors.toolbar+" ."+a.cssClass+
":not("+b.selectors.hasEvents+")"};m=function(a,c){var e;e="gutentyp-component "+a.cssClass;c&&(e+=" "+c);return'<button type="button" class="'+e+'" data-title="'+a.title+'"><i class="'+b.cssClasses.toolbarBtnIcon+" "+a.icon+'"></i><span class="'+a.textClass+'">'+a.title+"</span></button>"};a=function(a){c.insertNewElementInto({markup:m(a)},b.selectors.newToolbars);c.attachEvent({primarySelector:f(a),eventType:"click",eventHandler:a.execute})};q=function(a){c.insertHtml(b.selectors.newToolbars,a.displayHandler());
c.attachEvent({primarySelector:f(a),eventType:"click",eventHandler:a.execute})};u=function(a){var e=l[a.group.name]={components:[a]};e.toggleId=c.getRandomString();e.menuId=c.getRandomString();e.toggleSelector="."+e.toggleId;e.menuSelector="."+e.menuId;c.insertNewElementInto({markup:m(a.group,e.toggleId)},b.selectors.newToolbars);c.insertNewElementInto({markup:'<div class="'+e.menuId+" gutentyp-toolbar-group gutentyp-toolbar-arrow-"+(a.group.arrow||"over")+'"><ul></ul></div>'},"body");c.attachEvent({primarySelector:e.toggleSelector,
eventType:"click",eventHandler:function(a){a=c.getClosest(a.target,"button");a=c.getCoordinates(a,e.menuSelector);var d;d="left: "+a.moveLeft+"px";d+="; top: "+a.moveTop+"px";c.setStyle(e.menuSelector,d);c.toggleClass(".gutentyp-toolbar-group.active:not("+e.menuSelector+")","active");c.toggleClass(e.menuSelector,"active")}});return e};t=function(a){var b=c.getRandomString(),e="."+b,f;l[a.group.name]?(f=l[a.group.name],l[a.group.name].components.push(a)):f=u(a);a.displayHandler?c.insertNewElementInto({markup:"<li>"+
a.displayHandler(b)+"</li>"},f.menuSelector+" ul"):c.insertNewElementInto({markup:"<li>"+m(a,b)+"</li>"},f.menuSelector+" ul");c.attachEvent({primarySelector:e,eventType:"click",eventHandler:function(b,e){a.execute(b,e);c.toggleClass(f.menuSelector,"active")}})};return{build:function(){n();p();s()}}}});hilary.register("gutentyp::transformer",{init:function(b,c,h,k,e){e=e||{};return{transform:function(){c.initializeRichTextAreas();e.lazyToolbars?c.attachEvent({primarySelector:document,secondarySelector:b.selectors.editors,eventType:"focusin",eventHandler:function(b){k.build()}}):k.build();c.attachEvent({primarySelector:b.selectors.eventlessEditors,eventType:"blur,change",eventHandler:function(b){b.target&&c.updateTextarea(b.target)}});c.addClass(b.selectors.editor,b.cssClasses.hasEvents)}}}});hilary.register("gutentyp::components::blocks",{init:function(b,c){var h,k,e;k=b.makeComponent({title:"Code Block",cssClass:"gutentyp-code-block",pipelineName:"code::block",icon:c.icons.pre,textClass:"sr-only",func:function(b,c){return'<pre class="prettyprint linenums">'+(c||" ")+"</pre>"}});h=b.makeComponent({title:"Code",cssClass:"gutentyp-code",pipelineName:"code",icon:c.icons.code,textClass:"sr-only",func:function(b,c){return"<code>"+c+"</code>"}});e=b.makeComponent({title:"Quote",cssClass:"gutentyp-quote",
pipelineName:"quote",icon:c.icons.blockquote,textClass:"sr-only",func:function(b,c){return"<blockquote>"+c+"</blockquote>"}});b.addComponent([h,k,e])}});hilary.register("gutentyp::components::colors",{init:function(b,c){var h,k=c.colors,e=0,f;f=b.makeComponent({title:"Colors",cssClass:"gutentyp-colors",pipelineName:"colors",icon:"gutentyp-component-color-block gutentyp-component-color-label",textClass:"sr-only"});f.name="colors";f.arrow="over";h=function(c){b.addComponent(b.makeComponent({title:c.title,cssClass:"gutentyp-"+c.name,pipelineName:"color"+c.Title,func:function(b,e){document.execCommand("forecolor",!1,c.value);return!1},displayHandler:function(b){return'<button type="button" class="'+
b+'"><span class="gutentyp-component-color-block" style="background-color: '+c.value+'"></span></button>'},group:f}))};for(e;e<k.length;e++)h(k[e])}});hilary.register("gutentyp::components::emphasis",{init:function(b,c){var h,k,e,f;h=b.makeComponent({title:"Bold",cssClass:"gutentyp-bold",pipelineName:"bold",icon:c.icons.bold,textClass:"sr-only",func:function(b,c){document.execCommand("bold",!1,null);return!1}});k=b.makeComponent({title:"Italic",cssClass:"gutentyp-italic",pipelineName:"italic",icon:c.icons.italic,textClass:"sr-only",func:function(b,c){document.execCommand("italic",!1,null);return!1}});e=b.makeComponent({title:"Underline",cssClass:"gutentyp-underline",
pipelineName:"underline",icon:c.icons.underline,textClass:"sr-only",func:function(b,c){document.execCommand("underline",!1,null);return!1}});f=b.makeComponent({title:"Strike Through",cssClass:"gutentyp-strike",pipelineName:"strike",icon:c.icons.strikethrough,textClass:"sr-only",func:function(b,c){document.execCommand("strikeThrough",!1,null);return!1}});b.addComponent([h,k,e,f])}});hilary.register("gutentyp::components::headings",{init:function(b,c){var h,k,e,f,m,l;l=b.makeComponent({title:"Headings",cssClass:"gutentyp-headings",pipelineName:"headings",icon:c.icons.header,textClass:"sr-only"});l.name="headings";l.arrow="over";h=b.makeComponent({title:"h1",cssClass:"gutentyp-h1",pipelineName:"h1",func:function(b,c){return"<h1>"+c+"</h1>"},group:l});k=b.makeComponent({title:"h2",cssClass:"gutentyp-h2",pipelineName:"h2",func:function(b,c){return"<h2>"+c+"</h2>"},group:l});e=b.makeComponent({title:"h3",
cssClass:"gutentyp-h3",pipelineName:"h3",func:function(b,c){return"<h3>"+c+"</h3>"},group:l});f=b.makeComponent({title:"h4",cssClass:"gutentyp-h4",pipelineName:"h4",func:function(b,c){return"<h4>"+c+"</h4>"},group:l});m=b.makeComponent({title:"h5",cssClass:"gutentyp-h5",pipelineName:"h5",func:function(b,c){return"<h5>"+c+"</h5>"},group:l});l=b.makeComponent({title:"h6",cssClass:"gutentyp-h6",pipelineName:"h6",func:function(b,c){return"<h6>"+c+"</h6>"},group:l});b.addComponent([h,k,e,f,m,l])}});hilary.register("gutentyp::components::image",{init:function(b,c,h){c=b.makeComponent({title:"Add Image",cssClass:"gutentyp-image",pipelineName:"image",icon:c.icons.image,textClass:"sr-only",func:function(b,c,f){if(!f)throw"No form data is present, so we can't write an image element.";b=f.gutenWidth;c=f.gutenHeight;return'<img src="'+f.gutenSrc+'" alt="'+(f.gutenAlt||f.gutenSrc)+'" '+(b?'width="'+b+'"':"")+(c?'height="'+c+'"':"")+"/>"},form:{fields:[{name:"gutenSrc",label:"Url",elementType:"input",
type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-src",validate:function(b,c){return!c||!c.gutenSrc||0>c.gutenSrc.indexOf("://")?!1:!0}}},{name:"gutenAlt",label:"Description",elementType:"input",type:"text",validation:{message:"Please enter a description. It's used by screen readers for accessibility.",cssClass:"link-alt",validate:function(b,c){return c&&c.gutenAlt?!0:!1}}},{name:"gutenWidth",label:"Width",elementType:"input",type:"text",validation:{message:"Width is not required, but it has to be a number",
cssClass:"link-width",validate:function(b,c){return c&&c.gutenWidth&&isNaN(c.gutenWidth)?!1:!0}}},{name:"gutenHeight",label:"Height",elementType:"input",type:"text",validation:{message:"Height is not required, but it has to be a number",cssClass:"link-height",validate:function(b,c){return c&&c.gutenHeight&&isNaN(c.gutenHeight)?!1:!0}}}]},after:function(b){h.clearForm(b.target)}});b.addComponent(c);return c}});hilary.register("gutentyp::components::justification",{init:function(b,c){var h,k,e,f,m,l;l=b.makeComponent({title:"Alignment",cssClass:"gutentyp-align",pipelineName:"alignment",icon:c.icons.alignLeft,textClass:"sr-only"});l.name="alignment";l.arrow="over";h=b.makeComponent({title:"Align Left",cssClass:"gutentyp-align-left",pipelineName:"alignLeft",icon:c.icons.alignLeft,textClass:"sr-only",func:function(b,c){document.execCommand("justifyLeft",!1,null);return!1},group:l});k=b.makeComponent({title:"Align Center",
cssClass:"gutentyp-align-center",pipelineName:"alignCenter",icon:c.icons.alignCenter,textClass:"sr-only",func:function(b,c){document.execCommand("justifyCenter",!1,null);return!1},group:l});e=b.makeComponent({title:"Align Right",cssClass:"gutentyp-align-right",pipelineName:"alignRight",icon:c.icons.alignRight,textClass:"sr-only",func:function(b,c){document.execCommand("justifyRight",!1,null);return!1},group:l});f=b.makeComponent({title:"Justify",cssClass:"gutentyp-align-justify",pipelineName:"alignJustify",
icon:c.icons.alignJustify,textClass:"sr-only",func:function(b,c){document.execCommand("justifyFull",!1,null);return!1},group:l});m=b.makeComponent({title:"Indent",cssClass:"gutentyp-indent",pipelineName:"indent",icon:c.icons.indent,textClass:"sr-only",func:function(b,c){document.execCommand("indent",!1,null);return!1},group:l});l=b.makeComponent({title:"Outdent",cssClass:"gutentyp-outdent",pipelineName:"outdent",icon:c.icons.outdent,textClass:"sr-only",func:function(b,c){document.execCommand("outdent",
!1,null);return!1},group:l});b.addComponent([h,k,e,f,m,l])}});hilary.register("gutentyp::components::link",{init:function(b,c,h){c=b.makeComponent({title:"Add Link",cssClass:"gutentyp-link",pipelineName:"link",icon:c.icons.link,textClass:"sr-only",func:function(b,c,f){if(!f)throw"No form data is present, so we can't write an anchor element.";return'<a href="'+f.gutenHref+'" target="_blank">'+(c&&0<c.length?c:f.gutenHref)+"</a>"},form:{fields:[{name:"gutenHref",label:"Url",elementType:"input",type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-url",
validate:function(c,b){return!b||!b.gutenHref||0>b.gutenHref.indexOf("://")?!1:!0}}}]},after:function(b){h.clearForm(b.target)}});b.addComponent(c);return c}});hilary.register("gutentyp::components::lists",{init:function(b,c){var h,k;h=b.makeComponent({title:"Unordered List",cssClass:"gutentyp-list-unordered",pipelineName:"list::unordered",icon:c.icons.unorderedList,textClass:"sr-only",func:function(b,c){document.execCommand("insertUnorderedList",!1,null);return!1}});k=b.makeComponent({title:"Ordered List",cssClass:"gutentyp-list-ordered",pipelineName:"list::ordered",icon:c.icons.orderedList,textClass:"sr-only",func:function(b,c){document.execCommand("insertOrderedList",
!1,null);return!1}});b.addComponent([h,k])}});hilary.register("gutentyp::components::embed",{init:function(b,c,h){c=b.makeComponent({title:"Embed Video",cssClass:"gutentyp-embed",pipelineName:"embed",icon:c.icons.embed,textClass:"sr-only",func:function(b,c,f){if(!f)throw"No form data is present, so we can't write a video element.";return f.gutenEmbedCode},form:{fields:[{name:"gutenEmbedCode",label:"Markup",elementType:"textarea",cssClass:"guten-embed",attributes:[{key:"rows",value:"3"}],validation:{message:"The markup is required",cssClass:"link-embed",
validate:function(b,c){return c&&c.gutenEmbedCode?!0:!1}}}]},after:function(b){h.clearForm(b.target)}});b.addComponent(c);return c}});hilary.use([hilary,jQuery,window,nicephore],function(b,c,h,k,e){k.gutentyp=function(){var b={},k,l,n,p,s,q,t,u,a,d=!1,r;l=c.createChildContainer();a=function(a){(a=l.tryResolve(a))&&a.init(q,n,p)};k=function(){n=l.resolve("gutentyp::config").init();b.config=n;p=l.resolve("gutentyp::dom").init(h,n);s=l.resolve("gutentyp::pipeline").init(n,p);b.pipeline=s.registerPipelineEvent;q=l.resolve("gutentyp::components").init(n,p,s)};k();b.registerComponents=function(c){var e;void 0===c.autoRegisterComponents&&
(c.autoRegisterComponents=!0);c.autoRegisterComponents&&(a("gutentyp::components::emphasis"),a("gutentyp::components::colors"),a("gutentyp::components::headings"),a("gutentyp::components::justification"),a("gutentyp::components::lists"),a("gutentyp::components::blocks"),a("gutentyp::components::link"),a("gutentyp::components::image"),a("gutentyp::components::embed"));if(c.components)for(e=0;e<c.components.length;e++)b.registerComponent(c.components[e]);d=!0};r=function(a){a=a||{};void 0===a.observeKeyEvents&&
(a.observeKeyEvents=!1);return a};b.init=function(a){var c;a=r(a);d||(b.registerComponents(a),a.observeKeyEvents&&e&&(c=l.tryResolve("gutentyp::keyEvents"))&&c.init(n,p,e,h));t=l.resolve("gutentyp::toolbar").init(n,p,q);u=l.resolve("gutentyp::transformer").init(n,p,q,t,a);u.transform();s.registerPipelineEvent.registerAfterAnyHandler(function(a,b,c){p.triggerEvent(a,"blur");p.triggerEvent(a,"change")});return b};b.registerComponent=function(c){"string"===typeof c?a(c):(c=q.makeComponent(c),q.addComponent(c));
return b};b.overrideModule=function(a,c){l.register(a,c);k();return b};b.overrideConfig=function(a){a=b.overrideModule("gutentyp::config",a);n.autoCreateSelectors();return a};b.overridedom=function(a){return b.overrideModule("gutentyp::dom",a)};b.overridePipeline=function(a){return b.overrideModule("gutentyp::pipeline",a)};b.overrideComponents=function(a){return b.overrideModule("gutentyp::components",a)};b.overrideToolbar=function(a){l.register("gutentyp::toolbar",a);return b};b.overrideCore=function(a){l.register("gutentyp::core",
a);return b};b.ifYouReallyKnowWhatYoureDoing={IoC:l,prep:k};return b}});