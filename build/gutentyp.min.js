hilary.register("gutentyp::config",{init:function(){var a={prefixes:{pipeline:{beforeComponent:"gutentyp::before::",afterComponent:"gutentyp::after::"}},attributes:{formBtn:{key:"data-form-btn",value:"true"}},colors:[]};a.colors.push({title:"Black",name:"black",value:"#000000"});a.colors.push({title:"Grey",name:"grey",value:"#62615f"});a.colors.push({title:"Light Grey",name:"lightGrey",value:"#dcddd7"});a.colors.push({title:"Pink",name:"pink",value:"#cd52bd"});a.colors.push({title:"Red",name:"red",
value:"#9a0000"});a.colors.push({title:"Yellow",name:"yellow",value:"#f0ac28"});a.colors.push({title:"Green",name:"green",value:"#6bb343"});a.colors.push({title:"Blue",name:"blue",value:"#3c8bc8"});a.colors.push({title:"Purple",name:"purple",value:"#a952cd"});a.icons={code:"fa fa-code",pre:"fa fa-file-code-o",blockquote:"fa fa-quote-left",bold:"fa fa-bold",italic:"fa fa-italic",underline:"fa fa-underline",strikethrough:"fa fa-strikethrough",header:"fa fa-header",image:"fa fa-image",alignLeft:"fa fa-align-left",
alignCenter:"fa fa-align-center",alignRight:"fa fa-align-right",alignJustify:"fa fa-align-justify",indent:"fa fa-indent",outdent:"fa fa-outdent",link:"fa fa-link",unorderedList:"fa fa-list-ul",orderedList:"fa fa-list-ol",embed:"fa fa-play-circle-o"};a.cssClasses={toGutentypify:"gutentyp-ify",gutentypified:"gutentyp-ified",hasEvents:"has-events",hasToolbar:"has-toolbar",hasComponents:"has-components",editor:"gutentyp-editor",textarea:"gutentyp-textarea",toolbar:"gutentyp-toolbar",toolbarBtn:"gutentyp-toolbar-btn",
toolbarBtnText:"gutentyp-toolbar-btn-text",toolbarBtnIcon:"gutentyp-toolbar-btn-icon",toolbarGroup:"gutentyp-toolbar-group",toolbarArrowOver:"gutentyp-toolbar-arrow-over",hidden:"gutentyp-hidden",form:"gutentyp-form"};a.autoCreateSelectors=function(){var b;a.selectors={};for(b in a.cssClasses)a.cssClasses.hasOwnProperty(b)&&(a.selectors[b]="."+a.cssClasses[b]);a.selectors.newEditors=a.selectors.editor+":not("+a.selectors.hasToolbar+")";a.selectors.eventlessEditors=a.selectors.editor+":not("+a.selectors.hasEvents+
")";a.selectors.newToolbars=a.selectors.toolbar+":not("+a.selectors.hasComponents+")"};a.autoCreateSelectors();return a}});hilary.register("gutentyp::dom",{init:function(a,b){var k,l,d,h,q,g,r,p,t,s,m;k=function(c,f,e,b,d){c=a("<"+(c||"div")+" />");f&&null!==f&&""!==f&&c.addClass("."===f[0]?f.substr(1):f);if("undefined"!==typeof e)for(f=0;f<e.length;f++)c.attr(e[f].key,e[f].value);"undefined"!==typeof b&&c.html(b);return d?c.prop("outerHTML"):c};l=function(c,f){return a(c).append(f)};d=function(c,f){return a(c).addClass(f)};h=function(c,f){return a(c).closest(f)};q=function(c,f){return a(c).siblings(f)};g=function(c,
a,e){var b,d,h,g;if(!c)return!1;c.isClone&&window.getSelection&&(r(c),c=window.getSelection());if(window.getSelection){if(c.getRangeAt&&c.rangeCount){b=c.getRangeAt(0);b.deleteContents();d=document.createElement("div");d.innerHTML=a;for(a=document.createDocumentFragment();h=d.firstChild;)g=a.appendChild(h);d=a.firstChild;b.insertNode(a);g&&(b=b.cloneRange(),b.setStartAfter(g),e?b.setStartBefore(d):b.collapse(!0),c.removeAllRanges(),c.addRange(b))}}else"Control"!==c.type&&(g=c.createRange(),g.collapse(!0),
c.createRange().pasteHTML(a),e&&(b=c.createRange(),b.setEndPoint("StartToStart",g),b.select()))};r=function(c){try{var a,e=document.createRange();e.setStart(c.baseNode||c.anchorNode,c.baseOffset||c.anchorOffset);e.setEnd(c.extentNode||c.focusNode,c.extentOffset||c.focusOffset);a=window.getSelection();a.removeAllRanges();a.addRange(e)}catch(b){console.log(b)}};p=function(c){var a;c&&c.anchorNode&&(a=c.anchorNode);!a&&window.getSelection&&(c=window.getSelection(),a=c.anchorNode);!a&&document.selection&&
(c=document.selection,c=c.getRangeAt?c.getRangeAt(0):c.createRange(),a=c.commonAncestorContainer?c.commonAncestorContainer:c.parentElement?c.parentElement():c.item(0));if(a)return"#text"===a.nodeName?a.parentNode:a};t=function(c){var a="",e;for(e=0;e<(c||5);e++)a+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()));return a};s=function(c,b,e){c=a(c);e=c.position();e.width=c.width();e.height=c.height();b&&(e.moveLeft=e.left+e.width/2-s(b).width/2,e.moveTop=e.top+e.height+6,e.moveRight=
e.right+e.width/2-s(b).width/2,e.moveBottom=e.bottom+e.height+6);return e};m=function(c,f){var e;e=a(c).is("form")?a(c):f&&a(c).hasClass(b.cssClasses.form)?a(c).find(":input"):f?a(c).closest(b.selectors.form).find(":input"):a(c).closest(b.selectors.form);if(!e||1>e.length)e=a(c).find(b.selectors.form);return e};return{makeElement:k,initializeRichTextAreas:function(){var c=[];a(b.selectors.toGutentypify).each(function(f,e){var n=a(this);n.attr("id")||n.attr("id","gutentyp-"+t());a("<div />").addClass(b.cssClasses.editor).attr("data-for",
n.attr("id")).html(n.val()).attr("contenteditable",!0).insertBefore(n);n.removeClass(b.cssClasses.toGutentypify);n.addClass(b.cssClasses.hidden);n.addClass(b.cssClasses.gutentypified);c.push(n.attr("id"))});return c},insertNewElementBefore:function(c,b,e,n){b&&""!==b&&k(c,e,n).insertBefore(a(b))},insertNewElementInto:function(c,b,e,n){b&&""!==b&&("string"!==typeof c&&c.markup?a(c.markup).appendTo(a(b)):k(c,e,n).appendTo(a(b)))},insertHtmlAfter:function(c,b){return a(c).after(b)},setText:function(c,
b){return a(c).text(b)},insertHtml:l,addClass:d,removeClass:function(c,b){return a(c).removeClass(b)},toggleClass:function(c,b){return a(c).toggleClass(b)},getAttribute:function(c,b){return a(c).attr(b)},getOrSetValue:function(c,b){return b?(a(c).val(b),b):a(c).val()},clearForm:function(a){a=m(a);a.val("");a.is("textarea")&&a.html("");a.find(":input").val("");a.find("textarea").html("");return a.find(".alert").addClass(b.cssClasses.hidden)},getClosest:h,getClosestAdjacent:q,getNext:function(b,f){return a(b).next(f)},
getPrevious:function(b,f){return a(b).prev(f)},attachEvent:function(c){if(!c||!1===a.isFunction(c.eventHandler))return!1;var f=a(c.primarySelector);if(c.secondarySelector)f.on(c.eventType,c.secondarySelector,function(a){c.eventHandler(a.originalEvent)});else f.on(c.eventType,function(a){c.eventHandler(a.originalEvent)});return d(f,b.cssClasses.hasEvents)},updateTextarea:function(b){return a("textarea#"+a(b).attr("data-for")).html(a(b).html())},isFunction:function(b){return a.isFunction(b)},isObject:function(b){return a.isPlainObject(b)},
isArray:function(b){return a.isArray(b)},hasAncestor:function(b,f){return 0!==a(b).parents(f).length||"string"===typeof f&&a(b).hasClass(f)||"string"===typeof f&&a(b).hasClass(f.substring(1))?!0:!1},getSelectedText:function(){var a,b,e,n;if("undefined"!==typeof window.getSelection){if(a=window.getSelection(),a.rangeCount){b=document.createElement("div");e=0;for(n=a.rangeCount;e<n;++e)b.appendChild(a.getRangeAt(e).cloneContents());return b.innerHTML}}else if("undefined"!==typeof document.selection&&
"Text"===document.selection.type)return document.selection.createRange().htmlText},replaceSelectedText:function(a){var b,e,n;if(window.getSelection&&window.getSelection().getRangeAt){b=window.getSelection().getRangeAt(0);b.deleteContents();e=document.createElement("div");e.innerHTML=a;for(a=document.createDocumentFragment();n=e.firstChild;)a.appendChild(n);b.insertNode(a)}else document.selection&&document.selection.createRange&&(b=document.selection.createRange(),b.pasteHTML(a))},pasteHtmlAtCursor:function(c,
f,e){window.getSelection?f=window.getSelection():(f=document.selection,"Control"===f.type&&(f=void 0));e&&0===a(p()).closest(b.selectors.editor).length&&(e=q(h(e.target,b.selectors.toolbar),b.selectors.editor).first(),l(e,c));g(f)},pasteHtml:g,selectRange:r,selectionIsInEditor:function(c){return 0<a(p(c)).closest(b.selectors.editor).length},getCursorCoordinates:function(){var b=window.getSelection();return b.getRangeAt&&b.rangeCount?a.extend({isClone:!0},b):!1},getRandomString:t,getCoordinates:s,
setStyle:function(b,f){return a(b).attr("style",f)},formToJson:function(b){b=m(b,!0);var f={},e;if(0!==b.length)return e=b.serializeArray(),a.each(e,function(){void 0!==f[this.name]?(f[this.name].push||(f[this.name]=[f[this.name]]),f[this.name].push(this.value||"")):f[this.name]=this.value||""}),b.find(':input[disabled="disabled"]').each(function(b){b=a(this);var e=b.attr("name");e&&(f[e]=b.val())}),f}}}});hilary.register("gutentyp::pipeline",{init:function(a,b){var k=[],l=[],d={},h,q={beforeAny:k,afterAny:l,registerPipelineEvent:d};d.registerBeforeAnyHandler=function(a){if(!b.isFunction(a))throw Error("Only functions can be registered as beforeAny events.");k.push(a)};d.registerAfterAnyHandler=function(a){if(!b.isFunction(a))throw Error("Only functions can be registered as afterAny events.");l.push(a)};d.registerBeforeComponentHandler=function(b,d){h(a.prefixes.pipeline.beforeComponent+b,d)};d.registerAfterComponentHandler=
function(b,d){h(a.prefixes.pipeline.afterComponent+b,d)};h=function(a,d){if(!b.isFunction(d))throw Error("Only functions can be registered as pipeline events.");q[a]=d};return q}});hilary.register("gutentyp::components",{init:function(a,b,k){var l=[],d,h,q,g,r,p,t,s,m,c={},f;m=function(b){if(b instanceof Array)for(var a in b)b.hasOwnProperty(a)&&m(b[a]);else l.push(b)};p=function(e){b.attachEvent({primarySelector:document,secondarySelector:"."+e.cssClass,eventType:"click",eventHandler:function(e){var c=b.getClosest(e.target,"button"),c=b.getNext(c,a.selectors.toolbarGroup);e=b.getCoordinates(e.target,c);var d;d="left: "+e.moveLeft+"px";d+="; top: "+e.moveTop+"px";b.setStyle(c,
d);b.toggleClass(c,"active")}})};t=function(e,c){b.attachEvent({primarySelector:document,secondarySelector:"."+e.cssClass+"-form .btn-success",eventType:"click",eventHandler:function(d){var f=b.formToJson(d.target),h;if(b.isFunction(c)&&!c(d,f))return!1;h=b.getClosest(d.target,a.selectors.toolbarGroup);b.toggleClass(h,"active");d.fromGutenForm=!0;e.execute(d,f)}})};s=function(e){b.attachEvent({primarySelector:document,secondarySelector:"."+e.cssClass+"-form .btn-cancel",eventType:"click",eventHandler:function(e){var c=
b.getClosest(e.target,a.selectors.toolbarGroup);e=b.getClosestAdjacent(e.target,".alert");b.toggleClass(c,"active");b.clearForm(c);b.addClass(e,a.cssClasses.hidden)}})};d=function(a,c){var d=c.fields,f=0,l="",k={names:[]},m={},p={};for(f;f<d.length;f++)p["a"+f]=b.getRandomString(),l+=h(d[f],p["a"+f]),q(k,d[f],p["a"+f]);0<k.names.length&&(m.validate=g(k));return r(a,l,m)};h=function(e,c){var d="",f;if(!e||!e.elementType||!e.name)return"";e.validation&&e.validation.message&&(f="alert alert-warning "+
a.cssClasses.hidden+" "+c,e.validation.cssClass&&(f+=" "+e.validation.cssClass),d+=b.makeElement("div",f,void 0,e.validation.message,!0));e.label&&(d+=b.makeElement("label",void 0,void 0,e.label,!0));f=b.isArray(e.attributes)?e.attributes:[];f.push({key:"name",value:e.name});"input"===e.elementType&&f.push({key:"type",value:e.inputType||"text"});d+=b.makeElement(e.elementType,e.cssClass||void 0,f,void 0,!0);return d+"<br />"};q=function(a,c,d){c.name&&c.validation&&b.isFunction(c.validation.validate)&&
(a.names.push(c.name),a[c.name]=c.validation,a[c.name].messageId=d)};g=function(c){return function(d,f){var h,g,l=!0;for(h=0;h<c.names.length;h++)(g=c[c.names[h]])&&b.isFunction(g.validate)&&g.messageId&&!g.validate(d,f)&&(l=!1,g=b.getClosestAdjacent(d.target,"."+g.cssClass),g.removeClass(a.cssClasses.hidden));return l}};r=function(b,d,f){c[b.pipelineName]||(p(b),t(b,f&&f.validate),s(b),c[b.pipelineName]=!0);return'<button type="button" class="'+b.cssClass+'" data-form-btn="true"><i class="'+a.cssClasses.toolbarBtnIcon+
" "+b.icon+'"></i><span class="'+a.cssClasses.toolbarBtnText+' sr-only">'+b.title+'</span></button><div class="'+a.cssClasses.toolbarGroup+" "+a.cssClasses.toolbarArrowOver+" "+b.cssClass+'-form"><div class="'+a.cssClasses.form+'">'+d+'<button class="btn btn-success btn-sm" type="button">Add</button><button class="btn btn-cancel btn-sm" type="button">Cancel</button></div></div>'};return{components:l,makeComponent:function(c){var h={};h.title=c.title;h.cssClass=c.cssClass||c.pipelineName;h.pipelineName=
c.pipelineName;h.icon=c.icon||void 0;h.textClass=c.textClass+" "+a.cssClasses.toolbarBtnText||a.cssClasses.toolbarBtnText;h.displayHandler=c.displayHandler;h.group=c.group||void 0;h.execute=function(d,h){var g,l=a.prefixes.pipeline.beforeComponent+c.pipelineName,n=a.prefixes.pipeline.afterComponent+c.pipelineName,m=b.getSelectedText();if(b.getAttribute(b.getClosest(d.target,"button"),a.attributes.formBtn.key))f=b.getCursorCoordinates(),f.text=m,f.isInEditor=b.selectionIsInEditor(f),d.gutenSelection=
f;else{for(g=0;g<k.beforeAny.length;g++)if(b.isFunction(k.beforeAny[g]))k.beforeAny[g](d,m,h);if(b.isFunction(k[l]))k[l](d,m,h);b.isFunction(c.func)&&(g=c.func(d,m||f.text,h),m&&0<m.length&&g?b.replaceSelectedText(g):f&&f.isInEditor?b.pasteHtml(f,g):g&&b.pasteHtmlAtCursor(g,!1,d));for(g=0;g<k.afterAny.length;g++)if(b.isFunction(k.afterAny[g]))k.afterAny[g](d,m,h);if(b.isFunction(k[n]))k[n](d,m,h)}};c.before&&k.registerPipelineEvent.registerBeforeComponentHandler(c.pipelineName,c.before);c.after&&
k.registerPipelineEvent.registerAfterComponentHandler(c.pipelineName,c.after);c.form&&!h.displayHandler&&(h.displayHandler=function(){return d(h,c.form)});f=void 0;return h},makeComponentForm:r,addComponent:m}}});hilary.register("gutentyp::toolbar",{init:function(a,b,k){return{build:function(){var l=k.components,d,h,q,g={},r,p,t,s;h=function(b){return a.selectors.toolbar+" ."+b.cssClass+":not("+a.selectors.hasEvents+")"};q=function(b,c){var d;d="gutentyp-component "+b.cssClass;c&&(d+=" "+c);return'<button type="button" class="'+d+'"><i class="'+a.cssClasses.toolbarBtnIcon+" "+b.icon+'"></i><span class="'+b.textClass+'">'+b.title+"</span></button>"};s=function(d){b.insertNewElementInto({markup:q(d)},a.selectors.newToolbars);
b.attachEvent({primarySelector:h(d),eventType:"click",eventHandler:d.execute})};r=function(d){b.insertHtml(a.selectors.newToolbars,d.displayHandler());b.attachEvent({primarySelector:h(d),eventType:"click",eventHandler:d.execute})};t=function(d){var c=g[d.group.name]={components:[d]};c.toggleId=b.getRandomString();c.menuId=b.getRandomString();c.toggleSelector="."+c.toggleId;c.menuSelector="."+c.menuId;b.insertNewElementInto({markup:q(d.group,c.toggleId)},a.selectors.newToolbars);b.insertNewElementInto({markup:'<div class="'+
c.menuId+" gutentyp-toolbar-group gutentyp-toolbar-arrow-"+(d.group.arrow||"over")+'"><ul></ul></div>'},a.selectors.newToolbars);b.attachEvent({primarySelector:c.toggleSelector,eventType:"click",eventHandler:function(a){a=b.getCoordinates(a.target,c.menuSelector);var d;d="left: "+a.moveLeft+"px";d+="; top: "+a.moveTop+"px";b.setStyle(c.menuSelector,d);b.toggleClass(".gutentyp-toolbar-group.active:not("+c.menuSelector+")","active");b.toggleClass(c.menuSelector,"active")}});return c};p=function(a){var c=
b.getRandomString(),d="."+c,e;g[a.group.name]?(e=g[a.group.name],g[a.group.name].components.push(a)):e=t(a);a.displayHandler?b.insertNewElementInto({markup:"<li>"+a.displayHandler(c)+"</li>"},e.menuSelector+" ul"):b.insertNewElementInto({markup:"<li>"+q(a,c)+"</li>"},e.menuSelector+" ul");b.attachEvent({primarySelector:d,eventType:"click",eventHandler:function(c,d){a.execute(c,d);b.toggleClass(e.menuSelector,"active")}})};b.insertNewElementBefore("div",a.selectors.newEditors,a.selectors.toolbar);
for(d=0;d<l.length;d++)void 0!==l[d].group?p(l[d]):b.isFunction(l[d].displayHandler)?r(l[d]):s(l[d]);b.addClass(a.selectors.newEditors,a.cssClasses.hasToolbar);b.addClass(a.selectors.newToolbars,a.cssClasses.hasComponents)}}}});hilary.register("gutentyp::core",{init:function(a,b,k,l){return{load:function(){b.initializeRichTextAreas();l.build();b.attachEvent({primarySelector:a.selectors.eventlessEditors,eventType:"blur",eventHandler:function(a){b.updateTextarea(a.target)}});b.addClass(a.selectors.editor,a.cssClasses.hasEvents)}}}});hilary.register("gutentyp::components::blocks",{init:function(a,b){var k,l;k=a.makeComponent({title:"Code",cssClass:"gutentyp-code",pipelineName:"code",icon:b.icons.code,textClass:"sr-only",func:function(b,a){return"<code>"+a+"</code>"}});l=a.makeComponent({title:"Quote",cssClass:"gutentyp-quote",pipelineName:"quote",icon:b.icons.blockquote,textClass:"sr-only",func:function(b,a){return"<blockquote>"+a+"</blockquote>"}});a.addComponent([k,l])}});hilary.register("gutentyp::components::colors",{init:function(a,b){var k,l=b.colors,d=0,h;h=a.makeComponent({title:"Colors",cssClass:"gutentyp-colors",pipelineName:"colors",icon:"color-block color-label",textClass:"sr-only"});h.name="colors";h.arrow="over";k=function(b){a.addComponent(a.makeComponent({title:b.title,cssClass:"gutentyp-"+b.name,pipelineName:"color"+b.Title,func:function(a,d){document.execCommand("forecolor",!1,b.value);return!1},displayHandler:function(a){return'<button type="button" class="'+
a+'"><span class="color-block" style="background-color: '+b.value+'"></span></button>'},group:h}))};for(d;d<l.length;d++)k(l[d])}});hilary.register("gutentyp::components::emphasis",{init:function(a,b){var k,l,d,h;k=a.makeComponent({title:"Bold",cssClass:"gutentyp-bold",pipelineName:"bold",icon:b.icons.bold,textClass:"sr-only",func:function(b,a){document.execCommand("bold",!1,null);return!1}});l=a.makeComponent({title:"Italic",cssClass:"gutentyp-italic",pipelineName:"italic",icon:b.icons.italic,textClass:"sr-only",func:function(b,a){document.execCommand("italic",!1,null);return!1}});d=a.makeComponent({title:"Underline",cssClass:"gutentyp-underline",
pipelineName:"underline",icon:b.icons.underline,textClass:"sr-only",func:function(b,a){document.execCommand("underline",!1,null);return!1}});h=a.makeComponent({title:"Strike Through",cssClass:"gutentyp-strike",pipelineName:"strike",icon:b.icons.strikethrough,textClass:"sr-only",func:function(b,a){document.execCommand("strikeThrough",!1,null);return!1}});a.addComponent([k,l,d,h])}});hilary.register("gutentyp::components::headings",{init:function(a,b){var k,l,d,h,q,g;g=a.makeComponent({title:"Headings",cssClass:"gutentyp-headings",pipelineName:"headings",icon:b.icons.header,textClass:"sr-only"});g.name="headings";g.arrow="over";k=a.makeComponent({title:"h1",cssClass:"gutentyp-h1",pipelineName:"h1",func:function(b,a){return"<h1>"+a+"</h1>"},group:g});l=a.makeComponent({title:"h2",cssClass:"gutentyp-h2",pipelineName:"h2",func:function(b,a){return"<h2>"+a+"</h2>"},group:g});d=a.makeComponent({title:"h3",
cssClass:"gutentyp-h3",pipelineName:"h3",func:function(b,a){return"<h3>"+a+"</h3>"},group:g});h=a.makeComponent({title:"h4",cssClass:"gutentyp-h4",pipelineName:"h4",func:function(b,a){return"<h4>"+a+"</h4>"},group:g});q=a.makeComponent({title:"h5",cssClass:"gutentyp-h5",pipelineName:"h5",func:function(b,a){return"<h5>"+a+"</h5>"},group:g});g=a.makeComponent({title:"h6",cssClass:"gutentyp-h6",pipelineName:"h6",func:function(a,b){return"<h6>"+b+"</h6>"},group:g});a.addComponent([k,l,d,h,q,g])}});hilary.register("gutentyp::components::image",{init:function(a,b,k){b=a.makeComponent({title:"Add Image",cssClass:"gutentyp-image",pipelineName:"image",icon:b.icons.image,textClass:"sr-only",func:function(b,a,h){if(!h)throw"No form data is present, so we can't write an image element.";b=h.gutenWidth;a=h.gutenHeight;return'<img src="'+h.gutenSrc+'" alt="'+(h.gutenAlt||h.gutenSrc)+'" '+(b?'width="'+b+'"':"")+(a?'height="'+a+'"':"")+"/>"},form:{fields:[{name:"gutenSrc",label:"Url",elementType:"input",
type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-src",validate:function(b,a){return!a||!a.gutenSrc||0>a.gutenSrc.indexOf("://")?!1:!0}}},{name:"gutenAlt",label:"Description",elementType:"input",type:"text",validation:{message:"Please enter a description. It's used by screen readers for accessibility.",cssClass:"link-alt",validate:function(a,b){return b&&b.gutenAlt?!0:!1}}},{name:"gutenWidth",label:"Width",elementType:"input",type:"text",validation:{message:"Width is not required, but it has to be a number",
cssClass:"link-width",validate:function(a,b){return b&&b.gutenWidth&&isNaN(b.gutenWidth)?!1:!0}}},{name:"gutenHeight",label:"Height",elementType:"input",type:"text",validation:{message:"Height is not required, but it has to be a number",cssClass:"link-height",validate:function(b,a){return a&&a.gutenHeight&&isNaN(a.gutenHeight)?!1:!0}}}]},after:function(a){k.clearForm(a.target)}});a.addComponent(b);return b}});hilary.register("gutentyp::components::justification",{init:function(a,b){var k,l,d,h,q,g;g=a.makeComponent({title:"Alignment",cssClass:"gutentyp-align",pipelineName:"alignment",icon:b.icons.alignLeft,textClass:"sr-only"});g.name="alignment";g.arrow="over";k=a.makeComponent({title:"Align Left",cssClass:"gutentyp-align-left",pipelineName:"alignLeft",icon:b.icons.alignLeft,textClass:"sr-only",func:function(a,b){document.execCommand("justifyLeft",!1,null);return!1},group:g});l=a.makeComponent({title:"Align Center",
cssClass:"gutentyp-align-center",pipelineName:"alignCenter",icon:b.icons.alignCenter,textClass:"sr-only",func:function(a,b){document.execCommand("justifyCenter",!1,null);return!1},group:g});d=a.makeComponent({title:"Align Right",cssClass:"gutentyp-align-right",pipelineName:"alignRight",icon:b.icons.alignRight,textClass:"sr-only",func:function(a,b){document.execCommand("justifyRight",!1,null);return!1},group:g});h=a.makeComponent({title:"Justify",cssClass:"gutentyp-align-justify",pipelineName:"alignJustify",
icon:b.icons.alignJustify,textClass:"sr-only",func:function(a,b){document.execCommand("justifyFull",!1,null);return!1},group:g});q=a.makeComponent({title:"Indent",cssClass:"gutentyp-indent",pipelineName:"indent",icon:b.icons.indent,textClass:"sr-only",func:function(a,b){document.execCommand("indent",!1,null);return!1},group:g});g=a.makeComponent({title:"Outdent",cssClass:"gutentyp-outdent",pipelineName:"outdent",icon:b.icons.outdent,textClass:"sr-only",func:function(a,b){document.execCommand("outdent",
!1,null);return!1},group:g});a.addComponent([k,l,d,h,q,g])}});hilary.register("gutentyp::components::link",{init:function(a,b,k){b=a.makeComponent({title:"Add Link",cssClass:"gutentyp-link",pipelineName:"link",icon:b.icons.link,textClass:"sr-only",func:function(a,b,h){if(!h)throw"No form data is present, so we can't write an anchor element.";return'<a href="'+h.gutenHref+'" target="_blank">'+(b&&0<b.length?b:h.gutenHref)+"</a>"},form:{fields:[{name:"gutenHref",label:"Url",elementType:"input",type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-url",
validate:function(b,a){return!a||!a.gutenHref||0>a.gutenHref.indexOf("://")?!1:!0}}}]},after:function(a){k.clearForm(a.target)}});a.addComponent(b);return b}});hilary.register("gutentyp::components::lists",{init:function(a,b){var k,l;k=a.makeComponent({title:"Unordered List",cssClass:"gutentyp-list-unordered",pipelineName:"list::unordered",icon:b.icons.unorderedList,textClass:"sr-only",func:function(a,b){document.execCommand("insertUnorderedList",!1,null);return!1}});l=a.makeComponent({title:"Ordered List",cssClass:"gutentyp-list-ordered",pipelineName:"list::ordered",icon:b.icons.orderedList,textClass:"sr-only",func:function(a,b){document.execCommand("insertOrderedList",
!1,null);return!1}});a.addComponent([k,l])}});hilary.register("gutentyp::components::embed",{init:function(a,b,k){b=a.makeComponent({title:"Embed Video",cssClass:"gutentyp-embed",pipelineName:"embed",icon:b.icons.embed,textClass:"sr-only",func:function(a,b,h){if(!h)throw"No form data is present, so we can't write a video element.";return h.gutenEmbedCode},form:{fields:[{name:"gutenEmbedCode",label:"Markup",elementType:"textarea",cssClass:"guten-embed",attributes:[{key:"rows",value:"3"}],validation:{message:"The markup is required",cssClass:"link-embed",
validate:function(a,b){return b&&b.gutenEmbedCode?!0:!1}}}]},after:function(a){k.clearForm(a.target)}});a.addComponent(b);return b}});hilary.use([hilary,jQuery,window,nicephore],function(a,b,k,l,d){l.gutentyp=function(){var a={},l,g,r,p,t,s,m,c,f,e=!1;g=b.createChildContainer();f=function(a){(a=g.tryResolve(a))&&a.init(s,r,p)};l=function(){r=g.resolve("gutentyp::config").init();a.config=r;p=g.resolve("gutentyp::dom").init(k,r);t=g.resolve("gutentyp::pipeline").init(r,p);a.pipeline=t.registerPipelineEvent;s=g.resolve("gutentyp::components").init(r,p,t)};l();a.registerComponents=function(b){var c;b=b||{};void 0===b.autoRegisterComponents&&
(b.autoRegisterComponents=!0);b.autoRegisterComponents&&(f("gutentyp::components::emphasis"),f("gutentyp::components::colors"),f("gutentyp::components::headings"),f("gutentyp::components::justification"),f("gutentyp::components::lists"),f("gutentyp::components::blocks"),f("gutentyp::components::link"),f("gutentyp::components::image"),f("gutentyp::components::embed"));if(b.components)for(c=0;c<b.components.length;c++)a.registerComponent(b.components[c]);e=!0};a.init=function(b){e||(a.registerComponents(b),
d&&(b=g.tryResolve("gutentyp::keyEvents"))&&b.init(r,p,d));m=g.resolve("gutentyp::toolbar").init(r,p,s);c=g.resolve("gutentyp::core").init(r,p,s,m);c.load();return a};a.registerComponent=function(b){"string"===typeof b?f(b):(b=s.makeComponent(b),s.addComponent(b));return a};a.overrideModule=function(b,c){g.register(b,c);l();return a};a.overrideConfig=function(b){return a.overrideModule("gutentyp::config",b)};a.overridedom=function(b){return a.overrideModule("gutentyp::dom",b)};a.overridePipeline=
function(b){return a.overrideModule("gutentyp::pipeline",b)};a.overrideComponents=function(b){return a.overrideModule("gutentyp::components",b)};a.overrideToolbar=function(b){g.register("gutentyp::toolbar",b);return a};a.overrideCore=function(b){g.register("gutentyp::core",b);return a};a.ifYouReallyKnowWhatYoureDoing={IoC:g,prep:l};return a}});