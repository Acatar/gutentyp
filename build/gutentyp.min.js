hilary.register("gutentyp::config",{init:function(){var b={prefixes:{pipeline:{beforeComponent:"gutentyp::before::",afterComponent:"gutentyp::after::"}},attributes:{formBtn:{key:"data-form-btn",value:"true"}},colors:[]};b.colors.push({title:"Black",name:"black",value:"#000000"});b.colors.push({title:"Grey",name:"grey",value:"#62615f"});b.colors.push({title:"Light Grey",name:"lightGrey",value:"#dcddd7"});b.colors.push({title:"Pink",name:"pink",value:"#cd52bd"});b.colors.push({title:"Red",name:"red",
value:"#9a0000"});b.colors.push({title:"Yellow",name:"yellow",value:"#f0ac28"});b.colors.push({title:"Green",name:"green",value:"#6bb343"});b.colors.push({title:"Blue",name:"blue",value:"#3c8bc8"});b.colors.push({title:"Purple",name:"purple",value:"#a952cd"});b.icons={code:"fa fa-code",pre:"fa fa-file-code-o",blockquote:"fa fa-quote-left",bold:"fa fa-bold",italic:"fa fa-italic",underline:"fa fa-underline",strikethrough:"fa fa-strikethrough",header:"fa fa-header",image:"fa fa-image",alignLeft:"fa fa-align-left",
alignCenter:"fa fa-align-center",alignRight:"fa fa-align-right",alignJustify:"fa fa-align-justify",indent:"fa fa-indent",outdent:"fa fa-outdent",link:"fa fa-link",unorderedList:"fa fa-list-ul",orderedList:"fa fa-list-ol",embed:"fa fa-play-circle-o"};b.cssClasses={toGutentypify:"gutentyp-ify",gutentypified:"gutentyp-ified",hasEvents:"has-events",hasToolbar:"has-toolbar",hasComponents:"has-components",editor:"gutentyp-editor",textarea:"gutentyp-textarea",toolbar:"gutentyp-toolbar",toolbarBtn:"gutentyp-toolbar-btn",
toolbarBtnText:"gutentyp-toolbar-btn-text",toolbarBtnIcon:"gutentyp-toolbar-btn-icon",hidden:"gutentyp-hidden",form:"gutentyp-form"};b.autoCreateSelectors=function(){var a;b.selectors={};for(a in b.cssClasses)b.cssClasses.hasOwnProperty(a)&&(b.selectors[a]="."+b.cssClasses[a]);b.selectors.newEditors=b.selectors.editor+":not("+b.selectors.hasToolbar+")";b.selectors.eventlessEditors=b.selectors.editor+":not("+b.selectors.hasEvents+")";b.selectors.newToolbars=b.selectors.toolbar+":not("+b.selectors.hasComponents+
")"};b.autoCreateSelectors();return b}});hilary.register("gutentyp::dom",{init:function(b,a){var k,l,d,e,p,f,q,r,t,s,m;k=function(c,g,h,a,d){c=b("<"+(c||"div")+" />");g&&null!==g&&""!==g&&c.addClass("."===g[0]?g.substr(1):g);if("undefined"!==typeof h)for(g=0;g<h.length;g++)c.attr(h[g].key,h[g].value);"undefined"!==typeof a&&c.html(a);return d?c.prop("outerHTML"):c};l=function(c,g){return b(c).append(g)};d=function(c,g){return b(c).addClass(g)};e=function(c,g){return b(c).closest(g)};p=function(c,g){return b(c).siblings(g)};f=function(c,
b,h){var a,d,e,f;if(!c)return!1;c.isClone&&window.getSelection&&(q(c),c=window.getSelection());if(window.getSelection){if(c.getRangeAt&&c.rangeCount){a=c.getRangeAt(0);a.deleteContents();d=document.createElement("div");d.innerHTML=b;for(b=document.createDocumentFragment();e=d.firstChild;)f=b.appendChild(e);d=b.firstChild;a.insertNode(b);f&&(a=a.cloneRange(),a.setStartAfter(f),h?a.setStartBefore(d):a.collapse(!0),c.removeAllRanges(),c.addRange(a))}}else"Control"!==c.type&&(f=c.createRange(),f.collapse(!0),
c.createRange().pasteHTML(b),h&&(a=c.createRange(),a.setEndPoint("StartToStart",f),a.select()))};q=function(c){try{var b,h=document.createRange();h.setStart(c.baseNode||c.anchorNode,c.baseOffset||c.anchorOffset);h.setEnd(c.extentNode||c.focusNode,c.extentOffset||c.focusOffset);b=window.getSelection();b.removeAllRanges();b.addRange(h)}catch(a){console.log(a)}};r=function(c){var b;c&&c.anchorNode&&(b=c.anchorNode);!b&&window.getSelection&&(c=window.getSelection(),b=c.anchorNode);!b&&document.selection&&
(c=document.selection,c=c.getRangeAt?c.getRangeAt(0):c.createRange(),b=c.commonAncestorContainer?c.commonAncestorContainer:c.parentElement?c.parentElement():c.item(0));if(b)return"#text"===b.nodeName?b.parentNode:b};t=function(c){var b="",h;for(h=0;h<(c||5);h++)b+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()));return b};s=function(c,a,h){c=b(c);h=c.position();h.width=c.width();h.height=c.height();a&&(h.moveLeft=h.left+h.width/2-s(a).width/2,h.moveTop=h.top+h.height+6,h.moveRight=
h.right+h.width/2-s(a).width/2,h.moveBottom=h.bottom+h.height+6);return h};m=function(c,g){var h;h=b(c).is("form")?b(c):g&&b(c).hasClass(a.cssClasses.form)?b(c).find(":input"):g?b(c).closest(a.selectors.form).find(":input"):b(c).closest(a.selectors.form);if(!h||1>h.length)h=b(c).find(a.selectors.form);return h};return{makeElement:k,initializeRichTextAreas:function(){var c=[];b(a.selectors.toGutentypify).each(function(g,h){var n=b(this);n.attr("id")||n.attr("id","gutentyp-"+t());b("<div />").addClass(a.cssClasses.editor).attr("data-for",
n.attr("id")).html(n.val()).attr("contenteditable",!0).insertBefore(n);n.removeClass(a.cssClasses.toGutentypify);n.addClass(a.cssClasses.hidden);n.addClass(a.cssClasses.gutentypified);c.push(n.attr("id"))});return c},insertNewElementBefore:function(c,a,h,n){a&&""!==a&&k(c,h,n).insertBefore(b(a))},insertNewElementInto:function(c,a,h,n){a&&""!==a&&("string"!==typeof c&&c.markup?b(c.markup).appendTo(b(a)):k(c,h,n).appendTo(b(a)))},insertHtmlAfter:function(c,a){return b(c).after(a)},setText:function(c,
a){return b(c).text(a)},insertHtml:l,addClass:d,removeClass:function(c,a){return b(c).removeClass(a)},toggleClass:function(c,a){return b(c).toggleClass(a)},getAttribute:function(c,a){return b(c).attr(a)},getOrSetValue:function(c,a){return a?(b(c).val(a),a):b(c).val()},clearForm:function(c){c=m(c);c.val("");c.is("textarea")&&c.html("");c.find(":input").val("");c.find("textarea").html("");return c.find(".alert").addClass("hidden")},getClosest:e,getClosestAdjacent:p,getNext:function(c,a){return b(c).next(a)},
getPrevious:function(c,a){return b(c).prev(a)},attachEvent:function(c){if(!c||!1===b.isFunction(c.eventHandler))return!1;var g=b(c.primarySelector);if(c.secondarySelector)g.on(c.eventType,c.secondarySelector,function(a){c.eventHandler(a.originalEvent)});else g.on(c.eventType,function(a){c.eventHandler(a.originalEvent)});return d(g,a.cssClasses.hasEvents)},updateTextarea:function(a){return b("textarea#"+b(a).attr("data-for")).html(b(a).html())},isFunction:function(a){return b.isFunction(a)},isObject:function(a){return b.isPlainObject(a)},
isArray:function(a){return b.isArray(a)},hasAncestor:function(a,g){return 0!==b(a).parents(g).length},getSelectedText:function(){var a,b,h,n;if("undefined"!==typeof window.getSelection){if(a=window.getSelection(),a.rangeCount){b=document.createElement("div");h=0;for(n=a.rangeCount;h<n;++h)b.appendChild(a.getRangeAt(h).cloneContents());return b.innerHTML}}else if("undefined"!==typeof document.selection&&"Text"===document.selection.type)return document.selection.createRange().htmlText},replaceSelectedText:function(a){var b,
h,n;if(window.getSelection&&window.getSelection().getRangeAt){b=window.getSelection().getRangeAt(0);b.deleteContents();h=document.createElement("div");h.innerHTML=a;for(a=document.createDocumentFragment();n=h.firstChild;)a.appendChild(n);b.insertNode(a)}else document.selection&&document.selection.createRange&&(b=document.selection.createRange(),b.pasteHTML(a))},pasteHtmlAtCursor:function(c,d,h){window.getSelection?d=window.getSelection():(d=document.selection,"Control"===d.type&&(d=void 0));h&&0===
b(r()).closest(a.selectors.editor).length&&(h=p(e(h.target,a.selectors.toolbar),a.selectors.editor).first(),l(h,c));f(d)},pasteHtml:f,selectRange:q,selectionIsInEditor:function(c){return 0<b(r(c)).closest(a.selectors.editor).length},getCursorCoordinates:function(){var a=window.getSelection();return a.getRangeAt&&a.rangeCount?b.extend({isClone:!0},a):!1},getRandomString:t,getCoordinates:s,setStyle:function(a,d){return b(a).attr("style",d)},formToJson:function(a){a=m(a,!0);var d={},h;if(0!==a.length)return h=
a.serializeArray(),b.each(h,function(){void 0!==d[this.name]?(d[this.name].push||(d[this.name]=[d[this.name]]),d[this.name].push(this.value||"")):d[this.name]=this.value||""}),a.find(':input[disabled="disabled"]').each(function(a){a=b(this);var c=a.attr("name");c&&(d[c]=a.val())}),d}}}});hilary.register("gutentyp::pipeline",{init:function(b,a){var k=[],l=[],d={},e,p={beforeAny:k,afterAny:l,registerPipelineEvent:d};d.registerBeforeAnyHandler=function(b){if(!a.isFunction(b))throw Error("Only functions can be registered as beforeAny events.");k.push(b)};d.registerAfterAnyHandler=function(b){if(!a.isFunction(b))throw Error("Only functions can be registered as afterAny events.");l.push(b)};d.registerBeforeComponentHandler=function(a,d){e(b.prefixes.pipeline.beforeComponent+a,d)};d.registerAfterComponentHandler=
function(a,d){e(b.prefixes.pipeline.afterComponent+a,d)};e=function(b,d){if(!a.isFunction(d))throw Error("Only functions can be registered as pipeline events.");p[b]=d};return p}});hilary.register("gutentyp::components",{init:function(b,a,k){var l=[],d,e,p,f,q,r,t,s,m,c={},g;m=function(a){if(a instanceof Array)for(var b in a)a.hasOwnProperty(b)&&m(a[b]);else l.push(a)};r=function(b){a.attachEvent({primarySelector:document,secondarySelector:"."+b.cssClass,eventType:"click",eventHandler:function(b){var c=a.getClosest(b.target,"button"),c=a.getNext(c,".gutentyp-toolbar-group");b=a.getCoordinates(b.target,c);var h;h="left: "+b.moveLeft+"px";h+="; top: "+b.moveTop+"px";a.setStyle(c,
h);a.toggleClass(c,"active")}})};t=function(b,c){a.attachEvent({primarySelector:document,secondarySelector:"."+b.cssClass+"-form .btn-success",eventType:"click",eventHandler:function(d){var e=a.formToJson(d.target),g;if(a.isFunction(c)&&!c(d,e))return!1;g=a.getClosest(d.target,".gutentyp-toolbar-group");a.toggleClass(g,"active");d.fromGutenForm=!0;b.execute(d,e)}})};s=function(b){a.attachEvent({primarySelector:document,secondarySelector:"."+b.cssClass+"-form .btn-cancel",eventType:"click",eventHandler:function(b){var c=
a.getClosest(b.target,".gutentyp-toolbar-group");b=a.getClosestAdjacent(b.target,".alert");a.toggleClass(c,"active");a.clearForm(c);a.addClass(b,"hidden")}})};d=function(b,c){var d=c.fields,g=0,l="",k={names:[]},m={};for(g;g<d.length;g++){var r=a.getRandomString(),l=l+e(d[g],r);p(k,d[g],r)}0<k.names.length&&(m.validate=f(k));return q(b,l,m)};e=function(b,c){var d="",e;if(!b||!b.elementType||!b.name)return"";b.validation&&b.validation.message&&(e="alert alert-warning hidden "+c,b.validation.cssClass&&
(e+=" "+b.validation.cssClass),d+=a.makeElement("div",e,void 0,b.validation.message,!0));b.label&&(d+=a.makeElement("label",void 0,void 0,b.label,!0));e=a.isArray(b.attributes)?b.attributes:[];e.push({key:"name",value:b.name});"input"===b.elementType&&e.push({key:"type",value:b.inputType||"text"});d+=a.makeElement(b.elementType,b.cssClass||void 0,e,void 0,!0);return d+"<br />"};p=function(b,c,d){c.name&&c.validation&&a.isFunction(c.validation.validate)&&(b.names.push(c.name),b[c.name]={messageId:d,
validate:c.validation.validate})};f=function(b){return function(c,d){var e,g,f=!0;for(e=0;e<b.names.length;e++)(g=b[b.names[e]])&&a.isFunction(g.validate)&&g.messageId&&!g.validate(c,d)&&(f=!1,g=a.getClosestAdjacent(c.target,"."+g.messageId),g.removeClass("hidden"));return f}};q=function(a,d,e){c[a.pipelineName]||(r(a),t(a,e&&e.validate),s(a),c[a.pipelineName]=!0);return'<button type="button" class="'+a.cssClass+'" data-form-btn="true"><i class="'+b.cssClasses.toolbarBtnIcon+" "+a.icon+'"></i><span class="'+
b.cssClasses.toolbarBtnText+' sr-only">'+a.title+'</span></button><div class="gutentyp-toolbar-group gutentyp-toolbar-arrow-over '+a.cssClass+'-form"><div class="'+b.cssClasses.form+'">'+d+'<button class="btn btn-success btn-sm" type="button">Add</button><button class="btn btn-cancel btn-sm" type="button">Cancel</button></div></div>'};return{components:l,makeComponent:function(c){var e={};e.title=c.title;e.cssClass=c.cssClass||c.pipelineName;e.pipelineName=c.pipelineName;e.icon=c.icon||void 0;e.textClass=
c.textClass+" "+b.cssClasses.toolbarBtnText||b.cssClasses.toolbarBtnText;e.displayHandler=c.displayHandler;e.group=c.group||void 0;e.execute=function(d,e){var f,l=b.prefixes.pipeline.beforeComponent+c.pipelineName,n=b.prefixes.pipeline.afterComponent+c.pipelineName,m=a.getSelectedText();if(a.getAttribute(a.getClosest(d.target,"button"),b.attributes.formBtn.key))g=a.getCursorCoordinates(),g.text=m,g.isInEditor=a.selectionIsInEditor(g),d.gutenSelection=g;else{for(f=0;f<k.beforeAny.length;f++)if(a.isFunction(k.beforeAny[f]))k.beforeAny[f](d,
m,e);if(a.isFunction(k[l]))k[l](d,m,e);a.isFunction(c.func)&&(f=c.func(d,m||g.text,e),m&&0<m.length&&f?a.replaceSelectedText(f):g&&g.isInEditor?a.pasteHtml(g,f):f&&a.pasteHtmlAtCursor(f,!1,d));for(f=0;f<k.afterAny.length;f++)if(a.isFunction(k.afterAny[f]))k.afterAny[f](d,m,e);if(a.isFunction(k[n]))k[n](d,m,e)}};c.before&&k.registerPipelineEvent.registerBeforeComponentHandler(c.pipelineName,c.before);c.after&&k.registerPipelineEvent.registerAfterComponentHandler(c.pipelineName,c.after);c.form&&!e.displayHandler&&
(e.displayHandler=function(){return d(e,c.form)});g=void 0;return e},makeComponentForm:q,addComponent:m}}});hilary.register("gutentyp::toolbar",{init:function(b,a,k){return{build:function(){var l=k.components,d,e,p,f={},q,r,t,s;e=function(a){return b.selectors.toolbar+" ."+a.cssClass+":not("+b.selectors.hasEvents+")"};p=function(a,c){var d;d="gutentyp-component "+a.cssClass;c&&(d+=" "+c);return'<button type="button" class="'+d+'"><i class="'+b.cssClasses.toolbarBtnIcon+" "+a.icon+'"></i><span class="'+a.textClass+'">'+a.title+"</span></button>"};s=function(d){a.insertNewElementInto({markup:p(d)},b.selectors.newToolbars);
a.attachEvent({primarySelector:e(d),eventType:"click",eventHandler:d.execute})};q=function(d){a.insertHtml(b.selectors.newToolbars,d.displayHandler());a.attachEvent({primarySelector:e(d),eventType:"click",eventHandler:d.execute})};t=function(d){var c=f[d.group.name]={components:[d]};c.toggleId=a.getRandomString();c.menuId=a.getRandomString();c.toggleSelector="."+c.toggleId;c.menuSelector="."+c.menuId;a.insertNewElementInto({markup:p(d.group,c.toggleId)},b.selectors.newToolbars);a.insertNewElementInto({markup:'<div class="'+
c.menuId+" gutentyp-toolbar-group gutentyp-toolbar-arrow-"+(d.group.arrow||"over")+'"><ul></ul></div>'},b.selectors.newToolbars);a.attachEvent({primarySelector:c.toggleSelector,eventType:"click",eventHandler:function(b){b=a.getCoordinates(b.target,c.menuSelector);var d;d="left: "+b.moveLeft+"px";d+="; top: "+b.moveTop+"px";a.setStyle(c.menuSelector,d);a.toggleClass(".gutentyp-toolbar-group.active:not("+c.menuSelector+")","active");a.toggleClass(c.menuSelector,"active")}});return c};r=function(b){var c=
a.getRandomString(),d="."+c,e;f[b.group.name]?(e=f[b.group.name],f[b.group.name].components.push(b)):e=t(b);b.displayHandler?a.insertNewElementInto({markup:"<li>"+b.displayHandler(c)+"</li>"},e.menuSelector+" ul"):a.insertNewElementInto({markup:"<li>"+p(b,c)+"</li>"},e.menuSelector+" ul");a.attachEvent({primarySelector:d,eventType:"click",eventHandler:function(c,d){b.execute(c,d);a.toggleClass(e.menuSelector,"active")}})};a.insertNewElementBefore("div",b.selectors.newEditors,b.selectors.toolbar);
for(d=0;d<l.length;d++)void 0!==l[d].group?r(l[d]):a.isFunction(l[d].displayHandler)?q(l[d]):s(l[d]);a.addClass(b.selectors.newEditors,b.cssClasses.hasToolbar);a.addClass(b.selectors.newToolbars,b.cssClasses.hasComponents)}}}});hilary.register("gutentyp::core",{init:function(b,a,k,l){return{load:function(){a.initializeRichTextAreas();l.build();a.attachEvent({primarySelector:b.selectors.eventlessEditors,eventType:"blur",eventHandler:function(b){a.updateTextarea(b.target)}});a.addClass(b.selectors.editor,b.cssClasses.hasEvents)}}}});hilary.register("gutentyp::components::blocks",{init:function(b,a){var k,l;k=b.makeComponent({title:"Code",cssClass:"gutentyp-code",pipelineName:"code",icon:a.icons.code,textClass:"sr-only",func:function(b,a){return"<code>"+a+"</code>"}});l=b.makeComponent({title:"Quote",cssClass:"gutentyp-quote",pipelineName:"quote",icon:a.icons.blockquote,textClass:"sr-only",func:function(b,a){return"<blockquote>"+a+"</blockquote>"}});b.addComponent([k,l])}});hilary.register("gutentyp::components::colors",{init:function(b,a){var k,l=a.colors,d=0,e;e=b.makeComponent({title:"Colors",cssClass:"gutentyp-colors",pipelineName:"colors",icon:"color-block color-label",textClass:"sr-only"});e.name="colors";e.arrow="over";k=function(a){b.addComponent(b.makeComponent({title:a.title,cssClass:"gutentyp-"+a.name,pipelineName:"color"+a.Title,func:function(b,d){document.execCommand("forecolor",!1,a.value);return!1},displayHandler:function(b){return'<button type="button" class="'+
b+'"><span class="color-block" style="background-color: '+a.value+'"></span></button>'},group:e}))};for(d;d<l.length;d++)k(l[d])}});hilary.register("gutentyp::components::emphasis",{init:function(b,a){var k,l,d,e;k=b.makeComponent({title:"Bold",cssClass:"gutentyp-bold",pipelineName:"bold",icon:a.icons.bold,textClass:"sr-only",func:function(b,a){document.execCommand("bold",!1,null);return!1}});l=b.makeComponent({title:"Italic",cssClass:"gutentyp-italic",pipelineName:"italic",icon:a.icons.italic,textClass:"sr-only",func:function(b,a){document.execCommand("italic",!1,null);return!1}});d=b.makeComponent({title:"Underline",cssClass:"gutentyp-underline",
pipelineName:"underline",icon:a.icons.underline,textClass:"sr-only",func:function(b,a){document.execCommand("underline",!1,null);return!1}});e=b.makeComponent({title:"Strike Through",cssClass:"gutentyp-strike",pipelineName:"strike",icon:a.icons.strikethrough,textClass:"sr-only",func:function(b,a){document.execCommand("strikeThrough",!1,null);return!1}});b.addComponent([k,l,d,e])}});hilary.register("gutentyp::components::headings",{init:function(b,a){var k,l,d,e,p,f;f=b.makeComponent({title:"Headings",cssClass:"gutentyp-headings",pipelineName:"headings",icon:a.icons.header,textClass:"sr-only"});f.name="headings";f.arrow="over";k=b.makeComponent({title:"h1",cssClass:"gutentyp-h1",pipelineName:"h1",func:function(b,a){return"<h1>"+a+"</h1>"},group:f});l=b.makeComponent({title:"h2",cssClass:"gutentyp-h2",pipelineName:"h2",func:function(b,a){return"<h2>"+a+"</h2>"},group:f});d=b.makeComponent({title:"h3",
cssClass:"gutentyp-h3",pipelineName:"h3",func:function(b,a){return"<h3>"+a+"</h3>"},group:f});e=b.makeComponent({title:"h4",cssClass:"gutentyp-h4",pipelineName:"h4",func:function(b,a){return"<h4>"+a+"</h4>"},group:f});p=b.makeComponent({title:"h5",cssClass:"gutentyp-h5",pipelineName:"h5",func:function(b,a){return"<h5>"+a+"</h5>"},group:f});f=b.makeComponent({title:"h6",cssClass:"gutentyp-h6",pipelineName:"h6",func:function(a,b){return"<h6>"+b+"</h6>"},group:f});b.addComponent([k,l,d,e,p,f])}});hilary.register("gutentyp::components::image",{init:function(b,a,k){a=b.makeComponent({title:"Add Image",cssClass:"gutentyp-image",pipelineName:"image",icon:a.icons.image,textClass:"sr-only",func:function(b,a,e){if(!e)throw"No form data is present, so we can't write an image element.";b=e.gutenWidth;a=e.gutenHeight;return'<img src="'+e.gutenSrc+'" alt="'+(e.gutenAlt||e.gutenSrc)+'" '+(b?'width="'+b+'"':"")+(a?'height="'+a+'"':"")+"/>"},form:{fields:[{name:"gutenSrc",label:"Url",elementType:"input",
type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-src",validate:function(b,a){return!a||!a.gutenSrc||0>a.gutenSrc.indexOf("://")?!1:!0}}},{name:"gutenAlt",label:"Description",elementType:"input",type:"text",validation:{message:"Please enter a description. It's used by screen readers for accessibility.",cssClass:"link-alt",validate:function(a,b){return b&&b.gutenAlt?!0:!1}}},{name:"gutenWidth",label:"Width",elementType:"input",type:"text",validation:{message:"Width is not required, but it has to be a number",
cssClass:"link-width",validate:function(a,b){return b&&b.gutenWidth&&isNaN(b.gutenWidth)?!1:!0}}},{name:"gutenHeight",label:"Height",elementType:"input",type:"text",validation:{message:"Height is not required, but it has to be a number",cssClass:"link-height",validate:function(b,a){return a&&a.gutenHeight&&isNaN(a.gutenHeight)?!1:!0}}}]},after:function(a){k.clearForm(a.target)}});b.addComponent(a);return a}});hilary.register("gutentyp::components::justification",{init:function(b,a){var k,l,d,e,p,f;f=b.makeComponent({title:"Alignment",cssClass:"gutentyp-align",pipelineName:"alignment",icon:a.icons.alignLeft,textClass:"sr-only"});f.name="alignment";f.arrow="over";k=b.makeComponent({title:"Align Left",cssClass:"gutentyp-align-left",pipelineName:"alignLeft",icon:a.icons.alignLeft,textClass:"sr-only",func:function(a,b){document.execCommand("justifyLeft",!1,null);return!1},group:f});l=b.makeComponent({title:"Align Center",
cssClass:"gutentyp-align-center",pipelineName:"alignCenter",icon:a.icons.alignCenter,textClass:"sr-only",func:function(a,b){document.execCommand("justifyCenter",!1,null);return!1},group:f});d=b.makeComponent({title:"Align Right",cssClass:"gutentyp-align-right",pipelineName:"alignRight",icon:a.icons.alignRight,textClass:"sr-only",func:function(a,b){document.execCommand("justifyRight",!1,null);return!1},group:f});e=b.makeComponent({title:"Justify",cssClass:"gutentyp-align-justify",pipelineName:"alignJustify",
icon:a.icons.alignJustify,textClass:"sr-only",func:function(a,b){document.execCommand("justifyFull",!1,null);return!1},group:f});p=b.makeComponent({title:"Indent",cssClass:"gutentyp-indent",pipelineName:"indent",icon:a.icons.indent,textClass:"sr-only",func:function(a,b){document.execCommand("indent",!1,null);return!1},group:f});f=b.makeComponent({title:"Outdent",cssClass:"gutentyp-outdent",pipelineName:"outdent",icon:a.icons.outdent,textClass:"sr-only",func:function(a,b){document.execCommand("outdent",
!1,null);return!1},group:f});b.addComponent([k,l,d,e,p,f])}});hilary.register("gutentyp::components::link",{init:function(b,a,k){a=b.makeComponent({title:"Add Link",cssClass:"gutentyp-link",pipelineName:"link",icon:a.icons.link,textClass:"sr-only",func:function(a,b,e){if(!e)throw"No form data is present, so we can't write an anchor element.";return'<a href="'+e.gutenHref+'" target="_blank">'+(b&&0<b.length?b:e.gutenHref)+"</a>"},form:{fields:[{name:"gutenHref",label:"Url",elementType:"input",type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-url",
validate:function(b,a){return!a||!a.gutenHref||0>a.gutenHref.indexOf("://")?!1:!0}}}]},after:function(a){k.clearForm(a.target)}});b.addComponent(a);return a}});hilary.register("gutentyp::components::lists",{init:function(b,a){var k,l;k=b.makeComponent({title:"Unordered List",cssClass:"gutentyp-list-unordered",pipelineName:"list::unordered",icon:a.icons.unorderedList,textClass:"sr-only",func:function(a,b){document.execCommand("insertUnorderedList",!1,null);return!1}});l=b.makeComponent({title:"Ordered List",cssClass:"gutentyp-list-ordered",pipelineName:"list::ordered",icon:a.icons.orderedList,textClass:"sr-only",func:function(a,b){document.execCommand("insertOrderedList",
!1,null);return!1}});b.addComponent([k,l])}});hilary.register("gutentyp::components::embed",{init:function(b,a,k){a=b.makeComponent({title:"Embed Video",cssClass:"gutentyp-embed",pipelineName:"embed",icon:a.icons.embed,textClass:"sr-only",func:function(a,b,e){if(!e)throw"No form data is present, so we can't write a video element.";return e.gutenEmbedCode},form:{fields:[{name:"gutenEmbedCode",label:"Markup",elementType:"textarea",cssClass:"guten-embed",attributes:[{key:"rows",value:"3"}],validation:{message:"The markup is required",cssClass:"link-embed",
validate:function(a,b){return b&&b.gutenEmbedCode?!0:!1}}}]},after:function(a){k.clearForm(a.target)}});b.addComponent(a);return a}});hilary.use([hilary,jQuery,window,nicephore],function(b,a,k,l,d){l.gutentyp=function(){var b={},l,f,q,r,t,s,m,c,g,h=!1;f=a.createChildContainer();g=function(b){(b=f.tryResolve(b))&&b.init(s,q,r)};l=function(){q=f.resolve("gutentyp::config").init();b.config=q;r=f.resolve("gutentyp::dom").init(k,q);t=f.resolve("gutentyp::pipeline").init(q,r);b.pipeline=t.registerPipelineEvent;s=f.resolve("gutentyp::components").init(q,r,t)};l();b.registerComponents=function(a){var c;a=a||{};void 0===a.autoRegisterComponents&&
(a.autoRegisterComponents=!0);a.autoRegisterComponents&&(g("gutentyp::components::emphasis"),g("gutentyp::components::colors"),g("gutentyp::components::headings"),g("gutentyp::components::justification"),g("gutentyp::components::lists"),g("gutentyp::components::blocks"),g("gutentyp::components::link"),g("gutentyp::components::image"),g("gutentyp::components::embed"));if(a.components)for(c=0;c<a.components.length;c++)b.registerComponent(a.components[c]);h=!0};b.init=function(a){h||(b.registerComponents(a),
a&&a.observePaste&&d&&f.tryResolve("gutentyp::keyEvents").init(q,r,d));m=f.resolve("gutentyp::toolbar").init(q,r,s);c=f.resolve("gutentyp::core").init(q,r,s,m);c.load();return b};b.registerComponent=function(a){"string"===typeof a?g(a):(a=s.makeComponent(a),s.addComponent(a));return b};b.overrideModule=function(a,c){f.register(a,c);l();return b};b.overrideConfig=function(a){return b.overrideModule("gutentyp::config",a)};b.overridedom=function(a){return b.overrideModule("gutentyp::dom",a)};b.overridePipeline=
function(a){return b.overrideModule("gutentyp::pipeline",a)};b.overrideComponents=function(a){return b.overrideModule("gutentyp::components",a)};b.overrideToolbar=function(a){f.register("gutentyp::toolbar",a);return b};b.overrideCore=function(a){f.register("gutentyp::core",a);return b};b.ifYouReallyKnowWhatYoureDoing={IoC:f,prep:l};return b}});