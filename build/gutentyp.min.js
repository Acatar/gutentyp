hilary.register("gutentyp::config",{init:function(){var a={prefixes:{pipeline:{beforeComponent:"gutentyp::before::",afterComponent:"gutentyp::after::"}},attributes:{formBtn:{key:"data-form-btn",value:"true"}},colors:[]};a.colors.push({title:"Black",name:"black",value:"#000000"});a.colors.push({title:"Grey",name:"grey",value:"#62615f"});a.colors.push({title:"Light Grey",name:"lightGrey",value:"#dcddd7"});a.colors.push({title:"Pink",name:"pink",value:"#cd52bd"});a.colors.push({title:"Red",name:"red",
value:"#9a0000"});a.colors.push({title:"Yellow",name:"yellow",value:"#f0ac28"});a.colors.push({title:"Green",name:"green",value:"#6bb343"});a.colors.push({title:"Blue",name:"blue",value:"#3c8bc8"});a.colors.push({title:"Purple",name:"purple",value:"#a952cd"});a.icons={code:"fa fa-code",pre:"fa fa-file-code-o",blockquote:"fa fa-quote-left",bold:"fa fa-bold",italic:"fa fa-italic",underline:"fa fa-underline",strikethrough:"fa fa-strikethrough",header:"fa fa-header",image:"fa fa-image",alignLeft:"fa fa-align-left",
alignCenter:"fa fa-align-center",alignRight:"fa fa-align-right",alignJustify:"fa fa-align-justify",indent:"fa fa-indent",outdent:"fa fa-outdent",link:"fa fa-link",unorderedList:"fa fa-list-ul",orderedList:"fa fa-list-ol",embed:"fa fa-play-circle-o"};a.cssClasses={toGutentypify:"gutentyp-ify",gutentypified:"gutentyp-ified",hasEvents:"has-events",hasToolbar:"has-toolbar",hasComponents:"has-components",editor:"gutentyp-editor",textarea:"gutentyp-textarea",toolbar:"gutentyp-toolbar",toolbarBtn:"gutentyp-toolbar-btn",
toolbarBtnText:"gutentyp-toolbar-btn-text",toolbarBtnIcon:"gutentyp-toolbar-btn-icon",toolbarGroup:"gutentyp-toolbar-group",toolbarArrowOver:"gutentyp-toolbar-arrow-over",hidden:"gutentyp-hidden",form:"gutentyp-form"};a.autoCreateSelectors=function(){var c;a.selectors={};for(c in a.cssClasses)a.cssClasses.hasOwnProperty(c)&&(a.selectors[c]="."+a.cssClasses[c]);a.selectors.newEditors=a.selectors.editor+":not("+a.selectors.hasToolbar+")";a.selectors.eventlessEditors=a.selectors.editor+":not("+a.selectors.hasEvents+
")";a.selectors.newToolbars=a.selectors.toolbar+":not("+a.selectors.hasComponents+")"};a.autoCreateSelectors();return a}});hilary.register("gutentyp::dom",{init:function(a,c){var h,k,f,e,n,l,p,q,s,r,t,u;h=function(b,d,m,g,c){b=a("<"+(b||"div")+" />");d&&null!==d&&""!==d&&b.addClass("."===d[0]?d.substr(1):d);if("undefined"!==typeof m)for(d=0;d<m.length;d++)b.attr(m[d].key,m[d].value);"undefined"!==typeof g&&b.html(g);return c?b.prop("outerHTML"):b};k=function(b,d){return a(b).append(d)};f=function(b,d){return a(b).addClass(d)};e=function(b,d){return a(b).closest(d)};n=function(b,d){return a(b).siblings(d)};l=function(b,
d){var m;b instanceof a&&(b=b[0]);document.createEvent?(m=document.createEvent("HTMLEvents"),m.initEvent(d,!0,!0),m.eventName=d,b.dispatchEvent(m)):(m=document.createEventObject(),m.eventType=d,m.eventName=d,b.fireEvent("on"+m.eventType,m));a(b).trigger(d)};p=function(b,d,a){var g,c,f,e;if(!b)return!1;b.isClone&&window.getSelection&&(q(b),b=window.getSelection());if(window.getSelection){if(b.getRangeAt&&b.rangeCount){g=b.getRangeAt(0);g.deleteContents();c=document.createElement("div");c.innerHTML=
d;for(d=document.createDocumentFragment();f=c.firstChild;)e=d.appendChild(f);c=d.firstChild;g.insertNode(d);e&&(g=g.cloneRange(),g.setStartAfter(e),a?g.setStartBefore(c):g.collapse(!0),b.removeAllRanges(),b.addRange(g))}}else"Control"!==b.type&&(e=b.createRange(),e.collapse(!0),b.createRange().pasteHTML(d),a&&(g=b.createRange(),g.setEndPoint("StartToStart",e),g.select()))};q=function(b){try{var d,a,g,c,e,f,l,k,h,n=document.createRange();a=b.startContainer||b.baseNode||b.anchorNode;g=b.endContainer||
b.extentNode||b.focusNode;f=b.startOffset||b.baseOffset||b.anchorOffset;l=b.endOffset||b.extentOffset||b.focusOffset;l>f?(c=a,k=f,e=g,h=l):(c=g,k=l,e=a,h=f);n.setStart(c,k);n.setEnd(e,h);d=window.getSelection();d.removeAllRanges();d.addRange(n)}catch(p){console.log(p)}};s=function(b){var d;b&&b.anchorNode&&(d=b.anchorNode);!d&&window.getSelection&&(b=window.getSelection(),d=b.anchorNode);!d&&document.selection&&(b=document.selection,b=b.getRangeAt?b.getRangeAt(0):b.createRange(),d=b.commonAncestorContainer?
b.commonAncestorContainer:b.parentElement?b.parentElement():b.item(0));if(d)return"#text"===d.nodeName?d.parentNode:d};r=function(b){var d="",a;for(a=0;a<(b||5);a++)d+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()));return d};t=function(b,d,c){b=a(b);c=b.offset();var g,e=b.outerWidth()/2;g=d?a(d):b;c.width=g.outerWidth();c.height=49<b.outerHeight()?b.outerHeight():50;d&&(c.moveLeft=c.left+(e||25)-c.width/2,c.moveTop=c.top+2*e,c.moveRight=c.right+c.width/2-t(d).width/2,c.moveBottom=
c.bottom+c.height+6);return c};u=function(b,d){var m;m=a(b).is("form")?a(b):d&&a(b).hasClass(c.cssClasses.form)?a(b).find(":input"):d?a(b).closest(c.selectors.form).find(":input"):a(b).closest(c.selectors.form);if(!m||1>m.length)m=a(b).find(c.selectors.form);return m};return{makeElement:h,initializeRichTextAreas:function(){var b=[];a(c.selectors.toGutentypify).each(function(d,m){var g=a(this);g.attr("id")||g.attr("id","gutentyp-"+r());a("<div />").addClass(c.cssClasses.editor).attr("data-for",g.attr("id")).html(g.val()).attr("contenteditable",
!0).insertBefore(g);g.removeClass(c.cssClasses.toGutentypify);g.addClass(c.cssClasses.hidden);g.addClass(c.cssClasses.gutentypified);b.push(g.attr("id"))});return b},insertNewElementBefore:function(b,d,c,g){d&&""!==d&&h(b,c,g).insertBefore(a(d))},insertNewElementInto:function(b,d,c,g){d&&""!==d&&("string"!==typeof b&&b.markup?a(b.markup).appendTo(a(d)):h(b,c,g).appendTo(a(d)))},insertHtmlBefore:function(b,d){return a(b).before(d)},insertHtmlAfter:function(b,d){return a(b).after(d)},setText:function(b,
d){return a(b).text(d)},insertHtml:k,addClass:f,removeClass:function(b,d){return a(b).removeClass(d)},toggleClass:function(b,d){return a(b).toggleClass(d)},getAttribute:function(b,d){return a(b).attr(d)},getOrSetValue:function(b,d){return d?(a(b).val(d),d):a(b).val()},clearForm:function(b){b=u(b);b.val("");b.is("textarea")&&b.html("");b.find(":input").val("");b.find("textarea").html("");return b.find(".alert").addClass(c.cssClasses.hidden)},getClosest:e,getClosestAdjacent:n,getNext:function(b,d){return a(b).next(d)},
getPrevious:function(b,d){return a(b).prev(d)},exists:function(b){return 0<a(b).length},attachEvent:function(b){if(!b||!1===a.isFunction(b.eventHandler))return!1;var d=a(b.primarySelector);if(b.secondarySelector)d.on(b.eventType,b.secondarySelector,function(d){b.eventHandler(d.originalEvent)});else d.on(b.eventType,function(d){b.eventHandler(d.originalEvent)});return f(d,c.cssClasses.hasEvents)},updateTextarea:function(b){var d=a("textarea#"+a(b).attr("data-for"));d.is("textarea")&&d.html(a(b).html());
d.val(a(b).html());l(d[0],"change");return b},isFunction:function(b){return a.isFunction(b)},isObject:function(b){return a.isPlainObject(b)},isArray:function(b){return a.isArray(b)},hasAncestor:function(b,d){return 0!==a(b).parents(d).length||"string"===typeof d&&a(b).hasClass(d)||"string"===typeof d&&a(b).hasClass(d.substring(1))?!0:!1},getSelectedText:function(){var b,d,a,c;if("undefined"!==typeof window.getSelection){if(b=window.getSelection(),b.rangeCount){d=document.createElement("div");a=0;
for(c=b.rangeCount;a<c;++a)d.appendChild(b.getRangeAt(a).cloneContents());return d.innerHTML}}else if("undefined"!==typeof document.selection&&"Text"===document.selection.type)return document.selection.createRange().htmlText},getSelectedParentNode:s,replaceSelectedText:function(b){var d,a,c;if(window.getSelection&&window.getSelection().getRangeAt){d=window.getSelection().getRangeAt(0);d.deleteContents();a=document.createElement("div");a.innerHTML=b;for(b=document.createDocumentFragment();c=a.firstChild;)b.appendChild(c);
d.insertNode(b)}else document.selection&&document.selection.createRange&&(d=document.selection.createRange(),d.pasteHTML(b))},pasteHtmlAtCursor:function(b,d,m){var g;window.getSelection?g=window.getSelection():(g=document.selection,"Control"===g.type&&(g=void 0));m&&0===a(s()).closest(c.selectors.editor).length&&(m=n(e(m.target,c.selectors.toolbar),c.selectors.editor).first(),k(m,b));p(g,b,d)},pasteHtml:p,selectRange:q,selectionIsInEditor:function(b){return 0<a(s(b)).closest(c.selectors.editor).length},
getCursorCoordinates:function(){var b=window.getSelection();return b.getRangeAt&&b.rangeCount?a.extend({isClone:!0},b,b.getRangeAt(0)):!1},getRandomString:r,getCoordinates:t,setStyle:function(b,d){return a(b).attr("style",d)},formToJson:function(b){b=u(b,!0);var d={},c;if(0!==b.length)return c=b.serializeArray(),a.each(c,function(){void 0!==d[this.name]?(d[this.name].push||(d[this.name]=[d[this.name]]),d[this.name].push(this.value||"")):d[this.name]=this.value||""}),b.find(':input[disabled="disabled"]').each(function(b){b=
a(this);var c=b.attr("name");c&&(d[c]=b.val())}),d}}}});hilary.register("gutentyp::pipeline",{init:function(a,c){var h=[],k=[],f={},e,n={beforeAny:h,afterAny:k,registerPipelineEvent:f};f.registerBeforeAnyHandler=function(a){if(!c.isFunction(a))throw Error("Only functions can be registered as beforeAny events.");h.push(a)};f.registerAfterAnyHandler=function(a){if(!c.isFunction(a))throw Error("Only functions can be registered as afterAny events.");k.push(a)};f.registerBeforeComponentHandler=function(c,f){e(a.prefixes.pipeline.beforeComponent+c,f)};f.registerAfterComponentHandler=
function(c,f){e(a.prefixes.pipeline.afterComponent+c,f)};e=function(a,e){if(!c.isFunction(e))throw Error("Only functions can be registered as pipeline events.");n[a]=e};return n}});hilary.register("gutentyp::components",{init:function(a,c,h){var k=[],f,e,n,l,p,q,s,r,t,u={},b;t=function(d){if(d instanceof Array)for(var b in d)d.hasOwnProperty(b)&&t(d[b]);else k.push(d)};q=function(d){c.attachEvent({primarySelector:document,secondarySelector:"."+d.cssClass,eventType:"click",eventHandler:function(d){var b=c.getClosest(d.target,"button");d="."+c.getAttribute(b,"data-for");var b=c.getCoordinates(b,d),a;a="left: "+b.moveLeft+"px";a+="; top: "+b.moveTop+"px";c.setStyle(d,a);c.toggleClass(d,
"active")}})};s=function(d,b){c.attachEvent({primarySelector:document,secondarySelector:"."+d.cssClass+"-form .btn-success",eventType:"click",eventHandler:function(g){var e=c.formToJson(g.target),f;if(c.isFunction(b)&&!b(g,e))return!1;f=c.getClosest(g.target,a.selectors.toolbarGroup);c.toggleClass(f,"active");g.fromGutenForm=!0;d.execute(g,e)}})};r=function(d){c.attachEvent({primarySelector:document,secondarySelector:"."+d.cssClass+"-form .btn-cancel",eventType:"click",eventHandler:function(d){var b=
c.getClosest(d.target,a.selectors.toolbarGroup);d=c.getClosestAdjacent(d.target,".alert");c.toggleClass(b,"active");c.clearForm(b);c.addClass(d,a.cssClasses.hidden)}})};f=function(d,b){var a=b.fields,f=0,k="",h={names:[]},q={},r={},s=c.getRandomString();for(f;f<a.length;f++)r["a"+f]=c.getRandomString(),k+=e(a[f],r["a"+f]),n(h,a[f],r["a"+f]);0<h.names.length&&(q.validate=l(h));return p(d,k,q,s)};e=function(d,b){var g="",f;if(!d||!d.elementType||!d.name)return"";d.validation&&d.validation.message&&
(f="alert "+a.cssClasses.hidden+" "+b,d.validation.cssClass&&(f+=" "+d.validation.cssClass),g+=c.makeElement("div",f,void 0,d.validation.message,!0));d.label&&(g+=c.makeElement("label",void 0,void 0,d.label,!0));f=c.isArray(d.attributes)?d.attributes:[];f.push({key:"name",value:d.name});"input"===d.elementType&&f.push({key:"type",value:d.inputType||"text"});g+=c.makeElement(d.elementType,d.cssClass||void 0,f,void 0,!0);return g+"<br />"};n=function(d,b,a){b.name&&b.validation&&c.isFunction(b.validation.validate)&&
(d.names.push(b.name),d[b.name]=b.validation,d[b.name].messageId=a)};l=function(d){return function(b,g){var f,e,k=!0;for(f=0;f<d.names.length;f++)(e=d[d.names[f]])&&c.isFunction(e.validate)&&e.messageId&&!e.validate(b,g)&&(k=!1,e=c.getClosestAdjacent(b.target,"."+e.cssClass),e.removeClass(a.cssClasses.hidden));return k}};p=function(d,b,g,f){d.uniqueId=f||c.getRandomString();u[d.pipelineName]||(q(d),s(d,g&&g.validate),r(d),u[d.pipelineName]=!0);return{button:'<button type="button" class="'+d.cssClass+
'" data-form-btn="true" data-for="'+d.uniqueId+'"><i class="'+a.cssClasses.toolbarBtnIcon+" "+d.icon+'"></i><span class="'+a.cssClasses.toolbarBtnText+' sr-only">'+d.title+"</span></button>",form:'<div class="'+a.cssClasses.toolbarGroup+" "+a.cssClasses.toolbarArrowOver+" "+d.uniqueId+" "+d.cssClass+'-form"><div class="'+a.cssClasses.form+'">'+b+'<button class="btn btn-success btn-sm" type="button">Add</button><button class="btn btn-cancel btn-sm" type="button">Cancel</button></div></div>',uniqueId:d.uniqueId}};
return{getComponents:function(){return k},makeComponent:function(d){var e={};e.title=d.title;e.cssClass=d.cssClass||d.pipelineName;e.pipelineName=d.pipelineName;e.icon=d.icon||void 0;e.textClass=d.textClass+" "+a.cssClasses.toolbarBtnText||a.cssClasses.toolbarBtnText;e.displayHandler=d.displayHandler;e.group=d.group||void 0;e.execute=function(g,f){var e,k=a.prefixes.pipeline.beforeComponent+d.pipelineName,l=a.prefixes.pipeline.afterComponent+d.pipelineName,m=c.getSelectedText();if(c.getAttribute(c.getClosest(g.target,
"button"),a.attributes.formBtn.key))b=c.getCursorCoordinates(),b.text=m,b.isInEditor=c.selectionIsInEditor(b),g.gutenSelection=b;else{for(e=0;e<h.beforeAny.length;e++)if(c.isFunction(h.beforeAny[e]))h.beforeAny[e](g,m,f);if(c.isFunction(h[k]))h[k](g,m,f);c.isFunction(d.func)&&(e=d.func(g,m||b&&b.text,f),m&&0<m.length&&e?c.replaceSelectedText(e):b&&b.isInEditor&&e?c.pasteHtml(b,e):e&&c.pasteHtmlAtCursor(e,!1,g));for(e=0;e<h.afterAny.length;e++)if(c.isFunction(h.afterAny[e]))h.afterAny[e](g,m,f);if(c.isFunction(h[l]))h[l](g,
m,f)}};d.before&&h.registerPipelineEvent.registerBeforeComponentHandler(d.pipelineName,d.before);d.after&&h.registerPipelineEvent.registerAfterComponentHandler(d.pipelineName,d.after);d.form&&!e.displayHandler&&(e.displayHandler=function(){var b=f(e,d.form);c.exists(b.uniqueId)||c.insertNewElementInto({markup:b.form},"body");return b.button});b=void 0;return e},makeComponentForm:p,addComponent:t}}});hilary.register("gutentyp::toolbar",{init:function(a,c,h){var k=h.getComponents(),f,e,n,l={},p,q,s,r,t,u,b;p=function(){c.insertNewElementBefore("div",a.selectors.newEditors,a.selectors.toolbar)};q=function(){for(f=0;f<k.length;f++)void 0!==k[f].group?t(k[f]):c.isFunction(k[f].displayHandler)?r(k[f]):b(k[f])};s=function(){c.addClass(a.selectors.newEditors,a.cssClasses.hasToolbar);c.addClass(a.selectors.newToolbars,a.cssClasses.hasComponents)};e=function(d){return a.selectors.toolbar+" ."+d.cssClass+
":not("+a.selectors.hasEvents+")"};n=function(d,b){var c;c="gutentyp-component "+d.cssClass;b&&(c+=" "+b);return'<button type="button" class="'+c+'" data-title="'+d.title+'"><i class="'+a.cssClasses.toolbarBtnIcon+" "+d.icon+'"></i><span class="'+d.textClass+'">'+d.title+"</span></button>"};b=function(d){c.insertNewElementInto({markup:n(d)},a.selectors.newToolbars);c.attachEvent({primarySelector:e(d),eventType:"click",eventHandler:d.execute})};r=function(d){c.insertHtml(a.selectors.newToolbars,d.displayHandler());
c.attachEvent({primarySelector:e(d),eventType:"click",eventHandler:d.execute})};u=function(d){var b=l[d.group.name]={components:[d]};b.toggleId=c.getRandomString();b.menuId=c.getRandomString();b.toggleSelector="."+b.toggleId;b.menuSelector="."+b.menuId;c.insertNewElementInto({markup:n(d.group,b.toggleId)},a.selectors.newToolbars);c.insertNewElementInto({markup:'<div class="'+b.menuId+" gutentyp-toolbar-group gutentyp-toolbar-arrow-"+(d.group.arrow||"over")+'"><ul></ul></div>'},"body");c.attachEvent({primarySelector:b.toggleSelector,
eventType:"click",eventHandler:function(d){d=c.getClosest(d.target,"button");d=c.getCoordinates(d,b.menuSelector);var a;a="left: "+d.moveLeft+"px";a+="; top: "+d.moveTop+"px";c.setStyle(b.menuSelector,a);c.toggleClass(".gutentyp-toolbar-group.active:not("+b.menuSelector+")","active");c.toggleClass(b.menuSelector,"active")}});return b};t=function(b){var a=c.getRandomString(),e="."+a,f;l[b.group.name]?(f=l[b.group.name],l[b.group.name].components.push(b)):f=u(b);b.displayHandler?c.insertNewElementInto({markup:"<li>"+
b.displayHandler(a)+"</li>"},f.menuSelector+" ul"):c.insertNewElementInto({markup:"<li>"+n(b,a)+"</li>"},f.menuSelector+" ul");c.attachEvent({primarySelector:e,eventType:"click",eventHandler:function(a,e){b.execute(a,e);c.toggleClass(f.menuSelector,"active")}})};return{build:function(){p();q();s()}}}});hilary.register("gutentyp::transformer",{init:function(a,c,h,k,f){f=f||{};return{transform:function(){c.initializeRichTextAreas();f.lazyToolbars?c.attachEvent({primarySelector:document,secondarySelector:a.selectors.editors,eventType:"focusin",eventHandler:function(a){k.build()}}):k.build();c.attachEvent({primarySelector:a.selectors.eventlessEditors,eventType:"blur,change",eventHandler:function(a){a.target&&c.updateTextarea(a.target)}});c.addClass(a.selectors.editor,a.cssClasses.hasEvents)}}}});hilary.register("gutentyp::components::blocks",{init:function(a,c){var h,k,f;k=a.makeComponent({title:"Code Block",cssClass:"gutentyp-code-block",pipelineName:"code::block",icon:c.icons.pre,textClass:"sr-only",func:function(a,c){return'<pre class="prettyprint linenums">'+(c||" ")+"</pre>"}});h=a.makeComponent({title:"Code",cssClass:"gutentyp-code",pipelineName:"code",icon:c.icons.code,textClass:"sr-only",func:function(a,c){return"<code>"+c+"</code>"}});f=a.makeComponent({title:"Quote",cssClass:"gutentyp-quote",
pipelineName:"quote",icon:c.icons.blockquote,textClass:"sr-only",func:function(a,c){return"<blockquote>"+c+"</blockquote>"}});a.addComponent([h,k,f])}});hilary.register("gutentyp::components::colors",{init:function(a,c){var h,k=c.colors,f=0,e;e=a.makeComponent({title:"Colors",cssClass:"gutentyp-colors",pipelineName:"colors",icon:"gutentyp-component-color-block gutentyp-component-color-label",textClass:"sr-only"});e.name="colors";e.arrow="over";h=function(c){a.addComponent(a.makeComponent({title:c.title,cssClass:"gutentyp-"+c.name,pipelineName:"color"+c.Title,func:function(a,e){document.execCommand("forecolor",!1,c.value);return!1},displayHandler:function(a){return'<button type="button" class="'+
a+'"><span class="gutentyp-component-color-block" style="background-color: '+c.value+'"></span></button>'},group:e}))};for(f;f<k.length;f++)h(k[f])}});hilary.register("gutentyp::components::emphasis",{init:function(a,c){var h,k,f,e;h=a.makeComponent({title:"Bold",cssClass:"gutentyp-bold",pipelineName:"bold",icon:c.icons.bold,textClass:"sr-only",func:function(a,c){document.execCommand("bold",!1,null);return!1}});k=a.makeComponent({title:"Italic",cssClass:"gutentyp-italic",pipelineName:"italic",icon:c.icons.italic,textClass:"sr-only",func:function(a,c){document.execCommand("italic",!1,null);return!1}});f=a.makeComponent({title:"Underline",cssClass:"gutentyp-underline",
pipelineName:"underline",icon:c.icons.underline,textClass:"sr-only",func:function(a,c){document.execCommand("underline",!1,null);return!1}});e=a.makeComponent({title:"Strike Through",cssClass:"gutentyp-strike",pipelineName:"strike",icon:c.icons.strikethrough,textClass:"sr-only",func:function(a,c){document.execCommand("strikeThrough",!1,null);return!1}});a.addComponent([h,k,f,e])}});hilary.register("gutentyp::components::headings",{init:function(a,c){var h,k,f,e,n,l;l=a.makeComponent({title:"Headings",cssClass:"gutentyp-headings",pipelineName:"headings",icon:c.icons.header,textClass:"sr-only"});l.name="headings";l.arrow="over";h=a.makeComponent({title:"h1",cssClass:"gutentyp-h1",pipelineName:"h1",func:function(a,c){return"<h1>"+c+"</h1>"},group:l});k=a.makeComponent({title:"h2",cssClass:"gutentyp-h2",pipelineName:"h2",func:function(a,c){return"<h2>"+c+"</h2>"},group:l});f=a.makeComponent({title:"h3",
cssClass:"gutentyp-h3",pipelineName:"h3",func:function(a,c){return"<h3>"+c+"</h3>"},group:l});e=a.makeComponent({title:"h4",cssClass:"gutentyp-h4",pipelineName:"h4",func:function(a,c){return"<h4>"+c+"</h4>"},group:l});n=a.makeComponent({title:"h5",cssClass:"gutentyp-h5",pipelineName:"h5",func:function(a,c){return"<h5>"+c+"</h5>"},group:l});l=a.makeComponent({title:"h6",cssClass:"gutentyp-h6",pipelineName:"h6",func:function(a,c){return"<h6>"+c+"</h6>"},group:l});a.addComponent([h,k,f,e,n,l])}});hilary.register("gutentyp::components::image",{init:function(a,c,h){c=a.makeComponent({title:"Add Image",cssClass:"gutentyp-image",pipelineName:"image",icon:c.icons.image,textClass:"sr-only",func:function(a,c,e){if(!e)throw"No form data is present, so we can't write an image element.";a=e.gutenWidth;c=e.gutenHeight;return'<img src="'+e.gutenSrc+'" alt="'+(e.gutenAlt||e.gutenSrc)+'" '+(a?'width="'+a+'"':"")+(c?'height="'+c+'"':"")+"/>"},form:{fields:[{name:"gutenSrc",label:"Url",elementType:"input",
type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-src",validate:function(a,c){return!c||!c.gutenSrc||0>c.gutenSrc.indexOf("://")?!1:!0}}},{name:"gutenAlt",label:"Description",elementType:"input",type:"text",validation:{message:"Please enter a description. It's used by screen readers for accessibility.",cssClass:"link-alt",validate:function(a,c){return c&&c.gutenAlt?!0:!1}}},{name:"gutenWidth",label:"Width",elementType:"input",type:"text",validation:{message:"Width is not required, but it has to be a number",
cssClass:"link-width",validate:function(a,c){return c&&c.gutenWidth&&isNaN(c.gutenWidth)?!1:!0}}},{name:"gutenHeight",label:"Height",elementType:"input",type:"text",validation:{message:"Height is not required, but it has to be a number",cssClass:"link-height",validate:function(a,c){return c&&c.gutenHeight&&isNaN(c.gutenHeight)?!1:!0}}}]},after:function(a){h.clearForm(a.target)}});a.addComponent(c);return c}});hilary.register("gutentyp::components::justification",{init:function(a,c){var h,k,f,e,n,l;l=a.makeComponent({title:"Alignment",cssClass:"gutentyp-align",pipelineName:"alignment",icon:c.icons.alignLeft,textClass:"sr-only"});l.name="alignment";l.arrow="over";h=a.makeComponent({title:"Align Left",cssClass:"gutentyp-align-left",pipelineName:"alignLeft",icon:c.icons.alignLeft,textClass:"sr-only",func:function(a,c){document.execCommand("justifyLeft",!1,null);return!1},group:l});k=a.makeComponent({title:"Align Center",
cssClass:"gutentyp-align-center",pipelineName:"alignCenter",icon:c.icons.alignCenter,textClass:"sr-only",func:function(a,c){document.execCommand("justifyCenter",!1,null);return!1},group:l});f=a.makeComponent({title:"Align Right",cssClass:"gutentyp-align-right",pipelineName:"alignRight",icon:c.icons.alignRight,textClass:"sr-only",func:function(a,c){document.execCommand("justifyRight",!1,null);return!1},group:l});e=a.makeComponent({title:"Justify",cssClass:"gutentyp-align-justify",pipelineName:"alignJustify",
icon:c.icons.alignJustify,textClass:"sr-only",func:function(a,c){document.execCommand("justifyFull",!1,null);return!1},group:l});n=a.makeComponent({title:"Indent",cssClass:"gutentyp-indent",pipelineName:"indent",icon:c.icons.indent,textClass:"sr-only",func:function(a,c){document.execCommand("indent",!1,null);return!1},group:l});l=a.makeComponent({title:"Outdent",cssClass:"gutentyp-outdent",pipelineName:"outdent",icon:c.icons.outdent,textClass:"sr-only",func:function(a,c){document.execCommand("outdent",
!1,null);return!1},group:l});a.addComponent([h,k,f,e,n,l])}});hilary.register("gutentyp::components::link",{init:function(a,c,h){c=a.makeComponent({title:"Add Link",cssClass:"gutentyp-link",pipelineName:"link",icon:c.icons.link,textClass:"sr-only",func:function(a,c,e){if(!e)throw"No form data is present, so we can't write an anchor element.";return'<a href="'+e.gutenHref+'" target="_blank">'+(c&&0<c.length?c:e.gutenHref)+"</a>"},form:{fields:[{name:"gutenHref",label:"Url",elementType:"input",type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-url",
validate:function(a,c){return!c||!c.gutenHref||0>c.gutenHref.indexOf("://")?!1:!0}}}]},after:function(a){h.clearForm(a.target)}});a.addComponent(c);return c}});hilary.register("gutentyp::components::lists",{init:function(a,c){var h,k;h=a.makeComponent({title:"Unordered List",cssClass:"gutentyp-list-unordered",pipelineName:"list::unordered",icon:c.icons.unorderedList,textClass:"sr-only",func:function(a,c){document.execCommand("insertUnorderedList",!1,null);return!1}});k=a.makeComponent({title:"Ordered List",cssClass:"gutentyp-list-ordered",pipelineName:"list::ordered",icon:c.icons.orderedList,textClass:"sr-only",func:function(a,c){document.execCommand("insertOrderedList",
!1,null);return!1}});a.addComponent([h,k])}});hilary.register("gutentyp::components::embed",{init:function(a,c,h){c=a.makeComponent({title:"Embed Video",cssClass:"gutentyp-embed",pipelineName:"embed",icon:c.icons.embed,textClass:"sr-only",func:function(a,c,e){if(!e)throw"No form data is present, so we can't write a video element.";return e.gutenEmbedCode},form:{fields:[{name:"gutenEmbedCode",label:"Markup",elementType:"textarea",cssClass:"guten-embed",attributes:[{key:"rows",value:"3"}],validation:{message:"The markup is required",cssClass:"link-embed",
validate:function(a,c){return c&&c.gutenEmbedCode?!0:!1}}}]},after:function(a){h.clearForm(a.target)}});a.addComponent(c);return c}});hilary.use([hilary,jQuery,window,nicephore],function(a,c,h,k,f){k.gutentyp=function(){var a={},k,l,p,q,s,r,t,u,b,d=!1,m;l=c.createChildContainer();b=function(a){(a=l.tryResolve(a))&&a.init(r,p,q)};k=function(){p=l.resolve("gutentyp::config").init();a.config=p;q=l.resolve("gutentyp::dom").init(h,p);s=l.resolve("gutentyp::pipeline").init(p,q);a.pipeline=s.registerPipelineEvent;r=l.resolve("gutentyp::components").init(p,q,s)};k();a.registerComponents=function(c){var f;void 0===c.autoRegisterComponents&&
(c.autoRegisterComponents=!0);c.autoRegisterComponents&&(b("gutentyp::components::emphasis"),b("gutentyp::components::colors"),b("gutentyp::components::headings"),b("gutentyp::components::justification"),b("gutentyp::components::lists"),b("gutentyp::components::blocks"),b("gutentyp::components::link"),b("gutentyp::components::image"),b("gutentyp::components::embed"));if(c.components)for(f=0;f<c.components.length;f++)a.registerComponent(c.components[f]);d=!0};m=function(a){a=a||{};void 0===a.observeKeyEvents&&
(a.observeKeyEvents=!1);return a};a.init=function(b){var c;b=m(b);d||(a.registerComponents(b),b.observeKeyEvents&&f&&(c=l.tryResolve("gutentyp::keyEvents"))&&c.init(p,q,f,h));t=l.resolve("gutentyp::toolbar").init(p,q,r);u=l.resolve("gutentyp::transformer").init(p,q,r,t,b);u.transform();s.registerPipelineEvent.registerAfterAnyHandler(function(a,b,c){q.triggerEvent(a,"blur");q.triggerEvent(a,"change")});return a};a.registerComponent=function(c){"string"===typeof c?b(c):(c=r.makeComponent(c),r.addComponent(c));
return a};a.overrideModule=function(b,c){l.register(b,c);k();return a};a.overrideConfig=function(b){b=a.overrideModule("gutentyp::config",b);p.autoCreateSelectors();return b};a.overridedom=function(b){return a.overrideModule("gutentyp::dom",b)};a.overridePipeline=function(b){return a.overrideModule("gutentyp::pipeline",b)};a.overrideComponents=function(b){return a.overrideModule("gutentyp::components",b)};a.overrideToolbar=function(b){l.register("gutentyp::toolbar",b);return a};a.overrideCore=function(b){l.register("gutentyp::core",
b);return a};a.ifYouReallyKnowWhatYoureDoing={IoC:l,prep:k};return a}});