hilary.register("gutentyp::config",{init:function(){var b={prefixes:{pipeline:{beforeComponent:"gutentyp::before::",afterComponent:"gutentyp::after::"}},attributes:{formBtn:{key:"data-form-btn",value:"true"}},colors:[]};b.colors.push({title:"Black",name:"black",value:"#000000"});b.colors.push({title:"Grey",name:"grey",value:"#62615f"});b.colors.push({title:"Light Grey",name:"lightGrey",value:"#dcddd7"});b.colors.push({title:"Pink",name:"pink",value:"#cd52bd"});b.colors.push({title:"Red",name:"red",
value:"#9a0000"});b.colors.push({title:"Yellow",name:"yellow",value:"#f0ac28"});b.colors.push({title:"Green",name:"green",value:"#6bb343"});b.colors.push({title:"Blue",name:"blue",value:"#3c8bc8"});b.colors.push({title:"Purple",name:"purple",value:"#a952cd"});b.icons={code:"fa fa-code",pre:"fa fa-file-code-o",blockquote:"fa fa-quote-left",bold:"fa fa-bold",italic:"fa fa-italic",underline:"fa fa-underline",strikethrough:"fa fa-strikethrough",header:"fa fa-header",image:"fa fa-image",alignLeft:"fa fa-align-left",
alignCenter:"fa fa-align-center",alignRight:"fa fa-align-right",alignJustify:"fa fa-align-justify",indent:"fa fa-indent",outdent:"fa fa-outdent",link:"fa fa-link",unorderedList:"fa fa-list-ul",orderedList:"fa fa-list-ol",embed:"fa fa-play-circle-o"};b.cssClasses={toGutentypify:"gutentyp-ify",gutentypified:"gutentyp-ified",hasEvents:"has-events",hasToolbar:"has-toolbar",hasComponents:"has-components",container:"gutentyp",editor:"gutentyp-editor",textarea:"gutentyp-textarea",toolbar:"gutentyp-toolbar",
toolbarBtn:"gutentyp-toolbar-btn",toolbarBtnText:"gutentyp-toolbar-btn-text",toolbarBtnIcon:"gutentyp-toolbar-btn-icon",toolbarGroup:"gutentyp-toolbar-group",toolbarArrowOver:"gutentyp-toolbar-arrow-over",hidden:"gutentyp-hidden",form:"gutentyp-form"};b.autoCreateSelectors=function(){var c;b.selectors={};for(c in b.cssClasses)b.cssClasses.hasOwnProperty(c)&&(b.selectors[c]="."+b.cssClasses[c]);b.selectors.newEditors=b.selectors.editor+":not("+b.selectors.hasToolbar+")";b.selectors.eventlessEditors=
b.selectors.editor+":not("+b.selectors.hasEvents+")";b.selectors.newToolbars=b.selectors.toolbar+":not("+b.selectors.hasComponents+")"};b.autoCreateSelectors();return b}});hilary.register("gutentyp::dom",{init:function(b,c){var k,h,e,g,n,l,p,q,s,r,t,u,m;k=function(a,d,f,c,g){a=b("<"+(a||"div")+" />");d&&null!==d&&""!==d&&a.addClass("."===d[0]?d.substr(1):d);if("undefined"!==typeof f)for(d=0;d<f.length;d++)a.attr(f[d].key,f[d].value);"undefined"!==typeof c&&a.html(c);return g?a.prop("outerHTML"):a};h=function(a,d){return b(a).append(d)};e=function(a,d){return b(a).addClass(d)};g=function(a,d){return b(a).closest(d)};n=function(a,d){return b(a).siblings(d)};l=function(a,
d){var f;a instanceof b&&(a=a[0]);document.createEvent?(f=document.createEvent("HTMLEvents"),f.initEvent(d,!0,!0),f.eventName=d):document.createEventObject&&(f=document.createEventObject(),f.eventType=d,f.eventName=d);a.dispatchEvent?a.dispatchEvent(f):a.fireEvent?a.fireEvent("on"+f.eventType,f):b(a).trigger(d)};p=function(a,d,f){var b,c,g,e;if(!a)return!1;void 0===f&&(f=!0);a.isClone&&window.getSelection&&(s(a),a=window.getSelection());if(window.getSelection){if(a.getRangeAt&&a.rangeCount){b=a.getRangeAt(0);
b.deleteContents();c=document.createElement("div");c.innerHTML=d;for(d=document.createDocumentFragment();g=c.firstChild;)e=d.appendChild(g);c=d.firstChild;b.insertNode(d);q(c,e,b,null,a,f)}}else"Control"!==a.type&&(e=a.createRange(),e.collapse(!0),a.createRange().pasteHTML(d),f&&q(null,null,b,e,a,f))};q=function(a,d,f,b,c,e){d?(f=f.cloneRange(),f.setStartAfter(d),e?f.setStartBefore(a):f.collapse(!0),c.removeAllRanges(),c.addRange(f)):b&&(f=c.createRange(),f.setEndPoint("StartToStart",b),f.select())};
s=function(a){try{var d,f,b,c,e,g,l,h,k,n=document.createRange();f=a.startContainer||a.baseNode||a.anchorNode;b=a.endContainer||a.extentNode||a.focusNode;g=a.startOffset||a.baseOffset||a.anchorOffset;l=a.endOffset||a.extentOffset||a.focusOffset;l>g?(c=f,h=g,e=b,k=l):(c=b,h=l,e=f,k=g);n.setStart(c,h);n.setEnd(e,k);d=window.getSelection();d.removeAllRanges();d.addRange(n)}catch(p){console.log(p)}};r=function(a){var d;a&&a.anchorNode&&(d=a.anchorNode);!d&&window.getSelection&&(a=window.getSelection(),
d=a.anchorNode);!d&&document.selection&&(a=document.selection,a=a.getRangeAt?a.getRangeAt(0):a.createRange(),d=a.commonAncestorContainer?a.commonAncestorContainer:a.parentElement?a.parentElement():a.item(0));if(d)return"#text"===d.nodeName?d.parentNode:d};t=function(a){var d="",f;for(f=0;f<(a||5);f++)d+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()));return d};u=function(a,d,f){var c=b(a);a=c.offset();var e=c.outerWidth()/2;f=d?b(d):c;a.width=f.outerWidth();a.height=49<c.outerHeight()?
c.outerHeight():50;d&&(a.moveLeft=a.left+(e||25)-a.width/2,a.moveTop=a.top+2*e,a.moveRight=a.right+a.width/2-u(d).width/2,a.moveBottom=a.bottom+a.height+6,d=document.body.clientWidth,c=document.body.clientHeight,a.moveLeft+f.outerWidth()>d&&(a.moveLeft=d-f.outerWidth()),a.moveTop+f.outerHeight()>c&&(a.moveTop=0<c-f.outerHeight()?c-f.outerHeight():0));return a};m=function(a,d){var f;f=b(a).is("form")?b(a):d&&b(a).hasClass(c.cssClasses.form)?b(a).find(":input"):d?b(a).closest(c.selectors.form).find(":input"):
b(a).closest(c.selectors.form);if(!f||1>f.length)f=b(a).find(c.selectors.form);return f};return{makeElement:k,initializeRichTextAreas:function(){var a=[];b(c.selectors.toGutentypify).each(function(d,f){var v=b(this);b("<div />").addClass(c.cssClasses.container).insertBefore(v).html(v);v.attr("id")||v.attr("id","gutentyp-"+t());b("<div />").addClass(c.cssClasses.editor).attr("data-for",v.attr("id")).html(v.val()).attr("contenteditable",!0).insertBefore(v);v.removeClass(c.cssClasses.toGutentypify);
v.addClass(c.cssClasses.hidden);v.addClass(c.cssClasses.gutentypified);a.push(v.attr("id"))});return a},insertNewElementBefore:function(a,d,f,c){d&&""!==d&&k(a,f,c).insertBefore(b(d))},insertNewElementInto:function(a,d,f,c){d&&""!==d&&("string"!==typeof a&&a.markup?b(a.markup).appendTo(b(d)):k(a,f,c).appendTo(b(d)))},insertHtmlBefore:function(a,d){return b(a).before(d)},insertHtmlAfter:function(a,d){return b(a).after(d)},setText:function(a,d){return b(a).text(d)},insertHtml:h,addClass:e,removeClass:function(a,
d){return b(a).removeClass(d)},toggleClass:function(a,d){return b(a).toggleClass(d)},getAttribute:function(a,d){return b(a).attr(d)},getOrSetValue:function(a,d){return d?(b(a).val(d),d):b(a).val()},clearForm:function(a){a=m(a);a.val("");a.is("textarea")&&a.html("");a.find(":input").val("");a.find("textarea").html("");return a.find(".alert").addClass(c.cssClasses.hidden)},getClosest:g,getClosestAdjacent:n,getEditor:function(a){return(a=b(a).parents(c.selectors.gutentyp).find(c.selectors.editor))?a[0]:
null},getNext:function(a,d){return b(a).next(d)},getPrevious:function(a,d){return b(a).prev(d)},exists:function(a){return 0<b(a).length},attachEvent:function(a){if(!a||!1===b.isFunction(a.eventHandler))return!1;var d=b(a.primarySelector);if(a.secondarySelector)d.on(a.eventType,a.secondarySelector,function(d){a.eventHandler(d.originalEvent)});else d.on(a.eventType,function(d){a.eventHandler(d.originalEvent)});return e(d,c.cssClasses.hasEvents)},triggerEvent:l,addChangeEventsToEditables:function(a,
d){if(document.querySelectorAll&&"function"===typeof a){var f=0,b=document.querySelectorAll("[contenteditable=true]");for(f;f<b.length;f++)"function"!==typeof b[f].onblur&&(b[f].onfocus=function(){this.data_orig=this.innerHTML},b[f].onblur=function(){if(d||this.innerHTML!==this.data_orig)a(this),this.data_orig=this.innerHTML})}},updateTextarea:function(a){var d=b("textarea#"+b(a).attr("data-for"));d.is("textarea")&&d.html(b(a).html());d.val(b(a).html());l(d[0],"change");return a},isFunction:function(a){return b.isFunction(a)},
isObject:function(a){return b.isPlainObject(a)},isArray:function(a){return b.isArray(a)},hasAncestor:function(a,d){return 0!==b(a).parents(d).length||"string"===typeof d&&b(a).hasClass(d)||"string"===typeof d&&b(a).hasClass(d.substring(1))?!0:!1},getSelectedText:function(){var a,d,b,c;if("undefined"!==typeof window.getSelection){if(a=window.getSelection(),a.rangeCount){d=document.createElement("div");b=0;for(c=a.rangeCount;b<c;++b)d.appendChild(a.getRangeAt(b).cloneContents());return d.innerHTML}}else if("undefined"!==
typeof document.selection&&"Text"===document.selection.type)return document.selection.createRange().htmlText},getSelectedParentNode:r,replaceSelectedText:function(a,d){if(window.getSelection)return p(window.getSelection(),a,d);if(document.selection)return p(document.selection,a,d)},pasteHtmlAtCursor:function(a,d,f){var e;window.getSelection?e=window.getSelection():(e=document.selection,"Control"===e.type&&(e=void 0));f&&0===b(r()).closest(c.selectors.editor).length&&(f=n(g(f.target,c.selectors.toolbar),
c.selectors.editor).first(),h(f,a));p(e,a,d)},pasteHtml:p,selectRange:s,selectionIsInEditor:function(a){return 0<b(r(a)).closest(c.selectors.editor).length},getCursorCoordinates:function(){var a=window.getSelection();return a.getRangeAt&&a.rangeCount?b.extend({isClone:!0},a,a.getRangeAt(0)):!1},getRandomString:t,getCoordinates:u,setStyle:function(a,d){return b(a).attr("style",d)},formToJson:function(a){a=m(a,!0);var d={},f;if(0!==a.length)return f=a.serializeArray(),b.each(f,function(){void 0!==d[this.name]?
(d[this.name].push||(d[this.name]=[d[this.name]]),d[this.name].push(this.value||"")):d[this.name]=this.value||""}),a.find(':input[disabled="disabled"]').each(function(a){a=b(this);var f=a.attr("name");f&&(d[f]=a.val())}),d}}}});hilary.register("gutentyp::pipeline",{init:function(b,c){var k=[],h=[],e={},g,n={beforeAny:k,afterAny:h,registerPipelineEvent:e};e.registerBeforeAnyHandler=function(b){if(!c.isFunction(b))throw Error("Only functions can be registered as beforeAny events.");k.push(b)};e.registerAfterAnyHandler=function(b){if(!c.isFunction(b))throw Error("Only functions can be registered as afterAny events.");h.push(b)};e.registerBeforeComponentHandler=function(c,e){g(b.prefixes.pipeline.beforeComponent+c,e)};e.registerAfterComponentHandler=
function(c,e){g(b.prefixes.pipeline.afterComponent+c,e)};g=function(b,e){if(!c.isFunction(e))throw Error("Only functions can be registered as pipeline events.");n[b]=e};return n}});hilary.register("gutentyp::components",{init:function(b,c,k){var h=[],e,g,n,l,p,q,s,r,t,u={},m;t=function(a){if(a instanceof Array)for(var d in a)a.hasOwnProperty(d)&&t(a[d]);else h.push(a)};q=function(a){c.attachEvent({primarySelector:document,secondarySelector:"."+a.cssClass,eventType:"click",eventHandler:function(a){var b=c.getClosest(a.target,"button");a="."+c.getAttribute(b,"data-for");var b=c.getCoordinates(b,a),e;e="left: "+b.moveLeft+"px";e+="; top: "+b.moveTop+"px";c.setStyle(a,e);c.toggleClass(a,
"active")}})};s=function(a,d){c.attachEvent({primarySelector:document,secondarySelector:"."+a.cssClass+"-form .btn-success",eventType:"click",eventHandler:function(f){var e=c.formToJson(f.target),g;if(c.isFunction(d)&&!d(f,e))return!1;g=c.getClosest(f.target,b.selectors.toolbarGroup);c.toggleClass(g,"active");f.fromGutenForm=!0;a.execute(f,e)}})};r=function(a){c.attachEvent({primarySelector:document,secondarySelector:"."+a.cssClass+"-form .btn-cancel",eventType:"click",eventHandler:function(a){var f=
c.getClosest(a.target,b.selectors.toolbarGroup);a=c.getClosestAdjacent(a.target,".alert");c.toggleClass(f,"active");c.clearForm(f);c.addClass(a,b.cssClasses.hidden)}})};e=function(a,b){var f=b.fields,e=0,h="",k={names:[]},q={},m={},r=c.getRandomString();for(e;e<f.length;e++)m["a"+e]=c.getRandomString(),h+=g(f[e],m["a"+e]),n(k,f[e],m["a"+e]);0<k.names.length&&(q.validate=l(k));return p(a,h,q,r)};g=function(a,d){var f="",e;if(!a||!a.elementType||!a.name)return"";a.validation&&a.validation.message&&
(e="alert "+b.cssClasses.hidden+" "+d,a.validation.cssClass&&(e+=" "+a.validation.cssClass),f+=c.makeElement("div",e,void 0,a.validation.message,!0));a.label&&(f+=c.makeElement("label",void 0,void 0,a.label,!0));e=c.isArray(a.attributes)?a.attributes:[];e.push({key:"name",value:a.name});"input"===a.elementType&&e.push({key:"type",value:a.inputType||"text"});f+=c.makeElement(a.elementType,a.cssClass||void 0,e,void 0,!0);return f+"<br />"};n=function(a,b,f){b.name&&b.validation&&c.isFunction(b.validation.validate)&&
(a.names.push(b.name),a[b.name]=b.validation,a[b.name].messageId=f)};l=function(a){return function(d,f){var e,g,h=!0;for(e=0;e<a.names.length;e++)(g=a[a.names[e]])&&c.isFunction(g.validate)&&g.messageId&&!g.validate(d,f)&&(h=!1,g=c.getClosestAdjacent(d.target,"."+g.cssClass),g.removeClass(b.cssClasses.hidden));return h}};p=function(a,d,f,e){a.uniqueId=e||c.getRandomString();u[a.pipelineName]||(q(a),s(a,f&&f.validate),r(a),u[a.pipelineName]=!0);return{button:'<button type="button" class="'+a.cssClass+
'" data-form-btn="true" data-for="'+a.uniqueId+'"><i class="'+b.cssClasses.toolbarBtnIcon+" "+a.icon+'"></i><span class="'+b.cssClasses.toolbarBtnText+' sr-only">'+a.title+"</span></button>",form:'<div class="'+b.cssClasses.toolbarGroup+" "+b.cssClasses.toolbarArrowOver+" "+a.uniqueId+" "+a.cssClass+'-form"><div class="'+b.cssClasses.form+'">'+d+'<button class="btn btn-success btn-sm" type="button">Add</button><button class="btn btn-cancel btn-sm" type="button">Cancel</button></div></div>',uniqueId:a.uniqueId}};
return{getComponents:function(){return h},makeComponent:function(a){var d={};d.title=a.title;d.cssClass=a.cssClass||a.pipelineName;d.pipelineName=a.pipelineName;d.icon=a.icon||void 0;d.textClass=a.textClass+" "+b.cssClasses.toolbarBtnText||b.cssClasses.toolbarBtnText;d.displayHandler=a.displayHandler;d.group=a.group||void 0;d.execute=function(d,e){var g,h=b.prefixes.pipeline.beforeComponent+a.pipelineName,l=b.prefixes.pipeline.afterComponent+a.pipelineName,n=c.getSelectedText();if(c.getAttribute(c.getClosest(d.target,
"button"),b.attributes.formBtn.key))m=c.getCursorCoordinates(),m.text=n,m.isInEditor=c.selectionIsInEditor(m),d.gutenSelection=m;else{for(g=0;g<k.beforeAny.length;g++)if(c.isFunction(k.beforeAny[g]))k.beforeAny[g](d,n,e);if(c.isFunction(k[h]))k[h](d,n,e);c.isFunction(a.func)&&(g=a.func(d,n||m&&m.text,e),n&&0<n.length&&g?c.replaceSelectedText(g):m&&m.isInEditor&&g?c.pasteHtml(m,g,!0):g&&c.pasteHtmlAtCursor(g,!0,d));for(g=0;g<k.afterAny.length;g++)if(c.isFunction(k.afterAny[g]))k.afterAny[g](d,n,e);
if(c.isFunction(k[l]))k[l](d,n,e)}};a.before&&k.registerPipelineEvent.registerBeforeComponentHandler(a.pipelineName,a.before);a.after&&k.registerPipelineEvent.registerAfterComponentHandler(a.pipelineName,a.after);a.form&&!d.displayHandler&&(d.displayHandler=function(){var b=e(d,a.form);c.exists(b.uniqueId)||c.insertNewElementInto({markup:b.form},"body");return b.button});m=void 0;return d},makeComponentForm:p,addComponent:t}}});hilary.register("gutentyp::toolbar",{init:function(b,c,k){var h=k.getComponents(),e,g,n,l={},p,q,s,r,t,u,m;p=function(){c.insertNewElementBefore("div",b.selectors.newEditors,b.selectors.toolbar)};q=function(){for(e=0;e<h.length;e++)void 0!==h[e].group?t(h[e]):c.isFunction(h[e].displayHandler)?r(h[e]):m(h[e])};s=function(){c.addClass(b.selectors.newEditors,b.cssClasses.hasToolbar);c.addClass(b.selectors.newToolbars,b.cssClasses.hasComponents)};g=function(a){return b.selectors.toolbar+" ."+a.cssClass+
":not("+b.selectors.hasEvents+")"};n=function(a,d){var c;c="gutentyp-component "+a.cssClass;d&&(c+=" "+d);return'<button type="button" class="'+c+'" data-title="'+a.title+'"><i class="'+b.cssClasses.toolbarBtnIcon+" "+a.icon+'"></i><span class="'+a.textClass+'">'+a.title+"</span></button>"};m=function(a){c.insertNewElementInto({markup:n(a)},b.selectors.newToolbars);c.attachEvent({primarySelector:g(a),eventType:"click",eventHandler:a.execute})};r=function(a){c.insertHtml(b.selectors.newToolbars,a.displayHandler());
c.attachEvent({primarySelector:g(a),eventType:"click",eventHandler:a.execute})};u=function(a){var d=l[a.group.name]={components:[a]};d.toggleId=c.getRandomString();d.menuId=c.getRandomString();d.toggleSelector="."+d.toggleId;d.menuSelector="."+d.menuId;c.insertNewElementInto({markup:n(a.group,d.toggleId)},b.selectors.newToolbars);c.insertNewElementInto({markup:'<div class="'+d.menuId+" gutentyp-toolbar-group gutentyp-toolbar-arrow-"+(a.group.arrow||"over")+'"><ul></ul></div>'},"body");c.attachEvent({primarySelector:d.toggleSelector,
eventType:"click",eventHandler:function(a){a=c.getClosest(a.target,"button");a=c.getCoordinates(a,d.menuSelector);var b;b="left: "+a.moveLeft+"px";b+="; top: "+a.moveTop+"px";c.setStyle(d.menuSelector,b);c.toggleClass(".gutentyp-toolbar-group.active:not("+d.menuSelector+")","active");c.toggleClass(d.menuSelector,"active")}});return d};t=function(a){var b=c.getRandomString(),f="."+b,e;l[a.group.name]?(e=l[a.group.name],l[a.group.name].components.push(a)):e=u(a);a.displayHandler?c.insertNewElementInto({markup:"<li>"+
a.displayHandler(b)+"</li>"},e.menuSelector+" ul"):c.insertNewElementInto({markup:"<li>"+n(a,b)+"</li>"},e.menuSelector+" ul");c.attachEvent({primarySelector:f,eventType:"click",eventHandler:function(b,d){a.execute(b,d);c.toggleClass(e.menuSelector,"active")}})};return{build:function(){p();q();s()}}}});hilary.register("gutentyp::transformer",{init:function(b,c,k,h,e,g){g=g||{};return{transform:function(){c.initializeRichTextAreas();g.lazyToolbars?c.attachEvent({primarySelector:document,secondarySelector:b.selectors.editors,eventType:"focusin",eventHandler:function(b){h.build()}}):h.build();c.addChangeEventsToEditables(function(b){b&&c.updateTextarea(b)},!0);c.addClass(b.selectors.editor,b.cssClasses.hasEvents);e.registerPipelineEvent.registerAfterAnyHandler(function(b,e,g){if((b=c.getEditor(b.target))&&
"function"===typeof b.onblur)b.onblur()})}}}});hilary.register("gutentyp::components::blocks",{init:function(b,c){var k,h,e;h=b.makeComponent({title:"Code Block",cssClass:"gutentyp-code-block",pipelineName:"code::block",icon:c.icons.pre,textClass:"sr-only",func:function(b,c){return'<pre class="prettyprint linenums">'+(c||" ")+"</pre>"}});k=b.makeComponent({title:"Code",cssClass:"gutentyp-code",pipelineName:"code",icon:c.icons.code,textClass:"sr-only",func:function(b,c){return"<code>"+c+"</code>"}});e=b.makeComponent({title:"Quote",cssClass:"gutentyp-quote",
pipelineName:"quote",icon:c.icons.blockquote,textClass:"sr-only",func:function(b,c){return"<blockquote>"+c+"</blockquote>"}});b.addComponent([k,h,e])}});hilary.register("gutentyp::components::colors",{init:function(b,c){var k,h=c.colors,e=0,g;g=b.makeComponent({title:"Colors",cssClass:"gutentyp-colors",pipelineName:"colors",icon:"gutentyp-component-color-block gutentyp-component-color-label",textClass:"sr-only"});g.name="colors";g.arrow="over";k=function(c){b.addComponent(b.makeComponent({title:c.title,cssClass:"gutentyp-"+c.name,pipelineName:"color"+c.Title,func:function(b,e){document.execCommand("forecolor",!1,c.value);return!1},displayHandler:function(b){return'<button type="button" class="'+
b+'"><span class="gutentyp-component-color-block" style="background-color: '+c.value+'"></span></button>'},group:g}))};for(e;e<h.length;e++)k(h[e])}});hilary.register("gutentyp::components::emphasis",{init:function(b,c){var k,h,e,g;k=b.makeComponent({title:"Bold",cssClass:"gutentyp-bold",pipelineName:"bold",icon:c.icons.bold,textClass:"sr-only",func:function(b,c){document.execCommand("bold",!1,null);return!1}});h=b.makeComponent({title:"Italic",cssClass:"gutentyp-italic",pipelineName:"italic",icon:c.icons.italic,textClass:"sr-only",func:function(b,c){document.execCommand("italic",!1,null);return!1}});e=b.makeComponent({title:"Underline",cssClass:"gutentyp-underline",
pipelineName:"underline",icon:c.icons.underline,textClass:"sr-only",func:function(b,c){document.execCommand("underline",!1,null);return!1}});g=b.makeComponent({title:"Strike Through",cssClass:"gutentyp-strike",pipelineName:"strike",icon:c.icons.strikethrough,textClass:"sr-only",func:function(b,c){document.execCommand("strikeThrough",!1,null);return!1}});b.addComponent([k,h,e,g])}});hilary.register("gutentyp::components::headings",{init:function(b,c){var k,h,e,g,n,l;l=b.makeComponent({title:"Headings",cssClass:"gutentyp-headings",pipelineName:"headings",icon:c.icons.header,textClass:"sr-only"});l.name="headings";l.arrow="over";k=b.makeComponent({title:"h1",cssClass:"gutentyp-h1",pipelineName:"h1",func:function(b,c){return"<h1>"+(c||"Lorem ipsum")+"</h1>"},group:l});h=b.makeComponent({title:"h2",cssClass:"gutentyp-h2",pipelineName:"h2",func:function(b,c){return"<h2>"+(c||"Lorem ipsum")+
"</h2>"},group:l});e=b.makeComponent({title:"h3",cssClass:"gutentyp-h3",pipelineName:"h3",func:function(b,c){return"<h3>"+(c||"Lorem ipsum")+"</h3>"},group:l});g=b.makeComponent({title:"h4",cssClass:"gutentyp-h4",pipelineName:"h4",func:function(b,c){return"<h4>"+(c||"Lorem ipsum")+"</h4>"},group:l});n=b.makeComponent({title:"h5",cssClass:"gutentyp-h5",pipelineName:"h5",func:function(b,c){return"<h5>"+(c||"Lorem ipsum")+"</h5>"},group:l});l=b.makeComponent({title:"h6",cssClass:"gutentyp-h6",pipelineName:"h6",
func:function(b,c){return"<h6>"+(c||"Lorem ipsum")+"</h6>"},group:l});b.addComponent([k,h,e,g,n,l])}});hilary.register("gutentyp::components::image",{init:function(b,c,k){c=b.makeComponent({title:"Add Image",cssClass:"gutentyp-image",pipelineName:"image",icon:c.icons.image,textClass:"sr-only",func:function(b,c,g){if(!g)throw"No form data is present, so we can't write an image element.";b=g.gutenWidth;c=g.gutenHeight;return'<img src="'+g.gutenSrc+'" alt="'+(g.gutenAlt||g.gutenSrc)+'" '+(b?'width="'+b+'"':"")+(c?'height="'+c+'"':"")+"/>"},form:{fields:[{name:"gutenSrc",label:"Url",elementType:"input",
type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-src",validate:function(b,c){return!c||!c.gutenSrc||0>c.gutenSrc.indexOf("://")?!1:!0}}},{name:"gutenAlt",label:"Description",elementType:"input",type:"text",validation:{message:"Please enter a description. It's used by screen readers for accessibility.",cssClass:"link-alt",validate:function(b,c){return c&&c.gutenAlt?!0:!1}}},{name:"gutenWidth",label:"Width",elementType:"input",type:"text",validation:{message:"Width is not required, but it has to be a number",
cssClass:"link-width",validate:function(b,c){return c&&c.gutenWidth&&isNaN(c.gutenWidth)?!1:!0}}},{name:"gutenHeight",label:"Height",elementType:"input",type:"text",validation:{message:"Height is not required, but it has to be a number",cssClass:"link-height",validate:function(b,c){return c&&c.gutenHeight&&isNaN(c.gutenHeight)?!1:!0}}}]},after:function(b){k.clearForm(b.target)}});b.addComponent(c);return c}});hilary.register("gutentyp::components::justification",{init:function(b,c){var k,h,e,g,n,l;l=b.makeComponent({title:"Alignment",cssClass:"gutentyp-align",pipelineName:"alignment",icon:c.icons.alignLeft,textClass:"sr-only"});l.name="alignment";l.arrow="over";k=b.makeComponent({title:"Align Left",cssClass:"gutentyp-align-left",pipelineName:"alignLeft",icon:c.icons.alignLeft,textClass:"sr-only",func:function(b,c){document.execCommand("justifyLeft",!1,null);return!1},group:l});h=b.makeComponent({title:"Align Center",
cssClass:"gutentyp-align-center",pipelineName:"alignCenter",icon:c.icons.alignCenter,textClass:"sr-only",func:function(b,c){document.execCommand("justifyCenter",!1,null);return!1},group:l});e=b.makeComponent({title:"Align Right",cssClass:"gutentyp-align-right",pipelineName:"alignRight",icon:c.icons.alignRight,textClass:"sr-only",func:function(b,c){document.execCommand("justifyRight",!1,null);return!1},group:l});g=b.makeComponent({title:"Justify",cssClass:"gutentyp-align-justify",pipelineName:"alignJustify",
icon:c.icons.alignJustify,textClass:"sr-only",func:function(b,c){document.execCommand("justifyFull",!1,null);return!1},group:l});n=b.makeComponent({title:"Indent",cssClass:"gutentyp-indent",pipelineName:"indent",icon:c.icons.indent,textClass:"sr-only",func:function(b,c){document.execCommand("indent",!1,null);return!1},group:l});l=b.makeComponent({title:"Outdent",cssClass:"gutentyp-outdent",pipelineName:"outdent",icon:c.icons.outdent,textClass:"sr-only",func:function(b,c){document.execCommand("outdent",
!1,null);return!1},group:l});b.addComponent([k,h,e,g,n,l])}});hilary.register("gutentyp::components::link",{init:function(b,c,k){c=b.makeComponent({title:"Add Link",cssClass:"gutentyp-link",pipelineName:"link",icon:c.icons.link,textClass:"sr-only",func:function(b,c,g){if(!g)throw"No form data is present, so we can't write an anchor element.";return'<a href="'+g.gutenHref+'" target="_blank">'+(c&&0<c.length?c:g.gutenHref)+"</a>"},form:{fields:[{name:"gutenHref",label:"Url",elementType:"input",type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-url",
validate:function(b,c){return!c||!c.gutenHref||0>c.gutenHref.indexOf("://")?!1:!0}}}]},after:function(b){k.clearForm(b.target)}});b.addComponent(c);return c}});hilary.register("gutentyp::components::lists",{init:function(b,c){var k,h;k=b.makeComponent({title:"Unordered List",cssClass:"gutentyp-list-unordered",pipelineName:"list::unordered",icon:c.icons.unorderedList,textClass:"sr-only",func:function(b,c){document.execCommand("insertUnorderedList",!1,null);return!1}});h=b.makeComponent({title:"Ordered List",cssClass:"gutentyp-list-ordered",pipelineName:"list::ordered",icon:c.icons.orderedList,textClass:"sr-only",func:function(b,c){document.execCommand("insertOrderedList",
!1,null);return!1}});b.addComponent([k,h])}});hilary.register("gutentyp::components::embed",{init:function(b,c,k){c=b.makeComponent({title:"Embed Video",cssClass:"gutentyp-embed",pipelineName:"embed",icon:c.icons.embed,textClass:"sr-only",func:function(b,c,g){if(!g)throw"No form data is present, so we can't write a video element.";return g.gutenEmbedCode},form:{fields:[{name:"gutenEmbedCode",label:"Markup",elementType:"textarea",cssClass:"guten-embed",attributes:[{key:"rows",value:"3"}],validation:{message:"The markup is required",cssClass:"link-embed",
validate:function(b,c){return c&&c.gutenEmbedCode?!0:!1}}}]},after:function(b){k.clearForm(b.target)}});b.addComponent(c);return c}});hilary.use([hilary,jQuery,window,nicephore],function(b,c,k,h,e){h.gutentyp=function(){var b={},h,l,p,q,s,r,t,u,m,a=!1,d;l=c.createChildContainer();m=function(a){(a=l.tryResolve(a))&&a.init(r,p,q)};h=function(){p=l.resolve("gutentyp::config").init();b.config=p;q=l.resolve("gutentyp::dom").init(k,p);s=l.resolve("gutentyp::pipeline").init(p,q);b.pipeline=s.registerPipelineEvent;r=l.resolve("gutentyp::components").init(p,q,s)};h();b.registerComponents=function(c){var d;void 0===c.autoRegisterComponents&&
(c.autoRegisterComponents=!0);c.autoRegisterComponents&&(m("gutentyp::components::emphasis"),m("gutentyp::components::colors"),m("gutentyp::components::headings"),m("gutentyp::components::justification"),m("gutentyp::components::lists"),m("gutentyp::components::blocks"),m("gutentyp::components::link"),m("gutentyp::components::image"),m("gutentyp::components::embed"));if(c.components)for(d=0;d<c.components.length;d++)b.registerComponent(c.components[d]);a=!0};d=function(a){a=a||{};void 0===a.observeKeyEvents&&
(a.observeKeyEvents=!1);return a};b.init=function(c){var h;c=d(c);a||(b.registerComponents(c),c.observeKeyEvents&&e&&(h=l.tryResolve("gutentyp::keyEvents"))&&h.init(p,q,e,k));t=l.resolve("gutentyp::toolbar").init(p,q,r);u=l.resolve("gutentyp::transformer").init(p,q,r,t,s,c);u.transform();return b};b.registerComponent=function(a){"string"===typeof a?m(a):(a=r.makeComponent(a),r.addComponent(a));return b};b.overrideModule=function(a,c){l.register(a,c);h();return b};b.overrideConfig=function(a){a=b.overrideModule("gutentyp::config",
a);p.autoCreateSelectors();return a};b.overridedom=function(a){return b.overrideModule("gutentyp::dom",a)};b.overridePipeline=function(a){return b.overrideModule("gutentyp::pipeline",a)};b.overrideComponents=function(a){return b.overrideModule("gutentyp::components",a)};b.overrideToolbar=function(a){l.register("gutentyp::toolbar",a);return b};b.overrideCore=function(a){l.register("gutentyp::core",a);return b};b.ifYouReallyKnowWhatYoureDoing={IoC:l,prep:h};return b}});