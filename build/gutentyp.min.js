hilary.register("gutentyp::config",{init:function(){var a={prefixes:{pipeline:{beforeComponent:"gutentyp::before::",afterComponent:"gutentyp::after::"}},attributes:{formBtn:{key:"data-form-btn",value:"true"}},colors:[]};a.colors.push({title:"Black",name:"black",value:"#000000"});a.colors.push({title:"Grey",name:"grey",value:"#62615f"});a.colors.push({title:"Light Grey",name:"lightGrey",value:"#dcddd7"});a.colors.push({title:"Pink",name:"pink",value:"#cd52bd"});a.colors.push({title:"Red",name:"red",
value:"#9a0000"});a.colors.push({title:"Yellow",name:"yellow",value:"#f0ac28"});a.colors.push({title:"Green",name:"green",value:"#6bb343"});a.colors.push({title:"Blue",name:"blue",value:"#3c8bc8"});a.colors.push({title:"Purple",name:"purple",value:"#a952cd"});a.icons={code:"fa fa-code",pre:"fa fa-file-code-o",blockquote:"fa fa-quote-left",bold:"fa fa-bold",italic:"fa fa-italic",underline:"fa fa-underline",strikethrough:"fa fa-strikethrough",header:"fa fa-header",image:"fa fa-image",alignLeft:"fa fa-align-left",
alignCenter:"fa fa-align-center",alignRight:"fa fa-align-right",alignJustify:"fa fa-align-justify",indent:"fa fa-indent",outdent:"fa fa-outdent",link:"fa fa-link",unorderedList:"fa fa-list-ul",orderedList:"fa fa-list-ol",embed:"fa fa-play-circle-o"};a.cssClasses={toGutentypify:"gutentyp-ify",gutentypified:"gutentyp-ified",hasEvents:"has-events",hasToolbar:"has-toolbar",hasComponents:"has-components",editor:"gutentyp-editor",textarea:"gutentyp-textarea",toolbar:"gutentyp-toolbar",toolbarBtn:"gutentyp-toolbar-btn",
toolbarBtnText:"gutentyp-toolbar-btn-text",toolbarBtnIcon:"gutentyp-toolbar-btn-icon",toolbarGroup:"gutentyp-toolbar-group",toolbarArrowOver:"gutentyp-toolbar-arrow-over",hidden:"gutentyp-hidden",form:"gutentyp-form"};a.autoCreateSelectors=function(){var b;a.selectors={};for(b in a.cssClasses)a.cssClasses.hasOwnProperty(b)&&(a.selectors[b]="."+a.cssClasses[b]);a.selectors.newEditors=a.selectors.editor+":not("+a.selectors.hasToolbar+")";a.selectors.eventlessEditors=a.selectors.editor+":not("+a.selectors.hasEvents+
")";a.selectors.newToolbars=a.selectors.toolbar+":not("+a.selectors.hasComponents+")"};a.autoCreateSelectors();return a}});hilary.register("gutentyp::dom",{init:function(a,b){var h,g,e,f,m,k,p,q,s,r,t,u;h=function(c,d,n,l,b){c=a("<"+(c||"div")+" />");d&&null!==d&&""!==d&&c.addClass("."===d[0]?d.substr(1):d);if("undefined"!==typeof n)for(d=0;d<n.length;d++)c.attr(n[d].key,n[d].value);"undefined"!==typeof l&&c.html(l);return b?c.prop("outerHTML"):c};g=function(c,d){return a(c).append(d)};e=function(c,d){return a(c).addClass(d)};f=function(c,d){return a(c).closest(d)};m=function(c,d){return a(c).siblings(d)};k=function(c,
d){var n;c instanceof a&&(c=c[0]);document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(d,!0,!0),n.eventName=d,c.dispatchEvent(n)):(n=document.createEventObject(),n.eventType=d,n.eventName=d,c.fireEvent("on"+n.eventType,n));a(c).trigger(d)};p=function(c,d,a){var l,b,e,f;if(!c)return!1;c.isClone&&window.getSelection&&(q(c),c=window.getSelection());if(window.getSelection){if(c.getRangeAt&&c.rangeCount){l=c.getRangeAt(0);l.deleteContents();b=document.createElement("div");b.innerHTML=
d;for(d=document.createDocumentFragment();e=b.firstChild;)f=d.appendChild(e);b=d.firstChild;l.insertNode(d);f&&(l=l.cloneRange(),l.setStartAfter(f),a?l.setStartBefore(b):l.collapse(!0),c.removeAllRanges(),c.addRange(l))}}else"Control"!==c.type&&(f=c.createRange(),f.collapse(!0),c.createRange().pasteHTML(d),a&&(l=c.createRange(),l.setEndPoint("StartToStart",f),l.select()))};q=function(c){try{var d,a,l,b,f,e,k,g,h,m=document.createRange();a=c.startContainer||c.baseNode||c.anchorNode;l=c.endContainer||
c.extentNode||c.focusNode;e=c.startOffset||c.baseOffset||c.anchorOffset;k=c.endOffset||c.extentOffset||c.focusOffset;k>e?(b=a,g=e,f=l,h=k):(b=l,g=k,f=a,h=e);m.setStart(b,g);m.setEnd(f,h);d=window.getSelection();d.removeAllRanges();d.addRange(m)}catch(p){console.log(p)}};s=function(c){var d;c&&c.anchorNode&&(d=c.anchorNode);!d&&window.getSelection&&(c=window.getSelection(),d=c.anchorNode);!d&&document.selection&&(c=document.selection,c=c.getRangeAt?c.getRangeAt(0):c.createRange(),d=c.commonAncestorContainer?
c.commonAncestorContainer:c.parentElement?c.parentElement():c.item(0));if(d)return"#text"===d.nodeName?d.parentNode:d};r=function(c){var d="",a;for(a=0;a<(c||5);a++)d+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()));return d};t=function(c,d,b){c=a(c);b=c.position();b.width=c.width();b.height=c.height();d&&(b.moveLeft=b.left+b.width/2-t(d).width/2,b.moveTop=b.top+b.height+6,b.moveRight=b.right+b.width/2-t(d).width/2,b.moveBottom=b.bottom+b.height+6);return b};u=function(c,d){var n;
n=a(c).is("form")?a(c):d&&a(c).hasClass(b.cssClasses.form)?a(c).find(":input"):d?a(c).closest(b.selectors.form).find(":input"):a(c).closest(b.selectors.form);if(!n||1>n.length)n=a(c).find(b.selectors.form);return n};return{makeElement:h,initializeRichTextAreas:function(){var c=[];a(b.selectors.toGutentypify).each(function(d,n){var l=a(this);l.attr("id")||l.attr("id","gutentyp-"+r());a("<div />").addClass(b.cssClasses.editor).attr("data-for",l.attr("id")).html(l.val()).attr("contenteditable",!0).insertBefore(l);
l.removeClass(b.cssClasses.toGutentypify);l.addClass(b.cssClasses.hidden);l.addClass(b.cssClasses.gutentypified);c.push(l.attr("id"))});return c},insertNewElementBefore:function(c,d,b,l){d&&""!==d&&h(c,b,l).insertBefore(a(d))},insertNewElementInto:function(c,d,b,l){d&&""!==d&&("string"!==typeof c&&c.markup?a(c.markup).appendTo(a(d)):h(c,b,l).appendTo(a(d)))},insertHtmlBefore:function(c,d){return a(c).before(d)},insertHtmlAfter:function(c,d){return a(c).after(d)},setText:function(c,d){return a(c).text(d)},
insertHtml:g,addClass:e,removeClass:function(c,d){return a(c).removeClass(d)},toggleClass:function(c,d){return a(c).toggleClass(d)},getAttribute:function(c,d){return a(c).attr(d)},getOrSetValue:function(c,d){return d?(a(c).val(d),d):a(c).val()},clearForm:function(c){c=u(c);c.val("");c.is("textarea")&&c.html("");c.find(":input").val("");c.find("textarea").html("");return c.find(".alert").addClass(b.cssClasses.hidden)},getClosest:f,getClosestAdjacent:m,getNext:function(c,d){return a(c).next(d)},getPrevious:function(c,
d){return a(c).prev(d)},attachEvent:function(c){if(!c||!1===a.isFunction(c.eventHandler))return!1;var d=a(c.primarySelector);if(c.secondarySelector)d.on(c.eventType,c.secondarySelector,function(d){c.eventHandler(d.originalEvent)});else d.on(c.eventType,function(d){c.eventHandler(d.originalEvent)});return e(d,b.cssClasses.hasEvents)},updateTextarea:function(c){var d=a("textarea#"+a(c).attr("data-for"));d.is("textarea")&&d.html(a(c).html());d.val(a(c).html());k(d[0],"change");return c},isFunction:function(c){return a.isFunction(c)},
isObject:function(c){return a.isPlainObject(c)},isArray:function(c){return a.isArray(c)},hasAncestor:function(c,d){return 0!==a(c).parents(d).length||"string"===typeof d&&a(c).hasClass(d)||"string"===typeof d&&a(c).hasClass(d.substring(1))?!0:!1},getSelectedText:function(){var c,d,a,b;if("undefined"!==typeof window.getSelection){if(c=window.getSelection(),c.rangeCount){d=document.createElement("div");a=0;for(b=c.rangeCount;a<b;++a)d.appendChild(c.getRangeAt(a).cloneContents());return d.innerHTML}}else if("undefined"!==
typeof document.selection&&"Text"===document.selection.type)return document.selection.createRange().htmlText},getSelectedParentNode:s,replaceSelectedText:function(c){var d,a,b;if(window.getSelection&&window.getSelection().getRangeAt){d=window.getSelection().getRangeAt(0);d.deleteContents();a=document.createElement("div");a.innerHTML=c;for(c=document.createDocumentFragment();b=a.firstChild;)c.appendChild(b);d.insertNode(c)}else document.selection&&document.selection.createRange&&(d=document.selection.createRange(),
d.pasteHTML(c))},pasteHtmlAtCursor:function(c,d,n){var l;window.getSelection?l=window.getSelection():(l=document.selection,"Control"===l.type&&(l=void 0));n&&0===a(s()).closest(b.selectors.editor).length&&(n=m(f(n.target,b.selectors.toolbar),b.selectors.editor).first(),g(n,c));p(l,c,d)},pasteHtml:p,selectRange:q,selectionIsInEditor:function(c){return 0<a(s(c)).closest(b.selectors.editor).length},getCursorCoordinates:function(){var c=window.getSelection();return c.getRangeAt&&c.rangeCount?a.extend({isClone:!0},
c,c.getRangeAt(0)):!1},getRandomString:r,getCoordinates:t,setStyle:function(c,d){return a(c).attr("style",d)},formToJson:function(c){c=u(c,!0);var d={},b;if(0!==c.length)return b=c.serializeArray(),a.each(b,function(){void 0!==d[this.name]?(d[this.name].push||(d[this.name]=[d[this.name]]),d[this.name].push(this.value||"")):d[this.name]=this.value||""}),c.find(':input[disabled="disabled"]').each(function(c){c=a(this);var b=c.attr("name");b&&(d[b]=c.val())}),d}}}});hilary.register("gutentyp::pipeline",{init:function(a,b){var h=[],g=[],e={},f,m={beforeAny:h,afterAny:g,registerPipelineEvent:e};e.registerBeforeAnyHandler=function(a){if(!b.isFunction(a))throw Error("Only functions can be registered as beforeAny events.");h.push(a)};e.registerAfterAnyHandler=function(a){if(!b.isFunction(a))throw Error("Only functions can be registered as afterAny events.");g.push(a)};e.registerBeforeComponentHandler=function(b,e){f(a.prefixes.pipeline.beforeComponent+b,e)};e.registerAfterComponentHandler=
function(b,e){f(a.prefixes.pipeline.afterComponent+b,e)};f=function(a,e){if(!b.isFunction(e))throw Error("Only functions can be registered as pipeline events.");m[a]=e};return m}});hilary.register("gutentyp::components",{init:function(a,b,h){var g=[],e,f,m,k,p,q,s,r,t,u={},c;t=function(d){if(d instanceof Array)for(var c in d)d.hasOwnProperty(c)&&t(d[c]);else g.push(d)};q=function(d){b.attachEvent({primarySelector:document,secondarySelector:"."+d.cssClass,eventType:"click",eventHandler:function(d){var c=b.getClosest(d.target,"button"),c=b.getNext(c,a.selectors.toolbarGroup);d=b.getCoordinates(d.target,c);var e;e="left: "+d.moveLeft+"px";e+="; top: "+d.moveTop+"px";b.setStyle(c,
e);b.toggleClass(c,"active")}})};s=function(d,c){b.attachEvent({primarySelector:document,secondarySelector:"."+d.cssClass+"-form .btn-success",eventType:"click",eventHandler:function(l){var e=b.formToJson(l.target),f;if(b.isFunction(c)&&!c(l,e))return!1;f=b.getClosest(l.target,a.selectors.toolbarGroup);b.toggleClass(f,"active");l.fromGutenForm=!0;d.execute(l,e)}})};r=function(d){b.attachEvent({primarySelector:document,secondarySelector:"."+d.cssClass+"-form .btn-cancel",eventType:"click",eventHandler:function(d){var c=
b.getClosest(d.target,a.selectors.toolbarGroup);d=b.getClosestAdjacent(d.target,".alert");b.toggleClass(c,"active");b.clearForm(c);b.addClass(d,a.cssClasses.hidden)}})};e=function(d,c){var a=c.fields,e=0,g="",h={names:[]},q={},r={};for(e;e<a.length;e++)r["a"+e]=b.getRandomString(),g+=f(a[e],r["a"+e]),m(h,a[e],r["a"+e]);0<h.names.length&&(q.validate=k(h));return p(d,g,q)};f=function(d,c){var l="",e;if(!d||!d.elementType||!d.name)return"";d.validation&&d.validation.message&&(e="alert "+a.cssClasses.hidden+
" "+c,d.validation.cssClass&&(e+=" "+d.validation.cssClass),l+=b.makeElement("div",e,void 0,d.validation.message,!0));d.label&&(l+=b.makeElement("label",void 0,void 0,d.label,!0));e=b.isArray(d.attributes)?d.attributes:[];e.push({key:"name",value:d.name});"input"===d.elementType&&e.push({key:"type",value:d.inputType||"text"});l+=b.makeElement(d.elementType,d.cssClass||void 0,e,void 0,!0);return l+"<br />"};m=function(d,c,a){c.name&&c.validation&&b.isFunction(c.validation.validate)&&(d.names.push(c.name),
d[c.name]=c.validation,d[c.name].messageId=a)};k=function(d){return function(c,l){var e,f,g=!0;for(e=0;e<d.names.length;e++)(f=d[d.names[e]])&&b.isFunction(f.validate)&&f.messageId&&!f.validate(c,l)&&(g=!1,f=b.getClosestAdjacent(c.target,"."+f.cssClass),f.removeClass(a.cssClasses.hidden));return g}};p=function(d,c,b){u[d.pipelineName]||(q(d),s(d,b&&b.validate),r(d),u[d.pipelineName]=!0);return'<button type="button" class="'+d.cssClass+'" data-form-btn="true"><i class="'+a.cssClasses.toolbarBtnIcon+
" "+d.icon+'"></i><span class="'+a.cssClasses.toolbarBtnText+' sr-only">'+d.title+'</span></button><div class="'+a.cssClasses.toolbarGroup+" "+a.cssClasses.toolbarArrowOver+" "+d.cssClass+'-form"><div class="'+a.cssClasses.form+'">'+c+'<button class="btn btn-success btn-sm" type="button">Add</button><button class="btn btn-cancel btn-sm" type="button">Cancel</button></div></div>'};return{getComponents:function(){return g},makeComponent:function(d){var f={};f.title=d.title;f.cssClass=d.cssClass||d.pipelineName;
f.pipelineName=d.pipelineName;f.icon=d.icon||void 0;f.textClass=d.textClass+" "+a.cssClasses.toolbarBtnText||a.cssClasses.toolbarBtnText;f.displayHandler=d.displayHandler;f.group=d.group||void 0;f.execute=function(e,f){var g,k=a.prefixes.pipeline.beforeComponent+d.pipelineName,n=a.prefixes.pipeline.afterComponent+d.pipelineName,m=b.getSelectedText();if(b.getAttribute(b.getClosest(e.target,"button"),a.attributes.formBtn.key))c=b.getCursorCoordinates(),c.text=m,c.isInEditor=b.selectionIsInEditor(c),
e.gutenSelection=c;else{for(g=0;g<h.beforeAny.length;g++)if(b.isFunction(h.beforeAny[g]))h.beforeAny[g](e,m,f);if(b.isFunction(h[k]))h[k](e,m,f);b.isFunction(d.func)&&(g=d.func(e,m||c&&c.text,f),m&&0<m.length&&g?b.replaceSelectedText(g):c&&c.isInEditor&&g?b.pasteHtml(c,g):g&&b.pasteHtmlAtCursor(g,!1,e));for(g=0;g<h.afterAny.length;g++)if(b.isFunction(h.afterAny[g]))h.afterAny[g](e,m,f);if(b.isFunction(h[n]))h[n](e,m,f)}};d.before&&h.registerPipelineEvent.registerBeforeComponentHandler(d.pipelineName,
d.before);d.after&&h.registerPipelineEvent.registerAfterComponentHandler(d.pipelineName,d.after);d.form&&!f.displayHandler&&(f.displayHandler=function(){return e(f,d.form)});c=void 0;return f},makeComponentForm:p,addComponent:t}}});hilary.register("gutentyp::toolbar",{init:function(a,b,h){var g=h.getComponents(),e,f,m,k={},p,q,s,r,t,u,c;p=function(){b.insertNewElementBefore("div",a.selectors.newEditors,a.selectors.toolbar)};q=function(){for(e=0;e<g.length;e++)void 0!==g[e].group?t(g[e]):b.isFunction(g[e].displayHandler)?r(g[e]):c(g[e])};s=function(){b.addClass(a.selectors.newEditors,a.cssClasses.hasToolbar);b.addClass(a.selectors.newToolbars,a.cssClasses.hasComponents)};f=function(d){return a.selectors.toolbar+" ."+d.cssClass+
":not("+a.selectors.hasEvents+")"};m=function(d,c){var b;b="gutentyp-component "+d.cssClass;c&&(b+=" "+c);return'<button type="button" class="'+b+'" data-title="'+d.title+'"><i class="'+a.cssClasses.toolbarBtnIcon+" "+d.icon+'"></i><span class="'+d.textClass+'">'+d.title+"</span></button>"};c=function(d){b.insertNewElementInto({markup:m(d)},a.selectors.newToolbars);b.attachEvent({primarySelector:f(d),eventType:"click",eventHandler:d.execute})};r=function(d){b.insertHtml(a.selectors.newToolbars,d.displayHandler());
b.attachEvent({primarySelector:f(d),eventType:"click",eventHandler:d.execute})};u=function(d){var c=k[d.group.name]={components:[d]};c.toggleId=b.getRandomString();c.menuId=b.getRandomString();c.toggleSelector="."+c.toggleId;c.menuSelector="."+c.menuId;b.insertNewElementInto({markup:m(d.group,c.toggleId)},a.selectors.newToolbars);b.insertNewElementInto({markup:'<div class="'+c.menuId+" gutentyp-toolbar-group gutentyp-toolbar-arrow-"+(d.group.arrow||"over")+'"><ul></ul></div>'},"body");b.attachEvent({primarySelector:c.toggleSelector,
eventType:"click",eventHandler:function(d){d=b.getCoordinates(d.target,c.menuSelector);var a;a="left: "+d.moveLeft+"px";a+="; top: "+d.moveTop+"px";b.setStyle(c.menuSelector,a);b.toggleClass(".gutentyp-toolbar-group.active:not("+c.menuSelector+")","active");b.toggleClass(c.menuSelector,"active")}});return c};t=function(c){var a=b.getRandomString(),e="."+a,f;k[c.group.name]?(f=k[c.group.name],k[c.group.name].components.push(c)):f=u(c);c.displayHandler?b.insertNewElementInto({markup:"<li>"+c.displayHandler(a)+
"</li>"},f.menuSelector+" ul"):b.insertNewElementInto({markup:"<li>"+m(c,a)+"</li>"},f.menuSelector+" ul");b.attachEvent({primarySelector:e,eventType:"click",eventHandler:function(a,e){c.execute(a,e);b.toggleClass(f.menuSelector,"active")}})};return{build:function(){p();q();s()}}}});hilary.register("gutentyp::transformer",{init:function(a,b,h,g,e){e=e||{};return{transform:function(){b.initializeRichTextAreas();e.lazyToolbars?b.attachEvent({primarySelector:document,secondarySelector:a.selectors.editors,eventType:"focusin",eventHandler:function(a){g.build()}}):g.build();b.attachEvent({primarySelector:a.selectors.eventlessEditors,eventType:"blur,change",eventHandler:function(a){a.target&&b.updateTextarea(a.target)}});b.addClass(a.selectors.editor,a.cssClasses.hasEvents)}}}});hilary.register("gutentyp::components::blocks",{init:function(a,b){var h,g,e;g=a.makeComponent({title:"Code Block",cssClass:"gutentyp-code-block",pipelineName:"code::block",icon:b.icons.pre,textClass:"sr-only",func:function(a,b){return'<pre class="prettyprint linenums">'+(b||" ")+"</pre>"}});h=a.makeComponent({title:"Code",cssClass:"gutentyp-code",pipelineName:"code",icon:b.icons.code,textClass:"sr-only",func:function(a,b){return"<code>"+b+"</code>"}});e=a.makeComponent({title:"Quote",cssClass:"gutentyp-quote",
pipelineName:"quote",icon:b.icons.blockquote,textClass:"sr-only",func:function(a,b){return"<blockquote>"+b+"</blockquote>"}});a.addComponent([h,g,e])}});hilary.register("gutentyp::components::colors",{init:function(a,b){var h,g=b.colors,e=0,f;f=a.makeComponent({title:"Colors",cssClass:"gutentyp-colors",pipelineName:"colors",icon:"gutentyp-component-color-block gutentyp-component-color-label",textClass:"sr-only"});f.name="colors";f.arrow="over";h=function(b){a.addComponent(a.makeComponent({title:b.title,cssClass:"gutentyp-"+b.name,pipelineName:"color"+b.Title,func:function(a,e){document.execCommand("forecolor",!1,b.value);return!1},displayHandler:function(a){return'<button type="button" class="'+
a+'"><span class="gutentyp-component-color-block" style="background-color: '+b.value+'"></span></button>'},group:f}))};for(e;e<g.length;e++)h(g[e])}});hilary.register("gutentyp::components::emphasis",{init:function(a,b){var h,g,e,f;h=a.makeComponent({title:"Bold",cssClass:"gutentyp-bold",pipelineName:"bold",icon:b.icons.bold,textClass:"sr-only",func:function(a,b){document.execCommand("bold",!1,null);return!1}});g=a.makeComponent({title:"Italic",cssClass:"gutentyp-italic",pipelineName:"italic",icon:b.icons.italic,textClass:"sr-only",func:function(a,b){document.execCommand("italic",!1,null);return!1}});e=a.makeComponent({title:"Underline",cssClass:"gutentyp-underline",
pipelineName:"underline",icon:b.icons.underline,textClass:"sr-only",func:function(a,b){document.execCommand("underline",!1,null);return!1}});f=a.makeComponent({title:"Strike Through",cssClass:"gutentyp-strike",pipelineName:"strike",icon:b.icons.strikethrough,textClass:"sr-only",func:function(a,b){document.execCommand("strikeThrough",!1,null);return!1}});a.addComponent([h,g,e,f])}});hilary.register("gutentyp::components::headings",{init:function(a,b){var h,g,e,f,m,k;k=a.makeComponent({title:"Headings",cssClass:"gutentyp-headings",pipelineName:"headings",icon:b.icons.header,textClass:"sr-only"});k.name="headings";k.arrow="over";h=a.makeComponent({title:"h1",cssClass:"gutentyp-h1",pipelineName:"h1",func:function(a,b){return"<h1>"+b+"</h1>"},group:k});g=a.makeComponent({title:"h2",cssClass:"gutentyp-h2",pipelineName:"h2",func:function(a,b){return"<h2>"+b+"</h2>"},group:k});e=a.makeComponent({title:"h3",
cssClass:"gutentyp-h3",pipelineName:"h3",func:function(a,b){return"<h3>"+b+"</h3>"},group:k});f=a.makeComponent({title:"h4",cssClass:"gutentyp-h4",pipelineName:"h4",func:function(a,b){return"<h4>"+b+"</h4>"},group:k});m=a.makeComponent({title:"h5",cssClass:"gutentyp-h5",pipelineName:"h5",func:function(a,b){return"<h5>"+b+"</h5>"},group:k});k=a.makeComponent({title:"h6",cssClass:"gutentyp-h6",pipelineName:"h6",func:function(a,b){return"<h6>"+b+"</h6>"},group:k});a.addComponent([h,g,e,f,m,k])}});hilary.register("gutentyp::components::image",{init:function(a,b,h){b=a.makeComponent({title:"Add Image",cssClass:"gutentyp-image",pipelineName:"image",icon:b.icons.image,textClass:"sr-only",func:function(a,b,f){if(!f)throw"No form data is present, so we can't write an image element.";a=f.gutenWidth;b=f.gutenHeight;return'<img src="'+f.gutenSrc+'" alt="'+(f.gutenAlt||f.gutenSrc)+'" '+(a?'width="'+a+'"':"")+(b?'height="'+b+'"':"")+"/>"},form:{fields:[{name:"gutenSrc",label:"Url",elementType:"input",
type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-src",validate:function(a,b){return!b||!b.gutenSrc||0>b.gutenSrc.indexOf("://")?!1:!0}}},{name:"gutenAlt",label:"Description",elementType:"input",type:"text",validation:{message:"Please enter a description. It's used by screen readers for accessibility.",cssClass:"link-alt",validate:function(a,b){return b&&b.gutenAlt?!0:!1}}},{name:"gutenWidth",label:"Width",elementType:"input",type:"text",validation:{message:"Width is not required, but it has to be a number",
cssClass:"link-width",validate:function(a,b){return b&&b.gutenWidth&&isNaN(b.gutenWidth)?!1:!0}}},{name:"gutenHeight",label:"Height",elementType:"input",type:"text",validation:{message:"Height is not required, but it has to be a number",cssClass:"link-height",validate:function(a,b){return b&&b.gutenHeight&&isNaN(b.gutenHeight)?!1:!0}}}]},after:function(a){h.clearForm(a.target)}});a.addComponent(b);return b}});hilary.register("gutentyp::components::justification",{init:function(a,b){var h,g,e,f,m,k;k=a.makeComponent({title:"Alignment",cssClass:"gutentyp-align",pipelineName:"alignment",icon:b.icons.alignLeft,textClass:"sr-only"});k.name="alignment";k.arrow="over";h=a.makeComponent({title:"Align Left",cssClass:"gutentyp-align-left",pipelineName:"alignLeft",icon:b.icons.alignLeft,textClass:"sr-only",func:function(a,b){document.execCommand("justifyLeft",!1,null);return!1},group:k});g=a.makeComponent({title:"Align Center",
cssClass:"gutentyp-align-center",pipelineName:"alignCenter",icon:b.icons.alignCenter,textClass:"sr-only",func:function(a,b){document.execCommand("justifyCenter",!1,null);return!1},group:k});e=a.makeComponent({title:"Align Right",cssClass:"gutentyp-align-right",pipelineName:"alignRight",icon:b.icons.alignRight,textClass:"sr-only",func:function(a,b){document.execCommand("justifyRight",!1,null);return!1},group:k});f=a.makeComponent({title:"Justify",cssClass:"gutentyp-align-justify",pipelineName:"alignJustify",
icon:b.icons.alignJustify,textClass:"sr-only",func:function(a,b){document.execCommand("justifyFull",!1,null);return!1},group:k});m=a.makeComponent({title:"Indent",cssClass:"gutentyp-indent",pipelineName:"indent",icon:b.icons.indent,textClass:"sr-only",func:function(a,b){document.execCommand("indent",!1,null);return!1},group:k});k=a.makeComponent({title:"Outdent",cssClass:"gutentyp-outdent",pipelineName:"outdent",icon:b.icons.outdent,textClass:"sr-only",func:function(a,b){document.execCommand("outdent",
!1,null);return!1},group:k});a.addComponent([h,g,e,f,m,k])}});hilary.register("gutentyp::components::link",{init:function(a,b,h){b=a.makeComponent({title:"Add Link",cssClass:"gutentyp-link",pipelineName:"link",icon:b.icons.link,textClass:"sr-only",func:function(a,b,f){if(!f)throw"No form data is present, so we can't write an anchor element.";return'<a href="'+f.gutenHref+'" target="_blank">'+(b&&0<b.length?b:f.gutenHref)+"</a>"},form:{fields:[{name:"gutenHref",label:"Url",elementType:"input",type:"text",validation:{message:"Please enter a valid Url.",cssClass:"link-url",
validate:function(b,a){return!a||!a.gutenHref||0>a.gutenHref.indexOf("://")?!1:!0}}}]},after:function(a){h.clearForm(a.target)}});a.addComponent(b);return b}});hilary.register("gutentyp::components::lists",{init:function(a,b){var h,g;h=a.makeComponent({title:"Unordered List",cssClass:"gutentyp-list-unordered",pipelineName:"list::unordered",icon:b.icons.unorderedList,textClass:"sr-only",func:function(a,b){document.execCommand("insertUnorderedList",!1,null);return!1}});g=a.makeComponent({title:"Ordered List",cssClass:"gutentyp-list-ordered",pipelineName:"list::ordered",icon:b.icons.orderedList,textClass:"sr-only",func:function(a,b){document.execCommand("insertOrderedList",
!1,null);return!1}});a.addComponent([h,g])}});hilary.register("gutentyp::components::embed",{init:function(a,b,h){b=a.makeComponent({title:"Embed Video",cssClass:"gutentyp-embed",pipelineName:"embed",icon:b.icons.embed,textClass:"sr-only",func:function(a,b,f){if(!f)throw"No form data is present, so we can't write a video element.";return f.gutenEmbedCode},form:{fields:[{name:"gutenEmbedCode",label:"Markup",elementType:"textarea",cssClass:"guten-embed",attributes:[{key:"rows",value:"3"}],validation:{message:"The markup is required",cssClass:"link-embed",
validate:function(a,b){return b&&b.gutenEmbedCode?!0:!1}}}]},after:function(a){h.clearForm(a.target)}});a.addComponent(b);return b}});hilary.use([hilary,jQuery,window,nicephore],function(a,b,h,g,e){g.gutentyp=function(){var a={},g,k,p,q,s,r,t,u,c,d=!1,n;k=b.createChildContainer();c=function(a){(a=k.tryResolve(a))&&a.init(r,p,q)};g=function(){p=k.resolve("gutentyp::config").init();a.config=p;q=k.resolve("gutentyp::dom").init(h,p);s=k.resolve("gutentyp::pipeline").init(p,q);a.pipeline=s.registerPipelineEvent;r=k.resolve("gutentyp::components").init(p,q,s)};g();a.registerComponents=function(b){var e;void 0===b.autoRegisterComponents&&
(b.autoRegisterComponents=!0);b.autoRegisterComponents&&(c("gutentyp::components::emphasis"),c("gutentyp::components::colors"),c("gutentyp::components::headings"),c("gutentyp::components::justification"),c("gutentyp::components::lists"),c("gutentyp::components::blocks"),c("gutentyp::components::link"),c("gutentyp::components::image"),c("gutentyp::components::embed"));if(b.components)for(e=0;e<b.components.length;e++)a.registerComponent(b.components[e]);d=!0};n=function(a){a=a||{};void 0===a.observeKeyEvents&&
(a.observeKeyEvents=!1);return a};a.init=function(c){var b;c=n(c);d||(a.registerComponents(c),c.observeKeyEvents&&e&&(b=k.tryResolve("gutentyp::keyEvents"))&&b.init(p,q,e,h));t=k.resolve("gutentyp::toolbar").init(p,q,r);u=k.resolve("gutentyp::transformer").init(p,q,r,t,c);u.transform();return a};a.registerComponent=function(b){"string"===typeof b?c(b):(b=r.makeComponent(b),r.addComponent(b));return a};a.overrideModule=function(b,c){k.register(b,c);g();return a};a.overrideConfig=function(b){b=a.overrideModule("gutentyp::config",
b);p.autoCreateSelectors();return b};a.overridedom=function(b){return a.overrideModule("gutentyp::dom",b)};a.overridePipeline=function(b){return a.overrideModule("gutentyp::pipeline",b)};a.overrideComponents=function(b){return a.overrideModule("gutentyp::components",b)};a.overrideToolbar=function(b){k.register("gutentyp::toolbar",b);return a};a.overrideCore=function(b){k.register("gutentyp::core",b);return a};a.ifYouReallyKnowWhatYoureDoing={IoC:k,prep:g};return a}});