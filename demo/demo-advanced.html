<html>
<head>
    <title>Gutentyp Demo</title>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="demo.css" />
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="../lib/hilary.js"></script>
    <script src="../lib/nicephore.min.js"></script>    
</head>
<body>


    <h1>Gutentyp</h2>

    <textarea class="gutentyp-ify" id="test">
        <h1>Exit Strategy</h1>
        <p>We just call it a sausage. We just call it a sausage. I don't understand the question, and I won't respond to it.</p>
        <h2>Forget-Me-Now</h2>
        <p>First place chick is hot, but has an attitude, doesn't date magicians. Say goodbye to these, because it's the last time! I'm afraid I just blue myself. Across from where? Whoa, this guy's straight? It's called 'taking advantage.' It's what gets you ahead in life.</p>
        <ul>
        <li>There's so many poorly chosen words in that sentence.</li>
        <li>Guy's a pro.</li>
        <li>No&hellip; but I'd like to be asked!</li>
        </ul>
        <h3>Top Banana</h3>
        <p>I hear the jury's still out on science. I hear the jury's still out on science. Whoa, this guy's straight? But I bought a yearbook ad from you, doesn't that mean anything anymore? Whoa, this guy's straight?</p>
        <h4>Mr. F</h4>
        <p>As you may or may not know, Lindsay and I have hit a bit of a rough patch. As you may or may not know, Lindsay and I have hit a bit of a rough patch. I've opened a door here that I regret. Did you enjoy your meal, Mom? You drank it fast enough. Whoa, this guy's straight? No&hellip; but I'd like to be asked!</p>
        <ol>
        <li>No, I did not kill Kitty. However, I am going to oblige and answer the nice officer's questions because I am an honest man with no secrets to hide.</li>
        <li>Michael!</li>
        <li>He'll want to use your yacht, and I don't want this thing smelling like fish.</li>
        <li>Whoa, this guy's straight?</li>
        </ol>
        <h5>Meat the Veals</h5>
        <p>No, I did not kill Kitty. However, I am going to oblige and answer the nice officer's questions because I am an honest man with no secrets to hide. Michael! Michael! Michael! No, I did not kill Kitty. However, I am going to oblige and answer the nice officer's questions because I am an honest man with no secrets to hide. That's what it said on 'Ask Jeeves.'</p>
    </textarea>
    <br />
    <br />
    <textarea class="gutentyp-ify" id="test2">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur sit amet sapien vitae purus ultricies lobortis id ut turpis. Phasellus pellentesque tristique nulla nec blandit. Pellentesque augue massa, fringilla ut erat non, commodo hendrerit augue. Suspendisse aliquam sapien vitae sem semper, at molestie justo pretium. Quisque pellentesque mattis iaculis. Pellentesque fermentum laoreet tincidunt. Maecenas rhoncus porta dui, ut elementum orci tincidunt sit amet.
    </textarea>

    <br />
    <br />
    <textarea class="rts2" id="test3">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur sit amet sapien vitae purus ultricies lobortis id ut turpis. Phasellus pellentesque tristique nulla nec blandit. Pellentesque augue massa, fringilla ut erat non, commodo hendrerit augue. Suspendisse aliquam sapien vitae sem semper, at molestie justo pretium. Quisque pellentesque mattis iaculis. Pellentesque fermentum laoreet tincidunt. Maecenas rhoncus porta dui, ut elementum orci tincidunt sit amet.
    </textarea>


    <script src="../source/config.js"></script>
    <script src="../source/utils.js"></script>
    <script src="../source/pipeline.js"></script>
    <script src="../source/components.js"></script>
    <script src="../source/toolbar.js"></script>
    <script src="../source/core.js"></script>
    <script src="../source/components.colors.js"></script>
    <script src="../source/components.headings.js"></script>
    <script src="../source/components.emphasis.js"></script>
    <script src="../source/components.justification.js"></script>
    <script src="../source/components.lists.js"></script>
    <script src="../source/components.blocks.js"></script>
    <script src="../source/components.link.js"></script>
    <script src="../source/components.image.js"></script>
    <script src="../source/gutentyp.js"></script>

    <script type="text/javascript">
        // create 2 instances of gutentyp, for different configurations
        var rts = gutentyp(),
            rts2 = gutentyp();

        // register a custom component to be added to the toolbar and then initialize all textareas
        // that match the config

        rts.registerComponent({
            title: 'Custom Foreground color',
            cssClass: 'gutentyp-fg-color',
            pipelineName: 'foregroundColor2',
            func: function (event, text) {
                document.execCommand('forecolor', false, '#FF0000');
                return false;
            },
            before: function (event) {
                console.log('before', event);
            },
            after: function (event) {
                console.log('after', event);
            }
        });

        rts.init();

    </script>

    <script type="text/javascript">
        // configure an alternate gutentyp instance, then override the toolbar module and
        // initialize the textareas that match this config

        // here we are modifying the existing config, so we can override it later
        var rts2Config = rts2.config;
        rts2Config.cssClasses.toGutentypify = 'rts2';
        rts2Config.selectors.toGutentypify = '.rts2';
        rts2Config.cssClasses.editor = 'rts2editor';
        rts2Config.selectors.editor = '.rts2editor';

        // override the existing config with our modifications
        rts2.overrideConfig({ init: function () { return rts2Config; }});

        // override the toolbar => we want to create our own!
        rts2.overrideToolbar({ init: function (config, utils, components) {
            "use strict";

            var build = function () {
                $(config.selectors.editor).prepend('<div><strong>Foo Toolbar!</strong></div>');

                return;
            };

            return {
                build: build
            };

        }});

        // override an existing component
        rts2.overrideModule('gutentyp::components::colors', { init: function (components) {
            "use strict";

            var fgColor, bgColor;

            fgColor = components.makeComponent({
                title: 'Foreground color',
                cssClass: 'gutentyp-fg-color',
                pipelineName: 'foregroundColor',
                func: function (event, text) {
                    document.execCommand('forecolor', false, '#FF0000');
                    return false;
                }
            });

            bgColor = components.makeComponent({
                title: 'Background color',
                cssClass: 'gutentyp-bg-color',
                pipelineName: 'backgroundColor',
                func: function () {
                    document.execCommand('backcolor', false, '#FF0000');
                    return false;
                }
            });

            components.addComponent([fgColor, bgColor]);
        }});

        rts2.init();

        // init a second time to verify that we don't re-do anything
        rts.init();
    </script>


</body>
</html>
