<html>
<head>
    <title>Gutentyp Demo</title>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="demo.css" />
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="../lib/hilary.js"></script>
    <script src="../lib/nicephore.min.js"></script>
</head>
<body>

    <section class="main">
        <h1>Gutentyp</h1>
        <br />

        <textarea class="gutentyp-ify" id="test">
            <h2 data-brackets-id="149">Why Gutentyp?</h2>
            <br data-brackets-id="150">
            <div data-brackets-id="151">
                We wanted a highly extensible, modular rich text editor that just works. There are a lot 
                of great rich text editors out there, but each one presented a drawback to us, that led us 
                to design our own.
            </div>
            <div data-brackets-id="152">
                The result is a simple library that is easy to extend and customize. It supports multi-instance, 
                not only so you can have multiple rich text editors on the same page, but unique configurations 
                for them, if you desire.
            </div>
            
            <h2 data-brackets-id="153">Getting Started</h2>
            <div data-brackets-id="154">The super-simple path is to start with a <code data-brackets-id="155">textarea</code></div>
            
<pre data-brackets-id="156">&lt; textarea id="id-isnt-required" class="gutentyp-ify"&gt;
&lt; /textarea&gt;
</pre>
            <br data-brackets-id="157">
            <div data-brackets-id="158">and then wire it up with JavaScript</div>
            
<pre data-brackets-id="159">var gutenInstance = gutentyp();
gutenInstance.init();
</pre>
            
            <br data-brackets-id="160">
            <div data-brackets-id="161">
                You can call init as much as you like, and you'll need to after DOM Mutations. If you're using 
                jQuery for your ajax, you can initialize Gutentyp like this
            </div>
            
<pre data-brackets-id="162">var gutenInstance = gutentyp();

...

$(document).ajaxComplete(function () {
    gutenInstance.init();
});
</pre>
            
            <h2 data-brackets-id="163">Gutentyp is Modular and Highly Extensible</h2>
            <br data-brackets-id="164">
            
            <div data-brackets-id="165">
                Gutentyp is built so you can extend it easily, and replace modules with custom modules, if you like. 
                Modules include the core components that make up Gutentyp, as well as the components that are 
                available in the toolbar.
            </div>
            <div data-brackets-id="166">
                To add components, you register them on the instance prior to initialization.
            </div>
<pre data-brackets-id="167">var gutenInstance = gutentyp();

gutenInstance.registerComponent({
    title: 'Custom Foreground color',                   // The text that will be displayed or read by a screen reader
    cssClass: 'gutentyp-fg-color',                      // A css class is added to the button, so you can style with CSS/LESS/SASS
    pipelineName: 'foregroundColor2',                   // This is a unique name that the component will be registered as
    icon: 'fa fa-edit',                                 // CSS Classes for your icon
    textCss: 'sr-only'                                  // CSS Classes for the text (sr-only means it won't be displayed, but will be read by screen readers)
    // @param event: the original event
    // @param text: the text that is selected, if any
    func: function (event, text) {                      // The handler that is executed on button click
        document.execCommand('forecolor', false, '#FF0000');
        return false;
    },
    // @param event: the original event
    before: function (event) {                          // You can register before
        console.log('before', event);
    },
    // @param event: the original event
    after: function (event) {                           // and after handlers inline, as well as exclusively
        console.log('after', event);
    }
});

gutenInstance.init();                                   // Once init is called, the toolbar will not change
</pre>            

            <br data-brackets-id="168">
            <h3 data-brackets-id="169">Configuring Gutentyp</h3><div>Like registering components, configuration can be modified before you call the <code>init</code> function. Here's an example:</div><div><pre data-brackets-id="167">var gutenInstance = gutentyp();

gutenInstance.config.icons = { 
    code: 'fa fa-code',
    pre: 'fa fa-file-code-o',
    blockquote: 'fa fa-quote-left',
    bold: 'fa fa-bold',
    italic: 'fa fa-italic',
    underline: 'fa fa-underline',
    strikethrough: 'fa fa-strikethrough',
    header: 'fa fa-header',
    image: 'fa fa-image',
    alignLeft: 'fa fa-align-left',
    alignCenter: 'fa fa-align-center',
    alignRight: 'fa fa-align-right',
    alignJustify: 'fa fa-align-justify',
    indent: 'fa fa-indent',
    outdent: 'fa fa-outdent',
    link: 'fa fa-link',
    unorderedList: 'fa fa-list-ul',
    orderedList: 'fa fa-list-ol'
};

gutenInstance.init();
</pre></div>
            
            <h3 data-brackets-id="169">Registering and Overriding Modules</h3>
            <div data-brackets-id="170">There are six core modules that are composed by a seventh module, any of which can be replaced easily.</div>        

        </textarea>
        
        
        
        <br />
        <br />
        <h2>A second instance with the same configuration</h2>
        <br />
        <textarea class="gutentyp-ify" id="test2">
            <h1>Exit Strategy</h1>
            <p>We just call it a sausage. We just call it a sausage. I don't understand the question, and I won't respond to it.</p>
            <h2>Forget-Me-Now</h2>
            <p>First place chick is hot, but has an attitude, doesn't date magicians. Say goodbye to these, because it's the last time! I'm afraid I just blue myself. Across from where? Whoa, this guy's straight? It's called 'taking advantage.' It's what gets you ahead in life.</p>
            <ul>
            <li>There's so many poorly chosen words in that sentence.</li>
            <li>Guy's a pro.</li>
            <li>No&hellip; but I'd like to be asked!</li>
            </ul>
            <h3>Top Banana</h3>
            <p>I hear the jury's still out on science. I hear the jury's still out on science. Whoa, this guy's straight? But I bought a yearbook ad from you, doesn't that mean anything anymore? Whoa, this guy's straight?</p>
            <h4>Mr. F</h4>
            <p>As you may or may not know, Lindsay and I have hit a bit of a rough patch. As you may or may not know, Lindsay and I have hit a bit of a rough patch. I've opened a door here that I regret. Did you enjoy your meal, Mom? You drank it fast enough. Whoa, this guy's straight? No&hellip; but I'd like to be asked!</p>
            <ol>
            <li>No, I did not kill Kitty. However, I am going to oblige and answer the nice officer's questions because I am an honest man with no secrets to hide.</li>
            <li>Michael!</li>
            <li>He'll want to use your yacht, and I don't want this thing smelling like fish.</li>
            <li>Whoa, this guy's straight?</li>
            </ol>
            <h5>Meat the Veals</h5>
            <p>No, I did not kill Kitty. However, I am going to oblige and answer the nice officer's questions because I am an honest man with no secrets to hide. Michael! Michael! Michael! No, I did not kill Kitty. However, I am going to oblige and answer the nice officer's questions because I am an honest man with no secrets to hide. That's what it said on 'Ask Jeeves.'</p>
        </textarea>

        <br />
        <br />
        <h2>A third instance with unique configuration</h2>
        <br />
        <textarea class="rts2" id="test3">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur sit amet sapien vitae purus ultricies lobortis id ut turpis. Phasellus pellentesque tristique nulla nec blandit. Pellentesque augue massa, fringilla ut erat non, commodo hendrerit augue. Suspendisse aliquam sapien vitae sem semper, at molestie justo pretium. Quisque pellentesque mattis iaculis. Pellentesque fermentum laoreet tincidunt. Maecenas rhoncus porta dui, ut elementum orci tincidunt sit amet.
        </textarea>
    </section>


    <script src="../source/config.js"></script>
    <script src="../source/utils.js"></script>
    <script src="../source/pipeline.js"></script>
    <script src="../source/components.js"></script>
    <script src="../source/toolbar.js"></script>
    <script src="../source/core.js"></script>
    <script src="../source/components.colors.js"></script>
    <script src="../source/components.headings.js"></script>
    <script src="../source/components.emphasis.js"></script>
    <script src="../source/components.justification.js"></script>
    <script src="../source/components.lists.js"></script>
    <script src="../source/components.blocks.js"></script>
    <script src="../source/components.link.js"></script>
    <script src="../source/components.image.js"></script>
    <script src="../source/components.embed.js"></script>
    <script src="../source/paste.js"></script>
    <script src="../source/gutentyp.js"></script>

    <script type="text/javascript">
        // create 2 instances of gutentyp, for different configurations
        var rts = gutentyp(),
            rts2 = gutentyp();

        // register a custom component to be added to the toolbar and then initialize all textareas
        // that match the config

//        rts.registerComponent({
//            title: 'Custom Foreground color',
//            cssClass: 'gutentyp-fg-color',
//            pipelineName: 'foregroundColor2',
//            func: function (event, text) {
//                document.execCommand('forecolor', false, '#FF0000');
//                return false;
//            },
//            before: function (event) {
//                console.log('before', event);
//            },
//            after: function (event) {
//                console.log('after', event);
//            }
//        });
        
        hilary.register('new::component', { init: function (components, config, utils) {
            var custom = components.makeComponent({
                title: 'Custom',
                cssClass: 'gutentyp-fg-color',
                pipelineName: 'foregroundColor2',
                func: function (event, text) {
                    document.execCommand('forecolor', false, '#FF0000');
                    return false;
                },
                before: function (event) {
                    console.log('before', event);
                },
                after: function (event) {
                    console.log('after', event);
                }
            });
            
            components.addComponent(custom);
        }});
        
//                tryResolveComponent('gutentyp::components::emphasis');
//                tryResolveComponent('gutentyp::components::colors');
//                tryResolveComponent('gutentyp::components::headings');
//                tryResolveComponent('gutentyp::components::justification');
//                tryResolveComponent('gutentyp::components::lists');
//                tryResolveComponent('gutentyp::components::blocks');
//                tryResolveComponent('gutentyp::components::link');
//                tryResolveComponent('gutentyp::components::image');        


        //rts.init({ autoRegisterComponents: false, components: ['gutentyp::components::emphasis', 'new::component']});
        rts.init({ observePaste: true, autoRegisterComponents: true, components: ['new::component']});

    </script>

    <script type="text/javascript">
        // configure an alternate gutentyp instance, then override the toolbar module and
        // initialize the textareas that match this config

        // here we are modifying the existing config, so we can override it later
        var rts2Config = rts2.config;
        rts2Config.cssClasses.toGutentypify = 'rts2';
        rts2Config.selectors.toGutentypify = '.rts2';
        rts2Config.cssClasses.editor = 'rts2editor';
        rts2Config.selectors.editor = '.rts2editor';

        // override the existing config with our modifications
        rts2.overrideConfig({ init: function () { return rts2Config; }});

        // override the toolbar => we want to create our own!
        rts2.overrideToolbar({ init: function (config, utils, components) {
            "use strict";

            var build = function () {
                $(config.selectors.editor).prepend('<div><strong>Foo Toolbar!</strong></div>');

                return;
            };

            return {
                build: build
            };

        }});

        // override an existing component
        rts2.overrideModule('gutentyp::components::colors', { init: function (components) {
            "use strict";

            var fgColor, bgColor;

            fgColor = components.makeComponent({
                title: 'Foreground color',
                cssClass: 'gutentyp-fg-color',
                pipelineName: 'foregroundColor',
                func: function (event, text) {
                    document.execCommand('forecolor', false, '#FF0000');
                    return false;
                }
            });

            bgColor = components.makeComponent({
                title: 'Background color',
                cssClass: 'gutentyp-bg-color',
                pipelineName: 'backgroundColor',
                func: function () {
                    document.execCommand('backcolor', false, '#FF0000');
                    return false;
                }
            });

            components.addComponent([fgColor, bgColor]);
        }});

        rts2.init();

        // init a second time to verify that we don't re-do anything
        rts.init();
    </script>


</body>
</html>
